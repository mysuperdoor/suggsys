"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[158],{37158:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var s=t(65043),r=t(84892),o=t(50289),a=t(48193),c=t(26655),l=t(44394),i=t(33307),d=t(89421),u=t(64435),m=t(98617),p=t(46237),f=t(94505),h=t(70579);const{Title:A,Text:x}=r.A,v=()=>{const[e]=o.A.useForm(),[n,t]=(0,s.useState)(!1),[r,v]=(0,s.useState)(!1),[y,w]=(0,s.useState)("");return(0,h.jsxs)("div",{style:{padding:24},children:[(0,h.jsx)(A,{level:2,children:"\u4fee\u6539\u5bc6\u7801"}),(0,h.jsx)(x,{type:"secondary",children:"\u4e3a\u4e86\u60a8\u7684\u8d26\u6237\u5b89\u5168\uff0c\u5efa\u8bae\u5b9a\u671f\u4fee\u6539\u5bc6\u7801"}),(0,h.jsxs)(c.A,{style:{maxWidth:500,margin:"24px 0"},children:[y&&(0,h.jsx)(l.A,{message:"\u4fee\u6539\u5931\u8d25",description:y,type:"error",showIcon:!0,style:{marginBottom:16},closable:!0,onClose:()=>w("")}),r&&(0,h.jsx)(l.A,{message:"\u4fee\u6539\u6210\u529f",description:"\u60a8\u7684\u5bc6\u7801\u5df2\u7ecf\u6210\u529f\u4fee\u6539\uff0c\u4e0b\u6b21\u767b\u5f55\u8bf7\u4f7f\u7528\u65b0\u5bc6\u7801",type:"success",showIcon:!0,style:{marginBottom:16}}),(0,h.jsxs)(o.A,{form:e,layout:"vertical",onFinish:async n=>{try{t(!0),w(""),v(!1),await f.A.put("/auth/change-password",{currentPassword:n.currentPassword,newPassword:n.newPassword}),a.Ay.success("\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"),v(!0),e.resetFields()}catch(y){var s,r,o,c;console.error("\u4fee\u6539\u5bc6\u7801\u5931\u8d25:",y),w((null===(s=y.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.msg)||(null===(o=y.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||"\u5bc6\u7801\u4fee\u6539\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{t(!1)}},children:[(0,h.jsx)(o.A.Item,{name:"currentPassword",label:"\u5f53\u524d\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5f53\u524d\u5bc6\u7801"}],children:(0,h.jsx)(i.A.Password,{prefix:(0,h.jsx)(m.A,{}),placeholder:"\u8bf7\u8f93\u5165\u5f53\u524d\u5bc6\u7801"})}),(0,h.jsx)(o.A.Item,{name:"newPassword",label:"\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"},{min:6,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c11\u4e8e6\u4e2a\u5b57\u7b26"}],hasFeedback:!0,children:(0,h.jsx)(i.A.Password,{prefix:(0,h.jsx)(m.A,{}),placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})}),(0,h.jsx)(o.A.Item,{name:"confirmPassword",label:"\u786e\u8ba4\u65b0\u5bc6\u7801",dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u65b0\u5bc6\u7801"},e=>{let{getFieldValue:n}=e;return{validator:(e,t)=>t&&n("newPassword")!==t?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")):Promise.resolve()}}],children:(0,h.jsx)(i.A.Password,{prefix:(0,h.jsx)(m.A,{}),placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801"})}),(0,h.jsx)(o.A.Item,{children:(0,h.jsx)(d.A,{type:"primary",htmlType:"submit",loading:n,icon:(0,h.jsx)(p.A,{}),children:"\u786e\u8ba4\u4fee\u6539"})})]}),(0,h.jsxs)(u.A,{direction:"vertical",style:{marginTop:16},children:[(0,h.jsx)(x,{type:"secondary",children:"\u5bc6\u7801\u5b89\u5168\u5efa\u8bae\uff1a"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"\u5bc6\u7801\u957f\u5ea6\u81f3\u5c116\u4e2a\u5b57\u7b26"}),(0,h.jsx)("li",{children:"\u5efa\u8bae\u4f7f\u7528\u5b57\u6bcd\u3001\u6570\u5b57\u548c\u7279\u6b8a\u5b57\u7b26\u7684\u7ec4\u5408"}),(0,h.jsx)("li",{children:"\u4e0d\u8981\u4f7f\u7528\u5bb9\u6613\u88ab\u731c\u5230\u7684\u4fe1\u606f\uff08\u5982\u751f\u65e5\uff09"}),(0,h.jsx)("li",{children:"\u4e0d\u8981\u4e0e\u5176\u4ed6\u7cfb\u7edf\u4f7f\u7528\u76f8\u540c\u7684\u5bc6\u7801"})]})]})]})]})}},44394:(e,n,t)=>{t.d(n,{A:()=>L});var s=t(58168),r=t(5544),o=t(64467),a=t(12499),c=t(46237),l=t(78528),i=t(89967),d=t(53727),u=t(51376),m=t(39470),p=t(13888),f=t(94786),h=t(98139),A=t.n(h),x=t(50541),v=t(65043),y=t(35296),w=t(87190),j=t(12701),g=t(23029),b=t(92901),C=t(56822),E=t(52176),P=t(53954),k=t(15361);const N=function(e){function n(){var e,t,s,r;return(0,g.A)(this,n),t=this,s=n,r=arguments,s=(0,P.A)(s),(e=(0,C.A)(t,(0,E.A)()?Reflect.construct(s,r||[],(0,P.A)(t).constructor):s.apply(t,r))).state={error:void 0,info:{componentStack:""}},e}return(0,k.A)(n,e),(0,b.A)(n,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e,info:n})}},{key:"render",value:function(){var e=this.props,n=e.message,t=e.description,s=e.children,r=this.state,o=r.error,a=r.info,c=a&&a.componentStack?a.componentStack:null,l="undefined"===typeof n?(o||"").toString():n,i="undefined"===typeof t?c:t;return o?v.createElement(L,{type:"error",message:l,description:v.createElement("pre",null,i)}):s}}]),n}(v.Component);var I=function(e,n){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)n.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(t[s[r]]=e[s[r]])}return t},S={success:a.A,info:p.A,error:l.A,warning:u.A},O={success:c.A,info:f.A,error:i.A,warning:m.A},T=function(e){var n=e.description,t=e.icon,s=e.prefixCls,r=e.type,a=(n?O:S)[r]||null;return t?(0,j.fx)(t,v.createElement("span",{className:"".concat(s,"-icon")},t),(function(){return{className:A()("".concat(s,"-icon"),(0,o.A)({},t.props.className,t.props.className))}})):v.createElement(a,{className:"".concat(s,"-icon")})},F=function(e){var n=e.isClosable,t=e.closeText,s=e.prefixCls,r=e.closeIcon,o=e.handleClose;return n?v.createElement("button",{type:"button",onClick:o,className:"".concat(s,"-close-icon"),tabIndex:0},t?v.createElement("span",{className:"".concat(s,"-close-text")},t):r):null},M=function(e){var n=e.description,t=e.prefixCls,a=e.message,c=e.banner,l=e.className,i=void 0===l?"":l,u=e.style,m=e.onMouseEnter,p=e.onMouseLeave,f=e.onClick,h=e.afterClose,j=e.showIcon,g=e.closable,b=e.closeText,C=e.closeIcon,E=void 0===C?v.createElement(d.A,null):C,P=e.action,k=I(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),N=v.useState(!1),S=(0,r.A)(N,2),O=S[0],M=S[1],L=v.useRef(),W=v.useContext(y.QO),q=W.getPrefixCls,B=W.direction,H=q("alert",t),R=function(e){var n;M(!0),null===(n=k.onClose)||void 0===n||n.call(k,e)},_=!!b||g,D=function(){var e=k.type;return void 0!==e?e:c?"warning":"info"}(),Q=!(!c||void 0!==j)||j,V=A()(H,"".concat(H,"-").concat(D),(0,o.A)((0,o.A)((0,o.A)((0,o.A)({},"".concat(H,"-with-description"),!!n),"".concat(H,"-no-icon"),!Q),"".concat(H,"-banner"),!!c),"".concat(H,"-rtl"),"rtl"===B),i),z=(0,w.A)(k);return v.createElement(x.Ay,{visible:!O,motionName:"".concat(H,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:h},(function(e){var t=e.className,r=e.style;return v.createElement("div",(0,s.A)({ref:L,"data-show":!O,className:A()(V,t),style:(0,s.A)((0,s.A)({},u),r),onMouseEnter:m,onMouseLeave:p,onClick:f,role:"alert"},z),Q?v.createElement(T,{description:n,icon:k.icon,prefixCls:H,type:D}):null,v.createElement("div",{className:"".concat(H,"-content")},a?v.createElement("div",{className:"".concat(H,"-message")},a):null,n?v.createElement("div",{className:"".concat(H,"-description")},n):null),P?v.createElement("div",{className:"".concat(H,"-action")},P):null,v.createElement(F,{isClosable:!!_,closeText:b,prefixCls:H,closeIcon:E,handleClose:R}))}))};M.ErrorBoundary=N;const L=M},87190:(e,n,t)=>{function s(e){return Object.keys(e).reduce((function(n,t){return!t.startsWith("data-")&&!t.startsWith("aria-")&&"role"!==t||t.startsWith("data-__")||(n[t]=e[t]),n}),{})}t.d(n,{A:()=>s})}}]);
//# sourceMappingURL=158.4c8fb423.chunk.js.map