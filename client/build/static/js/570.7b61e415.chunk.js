"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[570],{19119:(e,t,n)=>{n.r(t),n.d(t,{IMPLEMENTATION_STATUS:()=>r,IMPLEMENTATION_STATUS_COLORS:()=>i,IMPLEMENTATION_STATUS_TRANSITIONS:()=>l,REVIEW_LEVELS:()=>g,REVIEW_RESULTS:()=>E,REVIEW_STATUS:()=>a,REVIEW_STATUS_COLORS:()=>o,REVIEW_STATUS_TRANSITIONS:()=>s,STATUS_COLORS:()=>d,SUGGESTION_STATUS:()=>c,SUGGESTION_TYPES:()=>u,TYPE_COLORS:()=>p});const a={PENDING_FIRST_REVIEW:"\u7b49\u5f85\u4e00\u7ea7\u5ba1\u6838",PENDING_SECOND_REVIEW:"\u7b49\u5f85\u4e8c\u7ea7\u5ba1\u6838",APPROVED:"\u5df2\u6279\u51c6",REJECTED:"\u5df2\u9a73\u56de"},o={PENDING_FIRST_REVIEW:"gold",PENDING_SECOND_REVIEW:"orange",APPROVED:"green",REJECTED:"red"},s={PENDING_FIRST_REVIEW:["APPROVED","REJECTED"],PENDING_SECOND_REVIEW:["APPROVED","REJECTED"],APPROVED:[],REJECTED:["PENDING_FIRST_REVIEW"]},r={NOT_STARTED:"\u672a\u5f00\u59cb",CONTACTING:"\u8054\u7cfb\u4e2d",IN_PROGRESS:"\u5b9e\u65bd\u4e2d",DELAYED:"\u5ef6\u671f",COMPLETED:"\u5df2\u5b8c\u6210",CANCELLED:"\u5df2\u53d6\u6d88"},l={NOT_STARTED:["CONTACTING","CANCELLED"],CONTACTING:["IN_PROGRESS","CANCELLED"],IN_PROGRESS:["COMPLETED","DELAYED","CANCELLED"],DELAYED:["IN_PROGRESS","COMPLETED","CANCELLED"],COMPLETED:[],CANCELLED:["CONTACTING"]},i={NOT_STARTED:"gold",CONTACTING:"processing",IN_PROGRESS:"warning",DELAYED:"orange",COMPLETED:"success",CANCELLED:"red"},c={PENDING_FIRST_REVIEW:"\u7b49\u5f85\u4e00\u7ea7\u5ba1\u6838",PENDING_SECOND_REVIEW:"\u7b49\u5f85\u4e8c\u7ea7\u5ba1\u6838",APPROVED:"\u5df2\u6279\u51c6",REJECTED:"\u5df2\u9a73\u56de",NOT_STARTED:"\u672a\u5f00\u59cb",NOT_IMPLEMENTED:"\u5df2\u6279\u51c6\u5f85\u5b9e\u65bd",IMPLEMENTING:"\u5b9e\u65bd\u4e2d",DELAYED:"\u5b9e\u65bd\u5ef6\u671f",COMPLETED:"\u5df2\u5b8c\u6210",CANCELLED:"\u5df2\u53d6\u6d88"},u={SAFETY:"\u8c03\u5ea6\u5b89\u5168\u7c7b",ELECTRICAL:"\u8bbe\u5907\u7535\u6c14\u7c7b",MECHANICAL:"\u8bbe\u5907\u673a\u68b0\u7c7b",KEXIN_AUTOMATION:"\u79d1\u4fe1\u81ea\u52a8\u5316\u7c7b",KEXIN_MONITORING:"\u79d1\u4fe1\u76d1\u63a7\u7c7b",OTHER:"\u5176\u5b83\u7c7b"},g={FIRST_LEVEL:"\u4e00\u7ea7\u5ba1\u6838",SECOND_LEVEL:"\u4e8c\u7ea7\u5ba1\u6838"},E={PENDING:"\u5f85\u5ba1\u6838",APPROVED:"\u901a\u8fc7",REJECTED:"\u62d2\u7edd"},d={PENDING_FIRST_REVIEW:"gold",PENDING_SECOND_REVIEW:"orange",APPROVED:"green",REJECTED:"red",NOT_STARTED:"default",NOT_IMPLEMENTED:"cyan",IMPLEMENTING:"blue",DELAYED:"purple",COMPLETED:"green",CANCELLED:"magenta"},p={SAFETY:"volcano",ELECTRICAL:"geekblue",MECHANICAL:"orange",KEXIN_AUTOMATION:"cyan",KEXIN_MONITORING:"red",OTHER:"purple"}},26510:(e,t,n)=>{n.d(t,{O:()=>r});var a=n(94505),o=n(86213);const s="/suggestions",r={getCreateData:async()=>{try{return await a.A.get("/suggestions/create")}catch(e){throw console.error("\u83b7\u53d6\u521b\u5efa\u5efa\u8bae\u6570\u636e\u5931\u8d25:",e),e}},submitSuggestion:async e=>{try{console.log("\u63d0\u4ea4\u5efa\u8bae\uff0c\u8868\u5355\u6570\u636e:",e);const t=await a.A.post("/suggestions",e,{headers:{"Content-Type":void 0}});return console.log("\u63d0\u4ea4\u5efa\u8bae\u54cd\u5e94:",t),t}catch(n){var t;throw console.error("\u63d0\u4ea4\u5efa\u8bae\u5931\u8d25:",n),console.error("\u9519\u8bef\u54cd\u5e94:",null===(t=n.response)||void 0===t?void 0:t.data),n}},getSuggestions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("suggestionService.getSuggestions - params:",e);const t=new URLSearchParams(e).toString();console.log("suggestionService.getSuggestions - queryString:",t);const n=await a.A.get(`/suggestions?${t}`);console.log("suggestionService.getSuggestions - \u539f\u59cb\u54cd\u5e94:",n);let o={data:[],pagination:{current:parseInt(e.page)||1,pageSize:parseInt(e.limit)||10,total:0}};if(n&&n.data&&Array.isArray(n.data.suggestions))console.log("\u683c\u5f0f1: response.data = { suggestions: [...], pagination: {...} }"),o.data=n.data.suggestions,n.data.pagination&&(o.pagination={current:parseInt(n.data.pagination.current)||o.pagination.current,pageSize:parseInt(n.data.pagination.pageSize)||o.pagination.pageSize,total:parseInt(n.data.pagination.total)||o.pagination.total});else if(n&&Array.isArray(n.data))console.log("\u683c\u5f0f2: response.data = [...]"),o.data=n.data,o.pagination.total=n.data.length;else if(n&&n.data&&n.data.data&&Array.isArray(n.data.data))console.log("\u683c\u5f0f3: response.data.data = [...]"),o.data=n.data.data,n.data.pagination?o.pagination={current:parseInt(n.data.pagination.current)||o.pagination.current,pageSize:parseInt(n.data.pagination.pageSize)||o.pagination.pageSize,total:parseInt(n.data.pagination.total)||o.pagination.total}:o.pagination.total=n.data.data.length;else if(console.warn("suggestionService.getSuggestions - \u672a\u77e5\u54cd\u5e94\u7ed3\u6784:",n),n&&"object"===typeof n){const e=Object.entries(n).find((e=>{let[t,n]=e;return Array.isArray(n)}));e&&(console.log(`\u627e\u5230\u53ef\u80fd\u7684\u6570\u636e\u6570\u7ec4: ${e[0]}`),o.data=e[1],o.pagination.total=e[1].length);const t=Object.entries(n).find((e=>{let[t,n]=e;return"object"===typeof n&&null!==n&&("pagination"===t||"page"===t||"paging"===t)}));if(t){console.log(`\u627e\u5230\u53ef\u80fd\u7684\u5206\u9875\u4fe1\u606f: ${t[0]}`);const e=t[1];o.pagination={current:parseInt(e.current||e.page||e.currentPage||1),pageSize:parseInt(e.pageSize||e.limit||e.size||10),total:parseInt(e.total||e.totalCount||e.totalItems||0)}}}return console.log("suggestionService.getSuggestions - \u5904\u7406\u540e\u7684\u7ed3\u679c:",o),o}catch(n){var t;throw console.error("\u83b7\u53d6\u5efa\u8bae\u5217\u8868\u5931\u8d25:",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),n}},getSuggestionById:async e=>{try{const t=await a.A.get(`/suggestions/${e}`);return t&&t.data?{data:l(t.data)}:t?{data:l(t)}:t}catch(t){throw console.error("\u83b7\u53d6\u5efa\u8bae\u8be6\u60c5\u5931\u8d25:",t),t}},updateSuggestionStatus:async(e,t,n)=>{try{return await a.A.put(`/suggestions/${e}/status`,{status:t,comment:n})}catch(o){throw console.error("\u66f4\u65b0\u5efa\u8bae\u72b6\u6001\u5931\u8d25:",o),o}},firstReview:async(e,t,n)=>{try{console.log("\u63d0\u4ea4\u4e00\u7ea7\u5ba1\u6838:",e,"\u5ba1\u6838\u7ed3\u679c:",t,"\u5ba1\u6838\u610f\u89c1:",n);const o=await a.A.put(`/suggestions/${e}/first-review`,{result:t,comments:n});return console.log("\u4e00\u7ea7\u5ba1\u6838\u54cd\u5e94:",o),o}catch(s){var o;throw console.error("\u4e00\u7ea7\u5ba1\u6838\u5931\u8d25:",s),console.error("\u9519\u8bef\u8be6\u60c5:",null===(o=s.response)||void 0===o?void 0:o.data),s}},secondReview:async(e,t,n)=>{try{console.log("\u63d0\u4ea4\u4e8c\u7ea7\u5ba1\u6838:",e,"\u5ba1\u6838\u7ed3\u679c:",t,"\u5ba1\u6838\u610f\u89c1:",n);const o=await a.A.put(`/suggestions/${e}/second-review`,{result:t,comments:n});return console.log("\u4e8c\u7ea7\u5ba1\u6838\u54cd\u5e94:",o),o}catch(s){var o;throw console.error("\u4e8c\u7ea7\u5ba1\u6838\u5931\u8d25:",s),console.error("\u9519\u8bef\u8be6\u60c5:",null===(o=s.response)||void 0===o?void 0:o.data),s}},updateSuggestion:async(e,t)=>{try{console.log("\u66f4\u65b0\u5efa\u8bae:",e,t);return await a.A.put(`/suggestions/${e}`,t)}catch(n){throw console.error("\u66f4\u65b0\u5efa\u8bae\u5931\u8d25:",n),n}},addComment:async(e,t)=>{try{return await a.A.post(`/suggestions/${e}/comments`,{content:t})}catch(n){throw console.error("\u6dfb\u52a0\u8bc4\u8bba\u5931\u8d25:",n),n}},getAllSuggestions:async()=>{try{return(await o.A.get(s)).data}catch(e){throw console.error("\u83b7\u53d6\u5efa\u8bae\u5217\u8868\u5931\u8d25:",e),e}},getSuggestion:async e=>{try{return(await o.A.get(`${s}/${e}`)).data}catch(t){throw console.error("\u83b7\u53d6\u5efa\u8bae\u8be6\u60c5\u5931\u8d25:",t),t}},createSuggestion:async e=>{try{return(await o.A.post(s,e)).data}catch(t){throw console.error("\u521b\u5efa\u5efa\u8bae\u5931\u8d25:",t),t}},deleteSuggestion:async e=>{try{console.log(`\u5c1d\u8bd5\u5220\u9664\u5efa\u8bae: ${e}`);const t=await a.A.delete(`/suggestions/${e}`);return console.log("\u5220\u9664\u5efa\u8bae\u54cd\u5e94:",t),t&&!0===t.success?{success:!0,message:t.message}:(console.warn("\u5220\u9664\u6210\u529f\u4f46\u54cd\u5e94\u683c\u5f0f\u4e0d\u7b26\u5408\u9884\u671f:",t),{success:!1,message:(null===t||void 0===t?void 0:t.message)||"\u5220\u9664\u5931\u8d25\uff0c\u54cd\u5e94\u683c\u5f0f\u9519\u8bef"})}catch(s){var t,n,o;return console.error(`\u5220\u9664\u5efa\u8bae ${e} \u5931\u8d25:`,s),console.error("\u9519\u8bef\u54cd\u5e94:",null===(t=s.response)||void 0===t?void 0:t.data),{success:!1,message:(null===(n=s.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||"\u5220\u9664\u5efa\u8bae\u65f6\u53d1\u751f\u7f51\u7edc\u6216\u670d\u52a1\u5668\u9519\u8bef"}}},submitForReview:async e=>{try{return(await o.A.post(`${s}/${e}/submit`)).data}catch(t){throw console.error("\u63d0\u4ea4\u5efa\u8bae\u5ba1\u6838\u5931\u8d25:",t),t}},reviewSuggestion:async(e,t)=>{try{return(await o.A.post(`${s}/${e}/review`,t)).data}catch(n){throw console.error("\u5ba1\u6838\u5efa\u8bae\u5931\u8d25:",n),n}},updateImplementation:async(e,t)=>{try{const n={"\u672a\u5f00\u59cb":"NOT_STARTED","\u8054\u7cfb\u4e2d":"CONTACTING","\u5b9e\u65bd\u4e2d":"IN_PROGRESS","\u5df2\u5b8c\u6210":"COMPLETED","\u53d6\u6d88":"CANCELLED"},o={...t,status:n[t.status]||t.status};delete o.evaluation,console.log("\u53d1\u9001\u5b9e\u65bd\u66f4\u65b0\u8bf7\u6c42 (suggestionService):",e,o);const r=await a.A.put(`${s}/${e}/implementation`,o);return console.log("\u5b9e\u65bd\u66f4\u65b0\u54cd\u5e94:",r),{success:!0,message:"\u5b9e\u65bd\u72b6\u6001\u66f4\u65b0\u6210\u529f",data:r.data||r}}catch(l){var n,o,r;return console.error("\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u5931\u8d25 (suggestionService):",l),console.error("\u9519\u8bef\u54cd\u5e94:",null===(n=l.response)||void 0===n?void 0:n.data),{success:!1,message:(null===(o=l.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u5931\u8d25",error:l}}},getImplementationStats:async()=>{try{return(await o.A.get(`${s}/stats/implementation`)).data}catch(e){throw console.error("\u83b7\u53d6\u5b9e\u65bd\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",e),e}},submitReview:async e=>{try{return await a.A.post("/suggestions/review",e)}catch(t){throw t}},scoreSuggestion:async(e,t)=>{try{return await a.A.post(`/suggestions/${e}/score`,{score:t})}catch(n){throw console.error(`\u5efa\u8bae ${e} \u6253\u5206\u5931\u8d25:`,n),n}}};function l(e){if(!e)return{};let t=e.implementation;var a;t?t={...t,status:t.status||"NOT_STARTED",responsiblePerson:t.responsiblePerson||(null===(a=t.implementer)||void 0===a?void 0:a.name)||("string"===typeof t.implementer?t.implementer:"\u672a\u5206\u914d"),startDate:t.startDate||null,plannedEndDate:t.plannedCompletionDate||t.plannedEndDate||null,actualEndDate:t.actualCompletionDate||t.actualEndDate||null,notes:t.notes||t.comments||"",history:t.history||[]}:t={status:"NOT_STARTED",responsiblePerson:"\u672a\u5206\u914d",startDate:null,plannedEndDate:null,actualEndDate:null,notes:"",history:[]};let o=e.reviewStatus||e.status,s=e.implementationStatus||(t?t.status:"NOT_STARTED");const{REVIEW_STATUS:r,IMPLEMENTATION_STATUS:l}=n(19119);return r[o]&&(o=r[o]),l[s]&&(s=l[s]),{...e,reviewStatus:o,implementationStatus:s,implementation:t,submitter:e.submitter||{name:"\u672a\u77e5",_id:null},comments:Array.isArray(e.comments)?e.comments.map((e=>({...e,user:e.user||{name:"\u672a\u77e5\u7528\u6237"},createdAt:e.createdAt||(new Date).toISOString()}))):[]}}},44394:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(58168),o=n(5544),s=n(64467),r=n(12499),l=n(46237),i=n(78528),c=n(89967),u=n(53727),g=n(51376),E=n(39470),d=n(13888),p=n(94786),A=n(98139),m=n.n(A),S=n(50541),T=n(65043),N=n(35296),I=n(87190),y=n(12701),h=n(23029),v=n(92901),C=n(56822),O=n(52176),f=n(53954),D=n(15361);const w=function(e){function t(){var e,n,a,o;return(0,h.A)(this,t),n=this,a=t,o=arguments,a=(0,f.A)(a),(e=(0,C.A)(n,(0,O.A)()?Reflect.construct(a,o||[],(0,f.A)(n).constructor):a.apply(n,o))).state={error:void 0,info:{componentStack:""}},e}return(0,D.A)(t,e),(0,v.A)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.description,a=e.children,o=this.state,s=o.error,r=o.info,l=r&&r.componentStack?r.componentStack:null,i="undefined"===typeof t?(s||"").toString():t,c="undefined"===typeof n?l:n;return s?T.createElement(M,{type:"error",message:i,description:T.createElement("pre",null,c)}):a}}]),t}(T.Component);var R=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n},L={success:r.A,info:d.A,error:i.A,warning:g.A},_={success:l.A,info:p.A,error:c.A,warning:E.A},P=function(e){var t=e.description,n=e.icon,a=e.prefixCls,o=e.type,r=(t?_:L)[o]||null;return n?(0,y.fx)(n,T.createElement("span",{className:"".concat(a,"-icon")},n),(function(){return{className:m()("".concat(a,"-icon"),(0,s.A)({},n.props.className,n.props.className))}})):T.createElement(r,{className:"".concat(a,"-icon")})},b=function(e){var t=e.isClosable,n=e.closeText,a=e.prefixCls,o=e.closeIcon,s=e.handleClose;return t?T.createElement("button",{type:"button",onClick:s,className:"".concat(a,"-close-icon"),tabIndex:0},n?T.createElement("span",{className:"".concat(a,"-close-text")},n):o):null},x=function(e){var t=e.description,n=e.prefixCls,r=e.message,l=e.banner,i=e.className,c=void 0===i?"":i,g=e.style,E=e.onMouseEnter,d=e.onMouseLeave,p=e.onClick,A=e.afterClose,y=e.showIcon,h=e.closable,v=e.closeText,C=e.closeIcon,O=void 0===C?T.createElement(u.A,null):C,f=e.action,D=R(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),w=T.useState(!1),L=(0,o.A)(w,2),_=L[0],x=L[1],M=T.useRef(),j=T.useContext(N.QO),G=j.getPrefixCls,V=j.direction,$=G("alert",n),U=function(e){var t;x(!0),null===(t=D.onClose)||void 0===t||t.call(D,e)},W=!!v||h,F=function(){var e=D.type;return void 0!==e?e:l?"warning":"info"}(),k=!(!l||void 0!==y)||y,z=m()($,"".concat($,"-").concat(F),(0,s.A)((0,s.A)((0,s.A)((0,s.A)({},"".concat($,"-with-description"),!!t),"".concat($,"-no-icon"),!k),"".concat($,"-banner"),!!l),"".concat($,"-rtl"),"rtl"===V),c),Y=(0,I.A)(D);return T.createElement(S.Ay,{visible:!_,motionName:"".concat($,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:A},(function(e){var n=e.className,o=e.style;return T.createElement("div",(0,a.A)({ref:M,"data-show":!_,className:m()(z,n),style:(0,a.A)((0,a.A)({},g),o),onMouseEnter:E,onMouseLeave:d,onClick:p,role:"alert"},Y),k?T.createElement(P,{description:t,icon:D.icon,prefixCls:$,type:F}):null,T.createElement("div",{className:"".concat($,"-content")},r?T.createElement("div",{className:"".concat($,"-message")},r):null,t?T.createElement("div",{className:"".concat($,"-description")},t):null),f?T.createElement("div",{className:"".concat($,"-action")},f):null,T.createElement(b,{isClosable:!!W,closeText:v,prefixCls:$,closeIcon:O,handleClose:U}))}))};x.ErrorBoundary=w;const M=x},82570:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var a=n(65043),o=n(33307),s=n(94406),r=n(50289),l=n(48193),i=n(26655),c=n(44394),u=n(65256),g=n(89421),E=n(64435),d=n(89379);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var A=n(22172),m=function(e,t){return a.createElement(A.A,(0,d.A)((0,d.A)({},e),{},{ref:t,icon:p}))};const S=a.forwardRef(m);var T=n(73216),N=n(26510),I=n(78816),y=n(70579);const{TextArea:h}=o.A,{Option:v}=s.A,C=()=>{const[e]=r.A.useForm(),[t,n]=(0,a.useState)(!1),[d,p]=(0,a.useState)([]),[A,m]=(0,a.useState)([]),[C,O]=(0,a.useState)(!0),[f,D]=(0,a.useState)(null),[w,R]=(0,a.useState)(!1),[L,_]=(0,a.useState)(window.innerWidth<=768),P=(0,T.Zp)();(0,a.useEffect)((()=>{const e=()=>{_(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=await I.y.getCurrentUser();D(e),!e||"\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458"!==e.role&&"\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458"!==e.role||(console.log("\u5f53\u524d\u7528\u6237\u6ca1\u6709\u63d0\u4ea4\u5efa\u8bae\u6743\u9650:",e.role),R(!0),l.Ay.error("\u8fd0\u884c\u79d1\u548c\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458\u6682\u65f6\u65e0\u6cd5\u63d0\u4ea4\u5efa\u8bae"),setTimeout((()=>{P("/suggestions/list")}),1500))}catch(e){console.error("\u68c0\u67e5\u7528\u6237\u6743\u9650\u5931\u8d25:",e)}})()}),[P]),(0,a.useEffect)((()=>{(async()=>{try{O(!0);const e=await N.O.getCreateData();console.log("\u83b7\u53d6\u521b\u5efa\u5efa\u8bae\u6570\u636e:",e),e&&e.types?m(e.types):m([{label:"\u5b89\u5168\u7ba1\u7406",value:"SAFETY"},{label:"\u751f\u4ea7\u4f18\u5316",value:"PRODUCTION"},{label:"\u667a\u80fd\u5316\u5347\u7ea7",value:"AUTOMATION"},{label:"\u5176\u5b83",value:"OTHER"}])}catch(e){console.error("\u83b7\u53d6\u521d\u59cb\u6570\u636e\u5931\u8d25:",e),l.Ay.error("\u52a0\u8f7d\u8868\u5355\u6570\u636e\u5931\u8d25\uff0c\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e"),m([{label:"\u5b89\u5168\u7ba1\u7406",value:"SAFETY"},{label:"\u751f\u4ea7\u4f18\u5316",value:"PRODUCTION"},{label:"\u667a\u80fd\u5316\u5347\u7ea7",value:"AUTOMATION"},{label:"\u5176\u5b83",value:"OTHER"}])}finally{O(!1)}})()}),[]);return(0,y.jsx)("div",{className:"responsive-container",children:(0,y.jsxs)(i.A,{title:"\u63d0\u4ea4\u5408\u7406\u5316\u5efa\u8bae",loading:C,bodyStyle:{padding:L?"12px":"24px"},children:[w&&(0,y.jsx)(c.A,{message:"\u6743\u9650\u53d7\u9650",description:"\u8fd0\u884c\u79d1\u548c\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458\u6682\u65f6\u65e0\u6cd5\u63d0\u4ea4\u5efa\u8bae\u3002",type:"error",showIcon:!0,style:{marginBottom:16}}),(0,y.jsxs)(r.A,{form:e,layout:"vertical",onFinish:async e=>{if(w)l.Ay.error("\u60a8\u6ca1\u6709\u63d0\u4ea4\u5efa\u8bae\u7684\u6743\u9650");else try{n(!0),console.log("\u63d0\u4ea4\u7684\u8868\u5355\u503c:",e);const t=new FormData;d.forEach(((e,n)=>{e.originFileObj&&(console.log(`\u6dfb\u52a0\u6587\u4ef6 ${n}:`,e.name),t.append("files",e.originFileObj))})),Object.keys(e).forEach((n=>{console.log(`\u6dfb\u52a0\u5b57\u6bb5 ${n}:`,e[n]),t.append(n,e[n])}));for(let e of t.entries())console.log(e[0]+": "+(e[1]instanceof File?e[1].name:e[1]));const a=await N.O.submitSuggestion(t);console.log("\u63d0\u4ea4\u6210\u529f\uff0c\u54cd\u5e94:",a),l.Ay.success("\u5efa\u8bae\u63d0\u4ea4\u6210\u529f\uff01"),P("/suggestions/list")}catch(o){var t,a;console.error("\u63d0\u4ea4\u5efa\u8bae\u5931\u8d25:",o),l.Ay.error(`\u63d0\u4ea4\u5931\u8d25: ${(null===(t=o.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||o.message||"\u8bf7\u91cd\u8bd5"}`)}finally{n(!1)}},disabled:C||w,style:{width:"100%"},children:[(0,y.jsx)(r.A.Item,{name:"title",label:"\u5efa\u8bae\u6807\u9898",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5efa\u8bae\u6807\u9898"}],children:(0,y.jsx)(o.A,{placeholder:"\u8bf7\u8f93\u5165\u5efa\u8bae\u6807\u9898",maxLength:100})}),(0,y.jsx)(r.A.Item,{name:"type",label:"\u5efa\u8bae\u7c7b\u578b",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5efa\u8bae\u7c7b\u578b"}],children:(0,y.jsx)(s.A,{placeholder:"\u8bf7\u9009\u62e9\u5efa\u8bae\u7c7b\u578b",children:A.map((e=>(0,y.jsx)(v,{value:e.value,children:e.label},e.value)))})}),(0,y.jsx)(r.A.Item,{name:"content",label:"\u5efa\u8bae\u5185\u5bb9",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5efa\u8bae\u5185\u5bb9"}],children:(0,y.jsx)(h,{placeholder:"\u8bf7\u8be6\u7ec6\u63cf\u8ff0\u60a8\u7684\u5efa\u8bae...",rows:L?4:6,maxLength:2e3,showCount:!0})}),(0,y.jsx)(r.A.Item,{name:"expectedBenefit",label:"\u9884\u671f\u6548\u76ca",rules:[{required:!0,message:"\u8bf7\u63cf\u8ff0\u9884\u671f\u6548\u76ca"}],children:(0,y.jsx)(h,{placeholder:"\u8bf7\u63cf\u8ff0\u5b9e\u65bd\u8be5\u5efa\u8bae\u53ef\u80fd\u5e26\u6765\u7684\u6548\u76ca...",rows:L?3:4,maxLength:1e3,showCount:!0})}),(0,y.jsx)(r.A.Item,{label:"\u9644\u4ef6",extra:"\u652f\u6301 jpg\u3001png\u3001pdf \u683c\u5f0f\u6587\u4ef6\uff0c\u5355\u4e2a\u6587\u4ef6\u4e0d\u8d85\u8fc710MB",children:(0,y.jsx)(u.A,{fileList:d,onChange:e=>{let{fileList:t}=e;p(t)},beforeUpload:()=>!1,maxCount:5,children:(0,y.jsx)(g.A,{icon:(0,y.jsx)(S,{}),disabled:w,children:"\u9009\u62e9\u6587\u4ef6"})})}),(0,y.jsx)(r.A.Item,{children:(0,y.jsxs)(E.A,{style:{display:L?"flex":"inline-flex",flexDirection:L?"column":"row",width:L?"100%":"auto"},children:[(0,y.jsx)(g.A,{type:"primary",htmlType:"submit",loading:t,disabled:w,style:{width:L?"100%":"auto"},children:"\u63d0\u4ea4\u5efa\u8bae"}),(0,y.jsx)(g.A,{onClick:()=>P("/suggestions/list"),style:{width:L?"100%":"auto"},children:"\u53d6\u6d88"})]})})]})]})})}}}]);
//# sourceMappingURL=570.7b61e415.chunk.js.map