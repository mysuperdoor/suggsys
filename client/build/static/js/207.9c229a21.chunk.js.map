{"version":3,"file":"static/js/207.9c229a21.chunk.js","mappings":"4oBAUO,MAAMA,EAAgBA,KAEQ,CAEjC,MAAMC,EAAUC,4BAA8BC,QAAQ,SAAU,IAEhE,OADAC,QAAQC,IAAI,gEAAoBJ,GACzBA,CACT,CAwBA,EAoBWK,EAAkBC,IAE7B,GAAIA,GAAWA,EAAQC,WAAW,QAChC,OAAOD,EAIT,MAAME,EAAoBF,IAAYA,EAAQC,WAAW,KAAO,IAAID,IAAYA,EAG1EN,EAAUD,IAChB,OAAOS,EAAoB,GAAGR,IAAUQ,IAAsB,EAAE,E,eCnElE,MAgGA,EAhGoBC,IAAkB,IAAjB,QAAEH,GAASG,EAC9B,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAChCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAiEnC,OA/DAK,EAAAA,EAAAA,YAAU,KACR,GAAIX,EAAS,CACXQ,GAAW,GACXE,EAAS,MAGT,MAAME,EAAUb,EAAeC,GAG/BH,QAAQC,IAAI,sCAAmBE,GAC/BH,QAAQC,IAAI,sCAAmBc,GAG/B,MAAMC,EAAQC,aAAaC,QAAQ,SAEnCC,MAAMJ,EAAS,CACbK,QAASJ,EAAQ,CACf,cAAiB,UAAUA,KACzB,CAAC,IAEJK,MAAKC,IACJ,IAAKA,EAASC,GAEZ,MADAvB,QAAQY,MAAM,iEAAqBU,EAASE,OAAQF,EAASG,YACvD,IAAIC,MAAM,mCAAUJ,EAASE,UAQrC,OALAxB,QAAQC,IAAI,yCAAiB,CAC3B0B,YAAaL,EAASF,QAAQQ,IAAI,gBAClCC,cAAeP,EAASF,QAAQQ,IAAI,kBACpCE,mBAAoBR,EAASF,QAAQQ,IAAI,yBAEpCN,EAASS,aAAa,IAE9BV,MAAKU,IACJ,IAAKA,GAA0C,IAA3BA,EAAYC,WAC9B,MAAM,IAAIN,MAAM,oDAKlB,OAHA1B,QAAQC,IAAI,yFAAyB8B,EAAYC,WAAY,gBAE7DhC,QAAQC,IAAI,+DACLgC,EAAAA,cAAsB,CAAEF,gBAC5BV,MAAKa,IACJlC,QAAQC,IAAI,+CACRiC,EAAOC,UAAYD,EAAOC,SAASC,OAAS,GAC9CpC,QAAQC,IAAI,+CAAkBiC,EAAOC,UAEvC3B,EAAW0B,EAAOG,OAClB1B,GAAW,EAAM,IAElB2B,OAAM1B,IACLZ,QAAQY,MAAM,4CAAeA,GAC7BC,EAAS,yCAAaD,EAAM2B,SAC5B5B,GAAW,EAAM,GACjB,IAEL2B,OAAM1B,IACLZ,QAAQY,MAAM,4CAAeA,GAC7BC,EAAS,yCAAWD,EAAM2B,WAC1B5B,GAAW,EAAM,GAEvB,IACC,CAACR,IAEAO,GACK8B,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,KAAK,QAAQC,IAAI,gDAG5B/B,GAEA4B,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEC,UAAW,SAAUC,MAAO,MAAOC,QAAS,QAASC,SAChEpC,KAML4B,EAAAA,EAAAA,KAAA,OACES,UAAU,yBACVC,wBAAyB,CAAEC,OAAQ5C,GACnCqC,MAAO,CACLG,QAAS,OACTK,gBAAiB,QACjBC,OAAQ,oBACRC,UAAW,sBACXC,UAAW,OACXV,UAAW,SAEb,GC7FA,KAAEW,GAASC,EAAAA,EA6GjB,EAvGoBnD,IAAkB,IAAjB,QAAEH,GAASG,EAC9B,MAAOI,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCF,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,MAsDnC,OApDAK,EAAAA,EAAAA,YAAU,KA+CJX,GA9CqBuD,WACvB,IAEE,MAAM3C,EAAUb,EAAeC,GAE/BH,QAAQC,IAAI,iCAAwBE,GACpCH,QAAQC,IAAI,iCAAwBc,GACpCJ,GAAW,GAGX,MAAMK,EAAQC,aAAaC,QAAQ,SAG7ByC,EAAiB,CACrBvC,QAASJ,EAAQ,CACf,cAAiB,UAAUA,KACzB,CAAC,GAIPhB,QAAQC,IAAI,wEAA4B0D,GACxC,MAAMrC,QAAiBH,MAAMJ,EAAS4C,GAEtC,IAAKrC,EAASC,GAEZ,MADAvB,QAAQY,MAAM,gDAAwBU,EAASE,OAAQF,EAASG,YAC1D,IAAIC,MAAM,yFAAmBJ,EAASE,UAI9CxB,QAAQC,IAAI,oCAAsB,CAChC0B,YAAaL,EAASF,QAAQQ,IAAI,gBAClCC,cAAeP,EAASF,QAAQQ,IAAI,kBACpCE,mBAAoBR,EAASF,QAAQQ,IAAI,yBAG3C,MAAMgC,QAAatC,EAASsC,OAC5B5D,QAAQC,IAAI,qFAAkC,OAAJ2D,QAAI,IAAJA,OAAI,EAAJA,EAAMxB,SAAU,GAC1D5B,EAAWoD,EACb,CAAE,MAAOC,GACP7D,QAAQY,MAAM,kEAA2BiD,GACzChD,EAASgD,EAAItB,SAAW,qEAC1B,CAAC,QACC5B,GAAW,EACb,GAIAmD,EACF,GACC,CAAC3D,IAEAO,GAEA8B,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEmB,MAAO,OAAQC,OAAQ,QAASC,QAAS,OAAQC,eAAgB,SAAUC,WAAY,UAAWnB,UAC9GR,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACE,IAAI,0DAKZ/B,GAEA4B,EAAAA,EAAAA,KAAC4B,EAAAA,EAAK,CACJ7B,QAAQ,uCACR8B,YAAazD,EACb0D,KAAK,QACLC,UAAQ,KAMZ/B,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACH5B,MAAO,CACLmB,MAAO,OACPC,OAAQ,sBACRV,UAAW,OACXC,UAAW,OACXV,UAAW,QAEb4B,UAAW,CAAE1B,QAAS,OAAQF,UAAW,QAASG,UAElDR,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CACV8B,WAAY,WACZC,UAAW,aACXC,WAAY,YACZC,SAAU,OACVC,OAAQ,EACR/B,QAAS,EACTF,UAAW,OACXoB,QAAS,SACTjB,SACCzC,KAEE,EC9FXwE,EAAAA,EAAMC,oBAAoBC,UAAY,IAAIC,IACxC,cAEAC,WAEF,MA+OA,EA/OoB7E,IAAqC,IAApC,QAAE8E,EAAO,QAAEC,EAAO,SAAEC,GAAUhF,EAC/C,MAAOI,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChC8E,EAAUC,IAAe/E,EAAAA,EAAAA,UAAS,OAClCN,EAASsF,IAAchF,EAAAA,EAAAA,UAAS,OAChCiF,EAAUC,IAAelF,EAAAA,EAAAA,UAAS,OAClCmF,EAAOC,IAAYpF,EAAAA,EAAAA,UAAS,GAI7BqF,EAASA,IAAMD,GAASE,GAAaC,KAAKC,IAAIF,EAAY,GAAK,KAC/DG,EAAUA,IAAML,GAASE,GAAaC,KAAKG,IAAIJ,EAAY,GAAK,MAChEK,EAAYA,IAAMP,EAAS,IASjC/E,EAAAA,EAAAA,YAAU,KAEN,GAAIsE,GAAWE,EAAU,CACrB3E,GAAW,GACX6E,EAAY,MACZC,EAAW,MACXE,EAAY,MAGZ,MAAMU,EAAanG,EAAe,qBAAqBoG,mBAAmBhB,MAE1EtF,QAAQC,IAAI,0CAAuBqF,GACnCtF,QAAQC,IAAI,6CAA0BoG,GAGtC,MAAMrF,EAAQC,aAAaC,QAAQ,SAEnCC,MAAMkF,EAAY,CACdjF,QAASJ,EAAQ,CACb,cAAiB,UAAUA,KAC3B,CAAC,IAEJK,MAAKC,IACF,IAAKA,EAASC,GACV,MAAM,IAAIG,MAAM,mCAAUJ,EAASE,UAAUF,EAASG,cAE1D,MAAME,EAAcL,EAASF,QAAQQ,IAAI,gBAKzC,OAJA4D,EAAY7D,GACZ3B,QAAQC,IAAI,0CAAuB0B,GAG/BA,GAAeA,EAAY4E,SAAS,oBAE7BjF,EAASkF,QAIpBf,EAAWY,GACJ,KAAI,IAEdhF,MAAKoF,IACEA,GAAQA,EAAKlE,UAEbA,EAAAA,GAAQmE,KAAKD,EAAKlE,SAClBkD,EAAW,MACf,IAEHnD,OAAM1B,IACHZ,QAAQY,MAAM,wCAAWA,GACzB2B,EAAAA,GAAQ3B,MAAM,qDAAaA,EAAM2B,WACjCkD,EAAW,KAAK,IAEnBkB,SAAQ,KACLhG,GAAW,EAAM,GAE7B,MAAYyE,IAERzE,GAAW,GACX6E,EAAY,MACZC,EAAW,MACXE,EAAY,MAChB,GACD,CAACP,EAASE,IA4Ib,OACI9C,EAAAA,EAAAA,KAACoE,EAAAA,EAAK,CACFC,MAAOvB,EAAW,6BAASA,IAAa,2BACxCwB,KAAM1B,EACN2B,SAAU1B,EACVtB,MAAO,OACPnB,MAAO,CAAEoE,IAAK,IACdC,OAAQ,KACRC,gBAAc,EAAClE,UAEfR,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEC,UAAW,SAAUsE,UAAW,QAASpE,QAAS,QAASC,SApJ3DoE,MAClB,GAAI1G,EACA,OAAO8B,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,KAAK,QAAQC,IAAI,0BAGlC,IAAKxC,GAAwB,oBAAboF,EAIZ,OAAO/C,EAAAA,EAAAA,KAAA,OAAAQ,SAAK,oEAGhB,IAAKuC,IAAapF,EAGd,OAAOqC,EAAAA,EAAAA,KAAA,OAAAQ,SAAK,+FAGhB,GAAIuC,EAASnF,WAAW,UACpB,OAAOoC,EAAAA,EAAAA,KAAA,OAAK6E,IAAKlH,EAASmH,IAAKhC,GAAY,UAAW1C,MAAO,CAAE2E,SAAU,OAAQjE,UAAW,WAIhG,GAAiB,4EAAbiC,GACa,uBAAbA,EACA,OAAO/C,EAAAA,EAAAA,KAACgF,EAAW,CAACrH,QAASA,IAGjC,GAAiB,oBAAboF,EAAgC,CAChC,MAAMkC,EAAezB,KAAKC,IA3GhB,IA2GmD,GAApByB,OAAOC,YAG1C3G,EAAQC,aAAaC,QAAQ,SAEnC,OACI0G,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EACIR,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CACRkF,SAAU,SACVd,IAAK,EACL5D,gBAAiB,QACjBL,QAAS,OACTgF,OAAQ,EACRC,aAAc,oBACdC,aAAc,OACdlE,MAAO,OACPE,QAAS,OACTC,eAAgB,UAClBlB,UACE4E,EAAAA,EAAAA,MAACM,EAAAA,EAAK,CAAAlF,SAAA,EACFR,EAAAA,EAAAA,KAAC2F,EAAAA,EAAO,CAACtB,MAAM,eAAI7D,UACfR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACHC,MAAM7F,EAAAA,EAAAA,KAAC8F,EAAAA,EAAe,IACtBC,QAASrC,EACTsC,SAAU5C,GAAS,QAG3BpD,EAAAA,EAAAA,KAAC2F,EAAAA,EAAO,CAACtB,MAAM,2BAAM7D,UACjB4E,EAAAA,EAAAA,MAACQ,EAAAA,EAAM,CACHC,MAAM7F,EAAAA,EAAAA,KAACiG,EAAAA,EAAY,IACnBF,QAASnC,EACToC,SAAoB,IAAV5C,EAAY5C,SAAA,CAErBgD,KAAK0C,MAAc,IAAR9C,GAAa,UAGjCpD,EAAAA,EAAAA,KAAC2F,EAAAA,EAAO,CAACtB,MAAM,eAAI7D,UACfR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACHC,MAAM7F,EAAAA,EAAAA,KAACmG,EAAAA,EAAc,IACrBJ,QAASzC,EACT0C,SAAU5C,GAAS,YAKnCpD,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CACRmB,MAAO,OACPC,OAAQ,sBACRV,UAAU,OACVC,UAAW,OACXU,QAAS,OACT2E,cAAe,SACfzE,WAAY,UACdnB,UACER,EAAAA,EAAAA,KAACqG,EAAAA,EAAQ,CACLC,KAAM,CACFC,IAAK5I,EACL6I,YAAahI,EAAQ,CAAE,cAAiB,UAAUA,UAAYiI,EAC9DC,kBAAmBlI,GAEvBmI,cAAeC,IAAmB,IAAlB,SAAE1D,GAAU0D,EACxBpJ,QAAQC,IAAI,iDAAeyF,GAC3BC,EAAYD,EAAS,EAEzB2D,YAAczI,IACVZ,QAAQY,MAAM,+BAAYA,GApKzBA,KACzBZ,QAAQY,MAAM,iCAAkCA,GAChD2B,EAAAA,GAAQ3B,MAAM,gCAAYA,EAAM2B,UAAU,EAmKlB+G,CAAoB1I,EAAM,EAE9BF,SAAS8B,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACC,KAAK,QAAQC,IAAI,mCAChC4G,QAAS,CACLC,QAAS,0DACTC,YAAY,EACZC,oBAAqB,oEACvB1G,SAED0C,GAAYiE,MAAMC,KAAK,IAAID,MAAMjE,IAAW,CAACmE,EAAIC,KAC9CtH,EAAAA,EAAAA,KAACuH,EAAAA,EAAI,CAEDC,WAAYF,EAAQ,EACpB/F,MAAO0D,EAAe7B,EACtBqE,iBAAiB,EACjBC,uBAAuB,EACvBtH,MAAO,CACHqF,aAAc,OACdkC,UAAW,6BAEfvJ,MAAQA,IACJZ,QAAQY,MAAM,gCAAaA,IAEvBgH,EAAAA,EAAAA,MAAA,OAAA5E,SAAA,CAAK,yCAASpC,EAAM2B,aAZvB,QAAQuH,EAAQ,aAqBjD,CAEA,OAAIvE,EAASnF,WAAW,UAEboC,EAAAA,EAAAA,KAAC4H,EAAW,CAACjK,QAASA,KAI1BqC,EAAAA,EAAAA,KAAA,OAAAQ,SAAK,wFAAoB,EAcvBoE,MAED,E,0DCrPhB,MAqGA,GArGwB9G,IAA+B,IAAD+J,EAAA,IAA7B,WAAEC,EAAU,SAAEC,GAAUjK,EAC/C,MAAMkK,EAAS,CACbC,UAAW,CACT1H,QAAS,YACT2H,WAAY,8CACZC,aAAc,MACd1C,aAAc,OACd5E,OAAQ,oBACR8G,UAAW,iCAEbS,SAAU,CACR7H,QAAS,UACT4H,aAAc,OACd7F,OAAQ,EACR+F,WAAY,MAahB,OACErI,EAAAA,EAAAA,KAAA,OAAKI,MAAO4H,EAAOC,UAAUzH,UAC3B4E,EAAAA,EAAAA,MAACkD,EAAAA,EAAY,CACXC,OAAQR,EAAW,EAAI,EACvB7H,KAAM6H,EAAW,QAAU,UAC3BS,OAAO,EACPC,WAAY,CACVlH,MAAOwG,EAAW,OAAS,OAC3BzH,MAAO,OACP+H,WAAY,OAEdK,aAAc,CACZpI,MAAO,QACPE,SAAA,EAEFR,EAAAA,EAAAA,KAACsI,EAAAA,EAAaK,KAAI,CAChBC,OACExD,EAAAA,EAAAA,MAAA,QAAMhF,MAAO,CAAEqB,QAAS,OAAQE,WAAY,UAAWnB,SAAA,EACrDR,EAAAA,EAAAA,KAAC6I,EAAAA,EAAW,CAACzI,MAAO,CAAEE,MAAO,UAAWwI,YAAa,SAAW,kBAGnEtI,UAEDR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CACFzI,MAAO0I,EAAAA,YAAYlB,EAAWhG,OAAS,UACvC1B,MAAO4H,EAAOI,SAAS5H,SAEtByI,EAAAA,iBAAiBnB,EAAWhG,OAASgG,EAAWhG,UAIrD9B,EAAAA,EAAAA,KAACsI,EAAAA,EAAaK,KAAI,CAChBC,OACExD,EAAAA,EAAAA,MAAA,QAAMhF,MAAO,CAAEqB,QAAS,OAAQE,WAAY,UAAWnB,SAAA,EACrDR,EAAAA,EAAAA,KAACkJ,EAAAA,EAAmB,CAAC9I,MAAO,CAAEE,MAAO,UAAWwI,YAAa,SAAW,kBAG3EtI,UAEDR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CAACzI,MAAM,SAASF,MAAO4H,EAAOI,SAAS5H,SAhD/B2I,KAClB,IAAKA,EAAY,MAAO,eAExB,MAAMC,EAAO,IAAIC,KAAKF,GACtB,OAAOpB,EACH,GAAGqB,EAAKE,wBAAwBF,EAAKG,mBAAmB,GAAI,CAACC,KAAM,UAAWC,OAAO,cACrFL,EAAKM,gBAAgB,EA2ChBC,CAAW7B,EAAW8B,gBAI3B5J,EAAAA,EAAAA,KAACsI,EAAAA,EAAaK,KAAI,CAChBC,OACExD,EAAAA,EAAAA,MAAA,QAAMhF,MAAO,CAAEqB,QAAS,OAAQE,WAAY,UAAWnB,SAAA,EACrDR,EAAAA,EAAAA,KAAC6J,EAAAA,EAAY,CAACzJ,MAAO,CAAEE,MAAO,UAAWwI,YAAa,SAAW,wBAGpEtI,UAEDR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CAACzI,MAAM,OAAOF,MAAO4H,EAAOI,SAAS5H,UAClB,QAApBqH,EAAAC,EAAWgC,iBAAS,IAAAjC,OAAA,EAApBA,EAAsBkC,OAAQ,oBAInC/J,EAAAA,EAAAA,KAACsI,EAAAA,EAAaK,KAAI,CAChBC,OACExD,EAAAA,EAAAA,MAAA,QAAMhF,MAAO,CAAEqB,QAAS,OAAQE,WAAY,UAAWnB,SAAA,EACrDR,EAAAA,EAAAA,KAACgK,GAAAA,EAAY,CAAC5J,MAAO,CAAEE,MAAO,UAAWwI,YAAa,SAAW,kBAGpEtI,UAEDR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CAACzI,MAAM,QAAQF,MAAO4H,EAAOI,SAAS5H,SACvCsH,EAAWmC,MAAQ,6BAItB,E,gBCxGV,MA4CA,GA5CuBnM,IAAmC,IAAlC,MAAEuG,EAAK,QAAEtG,EAAO,SAAEgK,GAAUjK,EAClD,MAAMkK,EAAS,CACbkC,aAAc,CACZ5H,OAAQyF,EAAW,SAAW,SAC9BzH,MAAO,UACP+B,SAAU0F,EAAW,OAAS,QAEhCoC,kBAAmB,CACjBjI,WAAY,WACZ3B,QAAS,OACT4H,aAAc,OACdD,WAAY,UACZrH,OAAQ,oBACR8G,UAAW,gCACXlC,aAAc,OACdpD,SAAU,OACV+H,WAAY,MACZ9E,SAAU,WACV+E,SAAU,UAEZC,aAAc,CACZhF,SAAU,WACViF,KAAM,EACN/F,IAAK,EACLjD,MAAO,MACPC,OAAQ,OACR0G,WAAsB,6BAAV7D,EAAmB,UAAY,UAC3C8D,aAAc,gBAIlB,OACE/C,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EACER,EAAAA,EAAAA,KAACwK,GAAAA,EAAO,CAACC,YAAY,OAAOrK,MAAO4H,EAAOkC,aAAa1J,UACrDR,EAAAA,EAAAA,KAAA,UAAAQ,SAAS6D,OAEXe,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOmC,kBAAkB3J,SAAA,EACnCR,EAAAA,EAAAA,KAAA,OAAKI,MAAO4H,EAAOsC,gBACnBtK,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEsK,WAAY,QAASlK,SAAEzC,SAEtC,E,oGCvCP,MAAQiD,KAAK,IAAIC,EAAAA,EAkIjB,GAhI0BnD,IAAgG,IAA/F,YAAE6M,EAAW,yBAAEC,EAAwB,kBAAEC,EAAiB,SAAE9C,EAAQ,kBAAE+C,GAAmBhN,EAClH,MAAMkK,EAAS,CACbkC,aAAc,CACZ5H,OAAQyF,EAAW,SAAW,SAC9BzH,MAAO,UACP+B,SAAU0F,EAAW,OAAS,QAEhCgD,UAAW,CACT5C,aAAc,OACd1C,aAAc,OACdkC,UAAW,iCAEbqD,cAAe,CACbzK,QAASwH,EAAW,QAAU,SAC9BkD,WAAY,gBACZ,SAAU,CACR/C,WAAY,YAGhBgD,YAAaA,CAACpJ,EAAMqJ,KAAY,CAC9BhD,aAAc,OACdR,UAAW,+BACX9G,OAAQ,EACRoK,WAAY,WACZ1K,QAAS4K,EAAe,QAAU,SAClC3J,OAAQ,OACR4J,SAAUD,EAAe,YAAS1E,EAClChF,QAAS,cACTE,WAAY,SACZD,eAAgB,YAId2J,EAAevI,IACnB,IAAKA,EAAU,OAAO9C,EAAAA,EAAAA,KAACsL,EAAAA,EAAgB,IAEvC,MAAMC,EAAMzI,EAAS0I,MAAM,KAAKC,MAAMC,cAEtC,MAAI,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,QAAQ3H,SAASwH,IACjDvL,EAAAA,EAAAA,KAAC2L,GAAAA,EAAiB,CAACvL,MAAO,CAAEE,MAAO,aACjC,CAAC,OAAOyD,SAASwH,IACnBvL,EAAAA,EAAAA,KAAC4L,GAAAA,EAAe,CAACxL,MAAO,CAAEE,MAAO,aAC/B,CAAC,MAAO,QAAQyD,SAASwH,IAC3BvL,EAAAA,EAAAA,KAAC6L,GAAAA,EAAgB,CAACzL,MAAO,CAAEE,MAAO,aAChC,CAAC,MAAO,OAAQ,OAAOyD,SAASwH,IAClCvL,EAAAA,EAAAA,KAAC8L,GAAAA,EAAiB,CAAC1L,MAAO,CAAEE,MAAO,cAEnCN,EAAAA,EAAAA,KAACsL,EAAAA,EAAgB,CAAClL,MAAO,CAAEE,MAAO,YAC3C,EAGIqJ,EAAcR,IAClB,IAAKA,EAAY,MAAO,2BAExB,MAAMC,EAAO,IAAIC,KAAKF,GACtB,OAAOpB,EACHqB,EAAKE,qBACLF,EAAKM,gBAAgB,EAG3B,OACEtE,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EACE4E,EAAAA,EAAAA,MAACoF,GAAAA,EAAO,CAACC,YAAY,OAAOrK,MAAO4H,EAAOkC,aAAa1J,SAAA,EACrDR,EAAAA,EAAAA,KAAC+L,GAAAA,EAAgB,IAAG,KAAC/L,EAAAA,EAAAA,KAAA,UAAAQ,SAAQ,qBAE/BR,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHF,KAAK,QACL1B,MAAO4H,EAAO+C,UACd9I,UAAW,CAAE1B,QAASwH,EAAW,OAAS,QAASvH,UAEnDR,EAAAA,EAAAA,KAACgM,GAAAA,GAAI,CACHC,WAAYlE,EAAW,WAAa,aACpCmE,WAAYvB,EACZwB,WAAYC,IACVpM,EAAAA,EAAAA,KAACgM,GAAAA,GAAKrD,KAAI,CACRvI,MAAO4H,EAAOgD,cACdqB,QAAS,EACPrM,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACLwK,OAAK,EACLpM,KAAK,QACL2F,MAAM7F,EAAAA,EAAAA,KAAC+L,GAAAA,EAAgB,IACvBhG,QAASA,IAAM6E,EAAyBwB,GACxChM,MAAO4H,EAAOkD,YAAY,WAAYnD,GAAUvH,SAE/CuH,EAAW,KAAO,kBAErB/H,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACL5B,KAAK,QACL2F,MAAM7F,EAAAA,EAAAA,KAACuM,GAAAA,EAAW,IAClBxG,QAASA,IAAM8E,EAAkBuB,GACjChM,MAAO,IAAI4H,EAAOkD,YAAY,UAAWnD,GAAW2C,WAAY,OAAOlK,SAEtEuH,EAAW,KAAO,kBAErBvH,UAEFR,EAAAA,EAAAA,KAACgM,GAAAA,GAAKrD,KAAK6D,KAAI,CACbC,QACEzM,EAAAA,EAAAA,KAAC0M,GAAAA,EAAM,CACLC,MAAM,SACN9G,KAAMwF,EAAYe,EAAWQ,cAC7B1M,KAAM6H,EAAW,UAAY,QAC7B3H,MAAO,CAAEQ,gBAAiB,aAG9ByD,OACErE,EAAAA,EAAAA,KAACgB,GAAI,CACHZ,MAAO,CACLiC,SAAU0F,EAAW,OAAS,OAC9BM,WAAY,KAEdwE,SAAU,CAAEC,QAASV,EAAWQ,aAAe9B,EAAkBsB,EAAWQ,cAAgB,kCAAUpM,SAErG4L,EAAWQ,aAAe9B,EAAkBsB,EAAWQ,cAAgB,mCAG5E/K,YAAa,sBAAO8H,EAAWyC,EAAWW,wBAMnD,E,gBC5HP,MAAQ/L,KAAK,IAAIC,EAAAA,EAoGjB,GAlGsBnD,IAA2D,IAA1D,cAAEkP,EAAa,eAAEC,EAAc,QAAEC,EAAO,SAAEnF,GAAUjK,EACzE,MAAMkK,EAAS,CACbmF,KAAM,CACJhF,aAAc,OACd1C,aAAc,QAEhB2C,SAAU,CACR7H,QAAS,WACT4H,aAAc,OACduC,WAAY,MACZrI,SAAU,OACVgG,WAAY,OAEd+E,WAAapO,IACX,MAAMqO,EAAwB,aAAXrO,EACbsO,EAAwB,aAAXtO,EAEnB,MAAO,CACLyC,QAAS,QACTlB,QAAS,kBACT2H,WAAYmF,EAAa,UAAYC,EAAa,UAAY,UAC9DzM,OAAQ,cAAawM,EAAa,UAAYC,EAAa,UAAY,WACvEnF,aAAc,OACd1C,aAAc,OACf,EAEH8H,SAAWvO,IAIF,CACLyC,QAAS,eACTF,MAAO,MACPC,OAAQ,MACR2G,aAAc,MACdD,WAR4B,aAAXlJ,EAQQ,UAPG,aAAXA,EAOiC,UAAY,UAC9D8J,YAAa,SAWnB,OACE9I,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,OACEe,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CAAEqB,QAAS,OAAQE,WAAY,UAAWnB,SAAA,EACpDR,EAAAA,EAAAA,KAAA,QAAMI,MAAO,CAAE0I,YAAa,OAAQtI,SAAC,8BACrCR,EAAAA,EAAAA,KAACwN,GAAAA,EAAK,CAACxO,OAAyC,YAAjCyO,EAAAA,cAAcT,GAA+B,UACZ,UAAjCS,EAAAA,cAAcT,GAA6B,QACV,YAAjCS,EAAAA,cAAcT,GAA+B,UAAY,kBAG5ElL,KAAK,QACL1B,MAAO4H,EAAOmF,KACdlL,UAAW,CAAE1B,QAASwH,EAAW,OAAS,QAASvH,UAEnDR,EAAAA,EAAAA,KAAC0F,EAAAA,EAAK,CAACgI,UAAU,WAAWtN,MAAO,CAAEmB,MAAO,QAASf,UACnD4E,EAAAA,EAAAA,MAAA,OAAA5E,SAAA,EACE4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOoF,WAAWJ,GAAexM,SAAA,EAC3CR,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAOuF,SAASP,MAC7BhN,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,SAAC,gCACbR,EAAAA,EAAAA,KAACgB,GAAI,CAACZ,MAAO,CAAEiI,WAAY,OAAQ7H,SAChCoN,EAAAA,kBAAkBZ,IAAkBA,OAIxCC,IACC7H,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOoF,WAAWH,EAAejO,QAAQwB,SAAA,EACnDR,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAOuF,SAASN,EAAejO,WAC5CgB,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,SAAC,gCACbR,EAAAA,EAAAA,KAACgB,GAAI,CAACZ,MAAO,CAAEiI,WAAY,OAAQ7H,UAChCqN,EAAAA,EAAAA,IAAqBZ,EAAejO,QAAU,cAAe,uBAKnEkO,QAA6BzG,IAAlByG,EAAQY,QAClB1I,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CAAE2N,UAAW,QAASvN,SAAA,EAChCR,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,SAAC,gCACbR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CACFzI,MAAM,OACNF,MAAO4H,EAAOI,SAAS5H,SAEG,kBAAlB0M,EAAQY,MAAqBZ,EAAQY,MAAME,QAAQ,GAAK,eAMrE,E,4BClGX,MAAQhN,KAAI,aAAEiN,IAAchN,EAAAA,EAiH5B,GA/GsBnD,IAAiC,IAADoQ,EAAAC,EAAA,IAA/B,OAAEC,EAAM,KAAEtM,EAAI,SAAEiG,GAAUjK,EAC/C,MAAMuP,EAA+B,aAAlBe,EAAO1O,OAEpBsI,EAAS,CACbmF,KAAM,CACJhF,aAAc,OACd1C,aAAc,OACd4I,WAAY,cAAahB,EAAa,UAAY,YAEpDiB,OAAQ,CACN7M,QAAS,OACTE,WAAY,SACZ8D,aAAc,QAEhBI,KAAM,CACJxD,SAAU,OACVyG,YAAa,MACbxI,MAAO+M,EAAa,UAAY,WAElChJ,MAAO,CACL/B,OAAQ,EACR+F,WAAY,QAEdkG,UAAW,CACTpG,aAAc,OACd5H,QAAS,WACT8H,WAAY,OACZqC,WAAY,OAEd8D,SAAU,CACR/M,QAAS,OACTE,WAAY,SACZ8D,aAAc,OAEhBgJ,SAAU,CACR3F,YAAa,MACbxI,MAAO,WAEToO,UAAW,CACTrG,WAAY,OACZS,YAAa,OAEf6F,WAAY,CACVpO,QAAS,YACT2H,WAAY,UACZC,aAAc,MACd4F,UAAW,OACXlN,OAAQ,sBAIN+N,EAAaR,EAAOS,WAAa,IAAIxF,KAAK+E,EAAOS,YAAYnF,iBAAmB,eAEtF,OACEtE,EAAAA,EAAAA,MAACpD,EAAAA,EAAI,CACHF,KAAK,QACL1B,MAAO4H,EAAOmF,KACdlL,UAAW,CAAE1B,QAASwH,EAAW,OAAS,QAASvH,SAAA,EAEnD4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOsG,OAAO9N,SAAA,CACvB6M,GACCrN,EAAAA,EAAAA,KAAC8O,EAAAA,EAAmB,CAAC1O,MAAO4H,EAAOnC,QACnC7F,EAAAA,EAAAA,KAAC+O,GAAAA,EAAmB,CAAC3O,MAAO4H,EAAOnC,QAErC7F,EAAAA,EAAAA,KAAA,MAAII,MAAO4H,EAAO3D,MAAM7D,SAAW,UAATsB,EAAmB,2BAAS,8BACtD9B,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CACFzI,MAAO+M,EAAa,UAAY,QAChCjN,MAAO4H,EAAOuG,UAAU/N,SAEvB6M,EAAa,eAAO,qBAIzBjI,EAAAA,EAAAA,MAAC4J,EAAAA,EAAG,CAACC,OAAQ,CAAC,GAAI,IAAIzO,SAAA,EACpBR,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAG5O,UAClB4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAAC6J,EAAAA,EAAY,CAACzJ,MAAO4H,EAAOyG,YAC5BzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,yBAC/BR,EAAAA,EAAAA,KAAC0M,GAAAA,EAAM,CACLxM,KAAK,QACLE,MAAO,CAAE0I,YAAa,MAAOlI,gBAAiB,WAAYJ,SAE1C,QAAf0N,EAAAE,EAAOiB,gBAAQ,IAAAnB,GAAfA,EAAiBnE,KAAOqE,EAAOiB,SAAStF,KAAKuF,OAAO,GAAK,OAE5DtP,EAAAA,EAAAA,KAACgB,GAAI,CAAAR,UAAiB,QAAf2N,EAAAC,EAAOiB,gBAAQ,IAAAlB,OAAA,EAAfA,EAAiBpE,OAAQ,uBAGpC/J,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAG5O,UAClB4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAACuP,GAAAA,EAAgB,CAACnP,MAAO4H,EAAOyG,YAChCzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,+BAC/BR,EAAAA,EAAAA,KAACgB,GAAI,CAAAR,SAAEoO,UAGXxJ,EAAAA,EAAAA,MAAC8J,EAAAA,EAAG,CAACM,KAAM,GAAGhP,SAAA,EACZ4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAACyP,EAAAA,EAAe,CAACrP,MAAO4H,EAAOyG,YAC/BzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,kCAEjCR,EAAAA,EAAAA,KAAA,OAAKI,MAAO4H,EAAO2G,WAAWnO,SAC3B4N,EAAOsB,UACN1P,EAAAA,EAAAA,KAACiO,GAAS,CAAC7N,MAAO,CAAEkC,OAAQ,GAAI9B,SAAE4N,EAAOsB,YACzC1P,EAAAA,EAAAA,KAACgB,GAAI,CAACc,KAAK,YAAWtB,SAAC,6CAK1B,GC7GHQ,KAAK,IAAIC,EAAAA,EAuJjB,GArJuBnD,IAA4B,IAAD6R,EAAAC,EAAAC,EAAA,IAA1B,QAAE3C,EAAO,SAAEnF,GAAUjK,EAC3C,IAAKoP,QAA6BzG,IAAlByG,EAAQY,MAAqB,OAAO,KAEpD,MAAM9F,EAAS,CACbmF,KAAM,CACJhF,aAAc,OACd1C,aAAc,OACd4I,WAAY,qBAEdC,OAAQ,CACN7M,QAAS,OACTE,WAAY,SACZ8D,aAAc,QAEhBI,KAAM,CACJxD,SAAU,OACVyG,YAAa,MACbxI,MAAO,WAET+D,MAAO,CACL/B,OAAQ,EACR+F,WAAY,QAEdyH,SAAU,CACR3H,aAAc,OACd5H,QAAS,WACT8H,WAAY,OACZhG,SAAU,OACVqI,WAAY,OAEd8D,SAAU,CACR/M,QAAS,OACTE,WAAY,SACZ8D,aAAc,QAEhBgJ,SAAU,CACR3F,YAAa,MACbxI,MAAO,WAEToO,UAAW,CACTrG,WAAY,OACZS,YAAa,OAEfiH,aAAc,CACZxP,QAAS,SAEXyP,aAAc,CACZ3H,WAAY,OACZhG,SAAU,OACV/B,MAAO,UACPoK,WAAY,QAIVf,EAAcR,GACbA,EACE,IAAIE,KAAKF,GAAYO,iBADJ,eAI1B,OACEtE,EAAAA,EAAAA,MAACpD,EAAAA,EAAI,CACHF,KAAK,QACL1B,MAAO4H,EAAOmF,KACdlL,UAAW,CAAE1B,QAASwH,EAAW,OAAS,QAASvH,SAAA,EAEnD4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOsG,OAAO9N,SAAA,EACxBR,EAAAA,EAAAA,KAACiQ,EAAAA,EAAY,CAAC7P,MAAO4H,EAAOnC,QAC5B7F,EAAAA,EAAAA,KAAA,MAAII,MAAO4H,EAAO3D,MAAM7D,SAAC,8BACzBR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CACFzI,MAAM,OACNF,MAAO4H,EAAO8H,SAAStP,SAEG,kBAAlB0M,EAAQY,MAAqBZ,EAAQY,MAAME,QAAQ,GAAK,UAIpE5I,EAAAA,EAAAA,MAAC4J,EAAAA,EAAG,CAACC,OAAQ,CAAC,GAAI,IAAIzO,SAAA,EACpBR,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAG5O,UAClB4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAAC6J,EAAAA,EAAY,CAACzJ,MAAO4H,EAAOyG,YAC5BzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,yBAC/BR,EAAAA,EAAAA,KAAC0M,GAAAA,EAAM,CACLxM,KAAK,QACLE,MAAO,CAAE0I,YAAa,MAAOlI,gBAAiB,WAAYJ,SAE3C,QAAdmP,EAAAzC,EAAQgD,cAAM,IAAAP,GAAdA,EAAgB5F,KAAOmD,EAAQgD,OAAOnG,KAAKuF,OAAO,GAAK,OAE1DtP,EAAAA,EAAAA,KAACgB,GAAI,CAAAR,UAAgB,QAAdoP,EAAA1C,EAAQgD,cAAM,IAAAN,OAAA,EAAdA,EAAgB7F,OAAQ,uBAInC/J,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAG5O,UAClB4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAACgK,GAAAA,EAAY,CAAC5J,MAAO4H,EAAOyG,YAC5BzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,mBAC/BR,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CAACzI,MAAM,OAAME,UACA,QAAdqP,EAAA3C,EAAQgD,cAAM,IAAAL,OAAA,EAAdA,EAAgBM,OAAQjD,EAAQkD,YAAc,mCAKrDpQ,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAG3O,UACV4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAOwG,SAAShO,SAAA,EAC1BR,EAAAA,EAAAA,KAACuP,GAAAA,EAAgB,CAACnP,MAAO4H,EAAOyG,YAChCzO,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAO0G,UAAUlO,SAAC,+BAC/BR,EAAAA,EAAAA,KAACgB,GAAI,CAAAR,SAAEmJ,EAAWuD,EAAQmD,oBAK/BnD,EAAQoD,SAAWpD,EAAQoD,QAAQ1Q,OAAS,IAC3CwF,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EACER,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAE2N,UAAW,OAAQtI,aAAc,MAAO4C,WAAY,QAAS7H,SAAC,8BAC5ER,EAAAA,EAAAA,KAACuQ,EAAAA,EAAQ,CAACnQ,MAAO,CAAE2N,UAAW,IAAKvN,SAChC0M,EAAQoD,QAAQE,KAAI,CAACC,EAAQnJ,KAAK,IAAAoJ,EAAAC,EAAAC,EAAA,OACjC5Q,EAAAA,EAAAA,KAACuQ,EAAAA,EAAS5H,KAAI,CAEZrI,MAAM,OACNuQ,KAAK7Q,EAAAA,EAAAA,KAACiQ,EAAAA,EAAY,CAAC7P,MAAO,CAAEiC,SAAU,UAAa7B,UAEnD4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO4H,EAAO+H,aAAavP,SAAA,EAC9B4E,EAAAA,EAAAA,MAAA,OAAA5E,SAAA,EACER,EAAAA,EAAAA,KAAC0M,GAAAA,EAAM,CACLxM,KAAK,QACLE,MAAO,CAAE0I,YAAa,MAAOlI,gBAAiB,WAAYJ,SAE5C,QAAbkQ,EAAAD,EAAOP,cAAM,IAAAQ,GAAbA,EAAe3G,KAAO0G,EAAOP,OAAOnG,KAAKuF,OAAO,GAAK,OAExDtP,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,UAAe,QAAbmQ,EAAAF,EAAOP,cAAM,IAAAS,OAAA,EAAbA,EAAe5G,OAAQ,8BACrC/J,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CAACzI,MAAM,OAAOF,MAAO,CAAEkC,OAAQ,SAAU9B,UAC7B,QAAboQ,EAAAH,EAAOP,cAAM,IAAAU,OAAA,EAAbA,EAAeT,OAAQM,EAAOL,YAAc,iCAGjDhL,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CAAE2N,UAAW,MAAOrD,WAAY,OAAQpK,MAAO,QAASE,SAAA,CACjEmJ,EAAW8G,EAAOJ,UAAU,uBACzBrQ,EAAAA,EAAAA,KAAA,QAAMI,MAAO4H,EAAOgI,aAAaxP,SACV,kBAAjBiQ,EAAO3C,MAAqB2C,EAAO3C,MAAME,QAAQ,GAAK,aApB/D1G,EAwBS,WAKnB,GCtFL,MAAEwJ,GAAO9P,KAAI,GAAEiN,UAAU,IAAIhN,EAAAA,GAC7B,SAAE8P,IAAaC,EAAAA,GACbC,QAAQ,IAAI7M,EAAAA,GACd,OAAE8M,IAAWC,EAAAA,EAGbrG,GAAqB1J,IACzB,IAGE,MAAI,yGAA8BgQ,KAAKhQ,GAG9BiQ,mBAAmBC,OAAOlQ,IAI5BA,CACT,CAAE,MAAOhD,GAEP,OADAZ,QAAQY,MAAM,0DAAcA,GACrBgD,CACT,GAi/BF,GA9+ByBmQ,KAAO,IAADC,EAC7B,MAAM,GAAEC,IAAOC,EAAAA,EAAAA,KACTC,GAAWC,EAAAA,EAAAA,OACV9J,EAAY+J,IAAiB5T,EAAAA,EAAAA,UAAS,OACtCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChC6T,EAAqBC,IAA0B9T,EAAAA,EAAAA,WAAS,IACxD+T,EAAkBC,IAAuBhU,EAAAA,EAAAA,WAAS,IAClDiU,EAAyBC,IAA8BlU,EAAAA,EAAAA,WAAS,IAChEmU,EAA0BC,IAA+BpU,EAAAA,EAAAA,WAAS,IAClEqU,EAAmBC,IAAwBtU,EAAAA,EAAAA,WAAS,IACpDuU,GAAeC,EAAAA,EAAKC,WACpBC,GAAYF,EAAAA,EAAKC,WACjBE,GAAmBH,EAAAA,EAAKC,WACxBG,GAAoBJ,EAAAA,EAAKC,WACzBI,GAAaL,EAAAA,EAAKC,WAClBK,GAAYC,KAAiB/U,EAAAA,EAAAA,WAAS,IACtCgV,GAAaC,KAAkBjV,EAAAA,EAAAA,UAAS,OACxCkV,GAAYC,KAAiBnV,EAAAA,EAAAA,WAAS,IACtCoV,GAAgBC,KAAqBrV,EAAAA,EAAAA,WAAS,IAC9CsV,GAAaC,KAAkBvV,EAAAA,EAAAA,UAAS,OACxC8J,GAAU0L,KAAexV,EAAAA,EAAAA,UAASiH,OAAOC,YAAc,MACvDuO,GAAgBC,KAAqB1V,EAAAA,EAAAA,UAAS,KAC9C8E,GAAUC,KAAe/E,EAAAA,EAAAA,UAAS,KAClC2V,GAAsBC,KAA2B5V,EAAAA,EAAAA,WAAS,GAG3D6V,GAAa,CACjBC,SAAU,CACR5L,aAAc,MACdR,UAAW,iCACX0C,SAAU,UAEZ2J,YAAa,CACX7L,aAAc,MACdR,UAAW,iCACXnG,OAAQ,QAEVyS,SAAU,CACR1T,QAASwH,GAAW,OAAS,UAKjCzJ,EAAAA,EAAAA,YAAU,KACR,MAAM4V,EAAuBA,KAC3B,MAAMC,EAAcjP,OAAOC,YAAc,IACrCgP,IAAgBpM,IAClB0L,GAAYU,EACd,EAGF,IAAIC,EACJ,MAAMC,EAAkBA,KACtBC,aAAaF,GACbA,EAAcG,WAAWL,EAAsB,IAAI,EAIrD,OADAhP,OAAOsP,iBAAiB,SAAUH,GAC3B,KACLnP,OAAOuP,oBAAoB,SAAUJ,GACrCC,aAAaF,EAAY,CAC1B,GACA,CAACrM,KAGJ,MAAM2M,IAAeC,EAAAA,EAAAA,UAAQ,IAA4B,8BAAX,OAAX1B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAiB,CAAC8C,KAO5D2B,KAJUD,EAAAA,EAAAA,UAAQ,IAA4B,gDAAX,OAAX1B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OACN,gDAAX,OAAX8C,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OACS,8BAAX,OAAX8C,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAiB,CAAC8C,MAElB0B,EAAAA,EAAAA,UAAQ,IAA4B,8BAAX,OAAX1B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAiB,CAAC8C,MACnE4B,IAAgBF,EAAAA,EAAAA,UAAQ,IAA4B,gDAAX,OAAX1B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAoB,CAAC8C,KAChE6B,IAAmBH,EAAAA,EAAAA,UAAQ,IAA4B,gDAAX,OAAX1B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAoB,CAAC8C,KAGnE8B,IAAcJ,EAAAA,EAAAA,UAAQ,SAAA9M,EAAA,OAAiB,OAAXoL,SAAW,IAAXA,QAAW,EAAXA,GAAahJ,SAAmB,OAAVnC,QAAU,IAAVA,OAAU,EAAVA,EAAYmC,QACtC,OAAXgJ,SAAW,IAAXA,QAAW,EAAXA,GAAahJ,SAAmB,OAAVnC,QAAU,IAAVA,GAAqB,QAAXD,EAAVC,EAAYgC,iBAAS,IAAAjC,OAAX,EAAVA,EAAuBoC,KAAI,GAAE,CAACgJ,GAAanL,IAG9EkF,IAAgB2H,EAAAA,EAAAA,UAAQ,IAAM7M,GAAakN,EAAAA,EAAAA,GAAiBlN,GAAc,IAAI,CAACA,IAC/EmN,IAAuBN,EAAAA,EAAAA,UAAQ,IAAwB,yBAAlB3H,IAA0C,CAACA,KAChFkI,IAAwBP,EAAAA,EAAAA,UAAQ,IAAwB,0BAAlB3H,IAA2C,CAACA,KAGlFmI,IAAiBR,EAAAA,EAAAA,UAAQ,KAAQD,IAAgBK,IAAgBH,KACjDK,IAAsB,CAACP,GAAcK,GAAaH,GAAqBK,KAGvFG,IAAeT,EAAAA,EAAAA,UAAQ,IAA2B,YAAX,OAAV7M,QAAU,IAAVA,OAAU,EAAVA,EAAYhG,OAA0C,8BAAX,OAAVgG,QAAU,IAAVA,OAAU,EAAVA,EAAYhG,OAAiB,CAACgG,IAE5FuN,IAAkBV,EAAAA,EAAAA,UAAQ,KAC7BE,IAAiBO,IACjBN,KAAqBM,IACtBR,KACGM,IAAuB,CAACL,GAAeO,GAAcN,GAAkBF,GAAqBM,KAG3FI,IAAWX,EAAAA,EAAAA,UAAQ,IAAMC,IACQ,gDAAX,OAAX3B,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,OAAsBiF,IACb,gDAAX,OAAXnC,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,QAAuBiF,IAAe,CAACnC,GAAa2B,GAAqBQ,KAGjGG,IAAwBZ,EAAAA,EAAAA,UAAQ,IAAMW,IAA8B,aAAlBtI,IAA8B,CAACsI,GAAUtI,KAG3FwI,IAAwBC,EAAAA,EAAAA,cAAYvU,UACxC,IACE/C,GAAW,GACX,MAAMW,QAAiB4W,EAAAA,EAAkBC,kBAAkBlE,GAC3DI,EAAc/S,EAASmF,KACzB,CAAE,MAAO7F,GACP2B,EAAAA,GAAQ3B,MAAM,mDAChB,CAAC,QACCD,GAAW,EACb,IACC,CAACsT,KAGJnT,EAAAA,EAAAA,YAAU,KACiB4C,WACvB,IACE,MAAM0U,QAAaC,EAAAA,EAAYC,iBAC/B,IAAKF,EAGH,OAFA7V,EAAAA,GAAQ3B,MAAM,2EACduT,EAAS,UAGXuB,GAAe0C,EACjB,CAAE,MAAOxX,GACP2B,EAAAA,GAAQ3B,MAAM,oDACduT,EAAS,SACX,GAGFoE,EAAkB,GACjB,CAACpE,KAEJrT,EAAAA,EAAAA,YAAU,KACRkX,IAAuB,GACtB,CAACA,KAGJ,MAAMQ,IAAmBP,EAAAA,EAAAA,cAAYvU,UACnC,IACE8R,IAAc,SACR0C,EAAAA,EAAkBO,WAAWxE,EAAIyE,EAAOnY,SAC9CgC,EAAAA,GAAQoW,QAAQ,wCAChB3D,EAAY4D,cACZrE,GAAuB,GACvByD,IACF,CAAE,MAAOpX,GACP2B,EAAAA,GAAQ3B,MAAM,uCAChB,CAAC,QACC4U,IAAc,EAChB,IACC,IA0BGpI,IAA2B6K,EAAAA,EAAAA,cAAYvU,UAC3C,MAAM7D,EAAU6H,OAAOmR,SAASC,SAAW,KAAOpR,OAAOmR,SAASE,UAAYrR,OAAOmR,SAASG,KAAO,IAAMtR,OAAOmR,SAASG,KAAO,IAC5HhY,EAAQC,aAAaC,QAAQ,SAG7B+X,GAAY,IAAIpN,MAAOqN,UACvBnQ,EAAM,GAAGlJ,cAAoB+O,EAAWtJ,yBAAyBgB,mBAAmBsI,EAAWQ,mBAAmB6J,IAExH,IAEE,MAAME,EAAIC,SAASC,cAAc,KACjCF,EAAEvW,MAAMqB,QAAU,OAClBkV,EAAEG,KAAOvQ,EAIL/H,EAEFG,MAAM4H,EAAK,CACT3H,QAAS,CACP,cAAiB,UAAUJ,OAG9BK,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIG,MAAM,6BAASJ,EAASE,UAAUF,EAASG,cAEvD,OAAOH,EAASiY,MAAM,IAEvBlY,MAAKkY,IAEJ,MAAMC,EAAU9R,OAAOxC,IAAIuU,gBAAgBF,GAC3CJ,EAAEG,KAAOE,EACTL,EAAEO,SAAW9K,EAAWQ,aACxBgK,SAASO,KAAKC,YAAYT,GAC1BA,EAAEU,QAEF9C,YAAW,KACTqC,SAASO,KAAKG,YAAYX,GAC1BzR,OAAOxC,IAAI6U,gBAAgBP,EAAQ,GAClC,IAAI,IAERlX,OAAM1B,IACLZ,QAAQY,MAAM,wCAAWA,GACzB2B,EAAAA,GAAQ3B,MAAM,2EAAe,KAI/BuY,EAAEG,KAAOvQ,EACTqQ,SAASO,KAAKC,YAAYT,GAC1BA,EAAEU,QACFT,SAASO,KAAKG,YAAYX,IAI5BnZ,QAAQC,IAAI,4BAAS,CACnB+Z,qBAAKpL,EAAWQ,aAChB6K,qBAAK3T,mBAAmBsI,EAAWQ,cACnClK,IAAK6D,GAET,CAAE,MAAOnI,GAEP2B,EAAAA,GAAQ3B,MAAM,2EAChB,IACC,IAkFGsZ,IAAejC,EAAAA,EAAAA,cAAY,KAC/BxE,GAAQ,CACN5M,MAAO,+DACPwB,MAAM7F,EAAAA,EAAAA,KAAC2X,EAAAA,EAAyB,IAChC5Z,QAAS,GACT6Z,OAAQ,2BACRC,OAAQ,SACRC,WAAY,eACZC,eAAgB5E,GAChB,UAAM6E,GACJ5E,IAAc,GACd,IAEE,MAAM1T,QAAegW,EAAAA,EAAkBuC,iBAAiBxG,GACxDjU,QAAQC,IAAI,4CAAmCiC,GAC3CA,EAAOyW,SACTpW,EAAAA,GAAQoW,QAAQ,8CAEhB5B,YAAW,KACT5C,EAAS,oBAAoB,GAC5B,MAEH5R,EAAAA,GAAQ3B,MAAMsB,EAAOK,SAAW,uCAEpC,CAAE,MAAO3B,GACP2B,EAAAA,GAAQ3B,MAAM,yDAChB,CAAC,QACCgV,IAAc,EAChB,CACF,EACA7O,QAAAA,GACE,GAEF,GACD,CAACkN,EAAIE,EAAUwB,KAsBlB,GAAIjV,EACF,OACE8B,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEC,UAAW,SAAUE,QAAS,QAASC,UACnDR,EAAAA,EAAAA,KAACC,EAAAA,EAAI,CAACE,IAAI,8CAKhB,IAAK2H,EACH,OACE1C,EAAAA,EAAAA,MAACpD,EAAAA,EAAI,CAAAxB,SAAA,EACHR,EAAAA,EAAAA,KAAC4B,EAAAA,EAAK,CACJ7B,QAAQ,+DACR8B,YAAY,iLACZC,KAAK,QACLC,UAAQ,KAEV/B,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAE2N,UAAW,GAAI1N,UAAW,UAAWG,UACjDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAC9D,KAAK,UAAUiE,QAASA,IAAM4L,EAAS,qBAAqBnR,SAAC,kCAQ7E,MAAM0X,GAAgBA,KACpBvF,EAASwF,eAAe,CACtB9T,MAAOyD,EAAWzD,MAClBtG,QAAS+J,EAAW/J,QACpBqa,gBAAiBtQ,EAAWsQ,gBAC5BtW,KAAMgG,EAAWhG,OAEnBmQ,GAAoB,EAAK,EAIrBoG,GAAsBA,KAC1B,MAAMhM,EAAU,GAGhBA,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAeC,MAAM7F,EAAAA,EAAAA,KAACyP,EAAAA,EAAe,IAAK1J,QAASA,IAAMgM,GAAuB,GAAMvR,SAAC,4BAAlF,YAMd,MAAM+X,EAAY3D,IACf3B,IACAnL,GACAA,EAAWgC,WACXmJ,GAAYuF,MAAQ1Q,EAAWgC,UAAU0O,OACvC1Q,EAAW2Q,cAAmD,aAAnC3Q,EAAW2Q,aAAa/Y,QAyDxD,OAtDIuT,IAAenL,GAAcA,EAAWgC,WAAamJ,GAAYuF,MAAQ1Q,EAAWgC,UAAU0O,KAAOvD,IACvG5I,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAYC,MAAM7F,EAAAA,EAAAA,KAAC0Y,EAAAA,EAAY,IAAK3S,QAASmS,GAAe9X,MAAO,CAAEsK,WAAY,GAAIlK,SAAC,4BAAjF,SAOZ2U,IACF9I,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAmB9D,KAAK,UAAU+D,MAAM7F,EAAAA,EAAAA,KAAC8O,EAAAA,EAAmB,IAAK/I,QAASA,IAAMoM,GAA2B,GAAO/R,MAAO,CAAEsK,WAAY,GAAIlK,SAAC,4BAAvI,gBAOZ6U,IACFhJ,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAoB9D,KAAK,UAAU+D,MAAM7F,EAAAA,EAAAA,KAAC8O,EAAAA,EAAmB,IAAK/I,QAASA,IAAMsM,GAA4B,GAAOjS,MAAO,CAAEsK,WAAY,GAAIlK,SAAC,4BAAzI,iBAOZ+U,IACFlJ,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAAaC,MAAM7F,EAAAA,EAAAA,KAACiQ,EAAAA,EAAY,IAAKlK,QAASA,IAAMwM,GAAqB,GAAOnS,MAAO,CAAEsK,WAAY,GAAIlK,SAAC,gBAArG,UAOZ+X,GACFlM,EAAQiM,MACNtY,EAAAA,EAAAA,KAAC2Y,EAAAA,EAAU,CAETtU,MAAM,+DACNxC,YAAY,6FACZgE,MAAM7F,EAAAA,EAAAA,KAAC2X,EAAAA,EAAyB,CAACvX,MAAO,CAAEE,MAAO,SACjDsY,UAAWlB,GACXE,OAAO,2BACPE,WAAW,eAAItX,UAEfR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CAACiT,QAAM,EAAChT,MAAM7F,EAAAA,EAAAA,KAAC8Y,EAAAA,EAAc,IAAK1Y,MAAO,CAAEsK,WAAY,GAAKxM,QAASiV,GAAW3S,SAAC,8BARpF,WAeH6L,EAAQzM,OAAS,EAAIyM,EAAU,IAAI,EAG5C,OACEjH,EAAAA,EAAAA,MAAA,OAAK3E,UAAU,uBAAsBD,SAAA,EACnCR,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,MACE0D,IACE3C,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EACER,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEmB,MAAO,QAASf,UAC5BR,EAAAA,EAAAA,KAAC8Q,GAAK,CAACiI,MAAO,EAAG3Y,MAAO,CAAEkC,OAAQ,EAAGH,UAAW,aAAcD,WAAY,UAAW1B,SAClFsH,EAAWzD,WAGhBrE,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CACV2N,UAAW,MACXxM,MAAO,OACPE,QAAS,OACTuX,SAAU,OACVtX,eAAgB,aAChBuX,IAAK,OACLzY,SACC6X,WAILjT,EAAAA,EAAAA,MAAC4J,EAAAA,EAAG,CAACkK,QAAQ,gBAAgBC,MAAM,SAAQ3Y,SAAA,EACzCR,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACkK,KAAK,OAAM5Y,UACdR,EAAAA,EAAAA,KAAC8Q,GAAK,CAACiI,MAAO,EAAG3Y,MAAO,CAAEkC,OAAQ,EAAGH,UAAW,aAAcD,WAAY,UAAW1B,SAClFsH,EAAWzD,WAGhBrE,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CACVsK,WAAY,OAEZjJ,QAAS,OACTuX,SAAU,OACVtX,eAAgB,WAChBuX,IAAK,OACLzY,SACC6X,UAKTjY,MAAO0T,GAAWC,SAClB9R,UAAW6R,GAAWG,SAASzT,UAE/B4E,EAAAA,EAAAA,MAAC4J,EAAAA,EAAG,CAACC,OAAQ,CAAClH,GAAW,GAAK,GAAIA,GAAW,GAAK,IAAK3H,MAAO,CAAEqF,aAAc,QAASjF,SAAA,EACrFR,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAIiK,GAAI,GAAG7Y,UAC1B4E,EAAAA,EAAAA,MAACpD,EAAAA,EAAI,CACHqC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAACsL,EAAAA,EAAgB,CAAClL,MAAO,CAAE0I,YAAa,SAAW,8BAC5D1I,MAAO0T,GAAWE,YAClB/R,UAAW6R,GAAWG,SAASzT,SAAA,EAE/BR,EAAAA,EAAAA,KAACsZ,GAAe,CAACxR,WAAYA,EAAYC,SAAUA,MAEnD/H,EAAAA,EAAAA,KAACuZ,GAAc,CACblV,MAAM,2BACNtG,QAAS+J,EAAW/J,QACpBgK,SAAUA,MAGZ/H,EAAAA,EAAAA,KAACuZ,GAAc,CACblV,MAAM,2BACNtG,QAAS+J,EAAWsQ,gBACpBrQ,SAAUA,KAGXD,EAAW6C,aAAe7C,EAAW6C,YAAY/K,OAAS,IACzDI,EAAAA,EAAAA,KAACwZ,GAAiB,CAChB7O,YAAa7C,EAAW6C,YACxBC,yBAA0BA,GAC1BC,kBA5LWvE,IACzBkN,GAAelN,GACfgN,IAAkB,EAAK,EA2LTvL,SAAUA,GACV+C,kBAAmBA,WAM3B9K,EAAAA,EAAAA,KAACkP,EAAAA,EAAG,CAACC,GAAI,GAAIC,GAAI,GAAIiK,GAAI,EAAE7Y,UACzBR,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,MAAM,2BACNjE,MAAO0T,GAAWE,YAClB/R,UAAW,CAAE1B,QAASwH,GAAW,OAAS,QAASvH,UAEnD4E,EAAAA,EAAAA,MAACM,EAAAA,EAAK,CAACgI,UAAU,WAAWtN,MAAO,CAAEmB,MAAO,QAAUrB,KAAM6H,GAAW,GAAK,GAAGvH,SAAA,EAC7ER,EAAAA,EAAAA,KAACyZ,GAAa,CACZzM,cAAeA,GACfC,eAAgBnF,EAAWmF,eAC3BC,QAASpF,EAAWoF,QACpBnF,SAAUA,KAGXD,EAAW4R,cACV1Z,EAAAA,EAAAA,KAAC2Z,GAAa,CACZvL,OAAQtG,EAAW4R,YACnB5X,KAAK,QACLiG,SAAUA,KAIbD,EAAW2Q,eACVzY,EAAAA,EAAAA,KAAC2Z,GAAa,CACZvL,OAAQtG,EAAW2Q,aACnB3W,KAAK,SACLiG,SAAUA,KAIbD,EAAWoF,cAAwCzG,IAA7BqB,EAAWoF,QAAQY,QACxC9N,EAAAA,EAAAA,KAAC4Z,GAAc,CACb1M,QAASpF,EAAWoF,QACpBnF,SAAUA,KAIbD,EAAW4H,UAAY5H,EAAW4H,SAAS9P,OAAS,IACnDI,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAACyP,EAAAA,EAAe,IAAG,+BAC5B3N,KAAK,QAAOtB,UAEZR,EAAAA,EAAAA,KAACuQ,EAAAA,EAAQ,CAAA/P,SACNsH,EAAW4H,SAASc,KAAI,CAACqJ,EAASvS,KACjCtH,EAAAA,EAAAA,KAACuQ,EAAAA,EAAS5H,KAAI,CAAarI,MAAM,UAASE,UACxC4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CACNG,QAAS,YACT2H,WAAY,UACZC,aAAc,MACd1C,aAAc,OACdjF,SAAA,EACAR,EAAAA,EAAAA,KAAA,KAAAQ,SAAIqZ,EAAQ9b,WACZiC,EAAAA,EAAAA,KAAA,OAAKI,MAAO,CAAEC,UAAW,QAASC,MAAO,OAAQ+B,SAAU,QAAS7B,SACjEqZ,EAAQjQ,UAAY,IAAIP,KAAKwQ,EAAQjQ,WAAWN,qBAAuB,SAT9DhC,SAkB3BQ,EAAWgS,iBAAmBhS,EAAWgS,gBAAgBla,OAAS,IACjEI,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAAC+Z,EAAAA,EAAe,IAAG,+BAC5BjY,KAAK,QAAOtB,UAEZR,EAAAA,EAAAA,KAACuQ,EAAAA,EAAQ,CAAA/P,SACNsH,EAAWgS,gBAAgBtJ,KAAI,CAACwJ,EAAU1S,KAAK,IAAA2S,EAAA,OAC9C7U,EAAAA,EAAAA,MAACmL,EAAAA,EAAS5H,KAAI,CAAakI,KAAK7Q,EAAAA,EAAAA,KAAC+Z,EAAAA,EAAe,CAAC3Z,MAAO,CAAEiC,SAAU,UAAa7B,SAAA,EAC/E4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CAAEqF,aAAc,OAAQjF,SAAA,EAClCR,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,UAAqB,QAAnByZ,EAAAD,EAASE,kBAAU,IAAAD,OAAA,EAAnBA,EAAqBlQ,OAAQ,6BAAc,UAAG,IAC3DiQ,EAASG,WAAa,IAAI9Q,KAAK2Q,EAASG,YAAYzQ,iBAAmB,2BAAO,qCAGjFtE,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CACVG,QAAS,WACT2H,WAAY,UACZC,aAAc,OACd3H,SAAA,CAAC,6BACMwZ,EAASI,YAXA9S,EAaJ,QAMvBQ,EAAWuS,uBAAyBvS,EAAWuS,sBAAsBza,OAAS,IAC7EI,EAAAA,EAAAA,KAACgC,EAAAA,EAAI,CACHqC,OAAOrE,EAAAA,EAAAA,KAAAqF,EAAAA,SAAA,CAAA7E,SAAE,6BACTsB,KAAK,QAAOtB,UAEZR,EAAAA,EAAAA,KAACuQ,EAAAA,EAAQ,CAAA/P,SACNsH,EAAWuS,sBAAsB7J,KAAI,CAACC,EAAQnJ,KAAK,IAAAgT,EAAA,OAClDlV,EAAAA,EAAAA,MAACmL,EAAAA,EAAS5H,KAAI,CAEZrI,MAAyB,uBAAlBmQ,EAAOzR,OAAmB,QAA6B,uBAAlByR,EAAOzR,OAAmB,MAAQ,OAAQwB,SAAA,EAEtF4E,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CAAEqF,aAAc,OAAQjF,SAAA,EAClCR,EAAAA,EAAAA,KAACgB,GAAI,CAAC2M,QAAM,EAAAnN,UAAkB,QAAhB8Z,EAAA7J,EAAO8J,iBAAS,IAAAD,OAAA,EAAhBA,EAAkBvQ,OAAQ,6BAAc,UAAG,IACxD0G,EAAO+J,UAAY,IAAInR,KAAKoH,EAAO+J,WAAW9Q,iBAAmB,2BAAO,yCAClE1J,EAAAA,EAAAA,KAAC+I,EAAAA,EAAG,CACTzI,MAAOmN,EAAAA,cAAcgD,EAAOzR,SAAW,UACvCoB,MAAO,CAAEG,QAAS,UAAW4H,aAAc,OAAQ3H,SAElDoN,EAAAA,kBAAkB6C,EAAOzR,SAAWyR,EAAOzR,aAGhDoG,EAAAA,EAAAA,MAAA,OAAKhF,MAAO,CACVG,QAAS,WACT2H,WAAY,UACZC,aAAc,OACd3H,SAAA,CAAC,iBACIiQ,EAAOf,cAlBTpI,EAoBS,qBAYlCtH,EAAAA,EAAAA,KAACoE,EAAAA,EAAK,CACJC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAACyP,EAAAA,EAAe,IAAG,+BAC5BnL,KAAMwN,EACNvN,SAAUA,IAAMwN,GAAuB,GACvCtN,OAAQ,KACRlD,MAAOwG,GAAW,MAAQ,IAC1B3H,MAAO,CAAE+H,aAAc,OACvBlG,UAAW,CAAE1B,QAASwH,GAAW,OAAS,QAASvH,UAEnD4E,EAAAA,EAAAA,MAACqN,EAAAA,EAAI,CACHgI,KAAMjI,EACNkI,SAAU1E,GACV2E,OAAO,WAAUna,SAAA,EAEjBR,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,UACL6Q,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhDR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACNC,YAAY,gDACZ3a,MAAO,CAAE+H,aAAc,YAG3B/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAK9J,KAAI,CAACvI,MAAO,CAAEqF,aAAc,EAAGpF,UAAW,SAAUG,SAAA,EACxDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACLG,QAASA,IAAMgM,GAAuB,GACtC3R,MAAO,CAAE0I,YAAa,MAAOX,aAAc,OAAQ3H,SACpD,kBAGDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACLkZ,SAAS,SACT9c,QAAS6U,GACT3S,MAAO,CAAE+H,aAAc,OAAQ3H,SAChC,sCAQPR,EAAAA,EAAAA,KAACoE,EAAAA,EAAK,CACJC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAAC0Y,EAAAA,EAAY,IAAG,+BACzBpU,KAAM0N,EACNzN,SAAUA,IAAM0N,GAAoB,GACpCxN,OAAQ,KACRlD,MAAO,IACPnB,MAAO,CAAE+H,aAAc,OACvBlG,UAAW,CAAE1B,QAAS,QAASC,UAE/B4E,EAAAA,EAAAA,MAACqN,EAAAA,EAAI,CACHgI,KAAM9H,EACN+H,SAvlBWxZ,UACjB,IACE8R,IAAc,SACR0C,EAAAA,EAAkBuF,iBAAiBxJ,EAAI,CAC3CpN,MAAO6R,EAAO7R,MACdvC,KAAMoU,EAAOpU,KACb/D,QAASmY,EAAOnY,QAChBqa,gBAAiBlC,EAAOkC,gBACxBgC,OAAQlE,EAAOkE,SAEjBra,EAAAA,GAAQoW,QAAQ,wCAChBxD,EAASyD,cACTnE,GAAoB,GACpBuD,IACF,CAAE,MAAOpX,GACPZ,QAAQY,MAAM,wCAAWA,GACzB2B,EAAAA,GAAQ3B,MAAM,uCAChB,CAAC,QACC4U,IAAc,EAChB,GAqkBM2H,OAAO,WAAUna,SAAA,EAEjBR,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,QACLnB,MAAM,eACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,mCAAWS,UAE9CR,EAAAA,EAAAA,KAACgR,EAAAA,EAAK,CAAC5Q,MAAO,CAAE+H,aAAc,YAEhCnI,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,OACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhDR,EAAAA,EAAAA,KAACmR,EAAAA,EAAM,CAAC4J,YAAY,6CAAU3a,MAAO,CAAE+H,aAAc,OAAQ3H,SAC1D0a,OAAOC,QAAQlS,EAAAA,kBAAkBuH,KAAI1S,IAAA,IAAEsd,EAAKvb,GAAM/B,EAAA,OACjDkC,EAAAA,EAAAA,KAACkR,GAAM,CAAWrR,MAAOub,EAAI5a,SAAEX,GAAlBub,EAAiC,SAIpDpb,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,UACLnB,MAAM,eACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,mCAAWS,UAE9CR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACN1a,MAAO,CAAE+H,aAAc,YAG3BnI,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,kBACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhDR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACN1a,MAAO,CAAE+H,aAAc,YAG3BnI,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,SACLnB,MAAM,2BAAMpI,UAEZR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACN1a,MAAO,CAAE+H,aAAc,YAG3B/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAK9J,KAAI,CAACvI,MAAO,CAAEqF,aAAc,EAAGpF,UAAW,SAAUG,SAAA,EACxDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACLG,QAASA,IAAMkM,GAAoB,GACnC7R,MAAO,CAAE0I,YAAa,MAAOX,aAAc,OAAQ3H,SACpD,kBAGDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACLkZ,SAAS,SACT9c,QAAS6U,GACT3S,MAAO,CAAE+H,aAAc,OAAQ3H,SAChC,sCAQP4E,EAAAA,EAAAA,MAAChB,EAAAA,EAAK,CACJC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAAC8O,EAAAA,EAAmB,IAAG,+BAChCxK,KAAM4N,EACN3N,SAAUA,IAAM4N,GAA2B,GAC3C1N,OAAQ,KACRlD,MAAO,IACPnB,MAAO,CAAE+H,aAAc,OACvBlG,UAAW,CAAE1B,QAAS,QAASC,SAAA,EAE/BR,EAAAA,EAAAA,KAAC4B,EAAAA,EAAK,CACJ7B,QAAQ,uCACR8B,YAAY,+MACZC,KAAK,OACLC,UAAQ,EACR3B,MAAO,CAAEqF,aAAc,OAAQ0C,aAAc,UAE/C/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAI,CACHgI,KAAM7H,EACN8H,SArlBkBxZ,UACxB,IACE8R,IAAc,GACdxV,QAAQC,IAAI,wCAAW,CACrB4d,iBAAM5J,EACN6J,qBAAgB,OAAXrI,SAAW,IAAXA,QAAW,EAAXA,GAAalJ,KAClBwR,iCAAkB,OAAXtI,SAAW,IAAXA,QAAW,EAAXA,GAAa9C,KACpBqL,iCAAkB,OAAXvI,SAAW,IAAXA,QAAW,EAAXA,GAAahJ,KACpBwR,2BAAwB,YAAlBvF,EAAOxW,OAAuB,eAAO,eAC3Cgc,2BAAMxF,EAAO2D,UAGf,MAAM8B,EAAa,CACjBC,aAAcnK,EACdoK,WAAY,QACZnc,OAAQwW,EAAOxW,OACfma,QAAS3D,EAAO2D,QAChBiC,WAAuB,OAAX7I,SAAW,IAAXA,QAAW,EAAXA,GAAauF,WAGrB9C,EAAAA,EAAkBqG,aAAaJ,GACrC5b,EAAAA,GAAQoW,QAAQ,wCAChBvD,EAAgBwD,cAChBjE,GAA2B,GAC3BqD,KAGItQ,OAAOoL,QAAQ1Q,OAAS,GAC1B2U,YAAW,KACT5C,EAAS,sBAAsB,GAC9B,KAEP,CAAE,MAAOvT,GAAQ,IAAD4d,EAAAC,EACdze,QAAQY,MAAM,wCAAWA,GACzB2B,EAAAA,GAAQ3B,MAAM,2CAA4B,QAAd4d,EAAA5d,EAAMU,gBAAQ,IAAAkd,GAAM,QAANC,EAAdD,EAAgB/X,YAAI,IAAAgY,OAAN,EAAdA,EAAsBlc,UAAW3B,EAAM2B,SACrE,CAAC,QACCiT,IAAc,EAChB,GAijBM2H,OAAO,WACPuB,cAAe,CAAExc,OAAQ,WAAYc,SAAA,EAErCR,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,SACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhD4E,EAAAA,EAAAA,MAAC+W,EAAAA,GAAAA,MAAW,CAAA3b,SAAA,EACVR,EAAAA,EAAAA,KAACmc,EAAAA,GAAAA,OAAY,CAACtc,MAAM,UAAUO,MAAO,CAAE+H,aAAc,eAAgB3H,SAAC,kBACtER,EAAAA,EAAAA,KAACmc,EAAAA,GAAAA,OAAY,CAACtc,MAAM,SAASO,MAAO,CAAE+H,aAAc,eAAgB3H,SAAC,uBAGzER,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,UACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhDR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACNC,YAAY,gDACZ3a,MAAO,CAAE+H,aAAc,YAG3B/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAK9J,KAAI,CAACvI,MAAO,CAAEqF,aAAc,EAAGpF,UAAW,SAAUG,SAAA,EACxDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACLG,QAASA,IAAMoM,GAA2B,GAC1C/R,MAAO,CAAE0I,YAAa,MAAOX,aAAc,OAAQ3H,SACpD,kBAGDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACLkZ,SAAS,SACT9c,QAAS6U,GACT3S,MAAO,CAAE+H,aAAc,OAAQ3H,SAChC,uCAQP4E,EAAAA,EAAAA,MAAChB,EAAAA,EAAK,CACJC,OAAOe,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA7E,SAAA,EAAER,EAAAA,EAAAA,KAAC8O,EAAAA,EAAmB,IAAG,+BAChCxK,KAAM8N,EACN7N,SAAUA,IAAM8N,GAA4B,GAC5C5N,OAAQ,KACRlD,MAAO,IACPnB,MAAO,CAAE+H,aAAc,OACvBlG,UAAW,CAAE1B,QAAS,QAASC,SAAA,EAE/BR,EAAAA,EAAAA,KAAC4B,EAAAA,EAAK,CACJ7B,QAAQ,uCACR8B,YAAY,mPACZC,KAAK,UACLC,UAAQ,EACR3B,MAAO,CAAEqF,aAAc,OAAQ0C,aAAc,UAE/C/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAI,CACHgI,KAAM5H,EACN6H,SA3mBmBxZ,UACzB,IACE8R,IAAc,GACdxV,QAAQC,IAAI,sDAAe,CACzBgU,KACA/R,OAAQwW,EAAOxW,OACfma,QAAS3D,EAAO2D,UAGlB,MAAM8B,EAAa,CACjBC,aAAcnK,EACdoK,WAAY,SACZnc,OAAQwW,EAAOxW,OACfma,QAAS3D,EAAO2D,QAChBiC,WAAuB,OAAX7I,SAAW,IAAXA,QAAW,EAAXA,GAAauF,WAGrB9C,EAAAA,EAAkBqG,aAAaJ,GACrC5b,EAAAA,GAAQoW,QAAQ,wCAChBtD,EAAiBuD,cACjB/D,GAA4B,GAC5BmD,KAGItQ,OAAOoL,QAAQ1Q,OAAS,GAC1B2U,YAAW,KACT5C,EAAS,sBAAsB,GAC9B,KAEP,CAAE,MAAOvT,GAAQ,IAADge,EAAAC,EACd7e,QAAQY,MAAM,wCAAWA,GACzB2B,EAAAA,GAAQ3B,MAAM,2CAA4B,QAAdge,EAAAhe,EAAMU,gBAAQ,IAAAsd,GAAM,QAANC,EAAdD,EAAgBnY,YAAI,IAAAoY,OAAN,EAAdA,EAAsBtc,UAAW3B,EAAM2B,SACrE,CAAC,QACCiT,IAAc,EAChB,GA0kBM2H,OAAO,WACPuB,cAAe,CAAExc,OAAQ,WAAYc,SAAA,EAErCR,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,SACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhD4E,EAAAA,EAAAA,MAAC+W,EAAAA,GAAAA,MAAW,CAAA3b,SAAA,EACVR,EAAAA,EAAAA,KAACmc,EAAAA,GAAAA,OAAY,CAACtc,MAAM,UAAUO,MAAO,CAAE+H,aAAc,eAAgB3H,SAAC,kBACtER,EAAAA,EAAAA,KAACmc,EAAAA,GAAAA,OAAY,CAACtc,MAAM,SAASO,MAAO,CAAE+H,aAAc,eAAgB3H,SAAC,uBAGzER,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,UACLnB,MAAM,2BACNgS,MAAO,CAAC,CAAEC,UAAU,EAAM9a,QAAS,+CAAaS,UAEhDR,EAAAA,EAAAA,KAAC+Q,GAAQ,CACP+J,KAAM,EACNC,YAAY,gDACZ3a,MAAO,CAAE+H,aAAc,YAG3B/C,EAAAA,EAAAA,MAACqN,EAAAA,EAAK9J,KAAI,CAACvI,MAAO,CAAEqF,aAAc,EAAGpF,UAAW,SAAUG,SAAA,EACxDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACLG,QAASA,IAAMsM,GAA4B,GAC3CjS,MAAO,CAAE0I,YAAa,MAAOX,aAAc,OAAQ3H,SACpD,kBAGDR,EAAAA,EAAAA,KAAC4F,EAAAA,EAAM,CACL9D,KAAK,UACLkZ,SAAS,SACT9c,QAAS6U,GACT3S,MAAO,CAAE+H,aAAc,OAAQ3H,SAChC,uCAQP4E,EAAAA,EAAAA,MAAChB,EAAAA,EAAK,CACJC,WAAsCoC,KAArB,OAAVqB,QAAU,IAAVA,GAAmB,QAAT0J,EAAV1J,EAAYoF,eAAO,IAAAsE,OAAT,EAAVA,EAAqB1D,OAAsB,uCAAW,iCAC7DxJ,KAAMgO,EACN/N,SAAUA,IAAMgO,GAAqB,GACrCyF,KAjlBoB9W,UACxB,MAAMgV,QAAepD,EAAUwJ,iBACzBC,EAAaC,WAAWtG,EAAOpI,OACjC2O,MAAMF,IAAeA,EAAa,IAAOA,EAAa,EACxDxc,EAAAA,GAAQ3B,MAAM,qFAGVsX,EAAAA,EAAkBgH,gBAAgBjL,EAAI8K,GAC5Cxc,EAAAA,GAAQoW,QAAQ,4BAChB5D,GAAqB,GACrBiD,KAAuB,EAwkBnBoC,OAAO,2BACPE,WAAW,eAAItX,SAAA,EAEfR,EAAAA,EAAAA,KAAC4B,EAAAA,EAAK,CACJ7B,QAAQ,2BACR8B,YAAY,0OACZC,KAAK,OACLC,UAAQ,EACR3B,MAAO,CAAEqF,aAAc,OAAQ0C,aAAc,UAE/CnI,EAAAA,EAAAA,KAACyS,EAAAA,EAAI,CAACgI,KAAM3H,EAAW6H,OAAO,WAAW5Q,KAAK,aAAYvJ,UACxDR,EAAAA,EAAAA,KAACyS,EAAAA,EAAK9J,KAAI,CACRoB,KAAK,QACLnB,MAAM,uBACNgS,MAAO,CACL,CAAEC,UAAU,EAAM9a,QAAS,kCAC3B,CACE4c,UAAWA,CAACC,EAAG/c,KACb,MAAMgd,EAAWL,WAAW3c,GAC5B,OAAI4c,MAAMI,IAAaA,EAAW,IAAOA,EAAW,EAC3CC,QAAQC,OAAO,IAAI7d,MAAM,6DAGlB,GAAX2d,EAAiB,IAAM,EACnBC,QAAQC,OAAO,IAAI7d,MAAM,wDAE3B4d,QAAQE,SAAS,IAG5Bxc,UAEFR,EAAAA,EAAAA,KAACgR,EAAAA,EAAK,CAAClP,KAAK,SAAS2B,IAAK,GAAKE,IAAK,EAAGsZ,KAAM,GAAKlC,YAAY,wFAMpE/a,EAAAA,EAAAA,KAACkd,EAAW,CACVta,QAASyQ,GACTxQ,QAASA,IAAMyQ,IAAkB,GACjCxQ,SAAqB,OAAXyQ,SAAW,IAAXA,QAAW,EAAXA,GAAazQ,aAErB,C,+DC5jCH,MAAMkS,EAAoBlN,IAC/B,IAAKA,EAAY,MAAO,GAExB,MAAMqV,EAAYrV,EAAWsV,cAAgBtV,EAAW9I,OAGxD,GAAyB,kBAAdme,GAA0B,kBAAkB/L,KAAK+L,GAAY,CACtE,MAAME,EAAcnC,OAAOC,QAAQmC,EAAAA,eAAeC,MAAKzf,IAAA,IAAE8e,EAAG/c,GAAM/B,EAAA,OAAK+B,IAAUsd,CAAS,IAC1F,OAAOE,EAAcA,EAAY,GAAKF,CACxC,CAEA,OAAOA,CAAS,C","sources":["utils/apiUtils.js","components/WordPreview/index.js","components/TextPreview/index.js","components/FilePreview/index.js","components/SuggestionDetail/MetadataSection.js","components/SuggestionDetail/ContentSection.js","components/SuggestionDetail/AttachmentSection.js","components/SuggestionDetail/StatusSection.js","components/SuggestionDetail/ReviewSection.js","components/SuggestionDetail/ScoringSection.js","pages/Suggestions/Detail.js","utils/suggestionUtils.js"],"sourcesContent":["/**\r\n * API工具函数\r\n * 提供与API相关的通用功能\r\n */\r\n\r\n/**\r\n * 获取API基础URL\r\n * 根据当前环境和访问方式自动判断使用的基础URL\r\n * @returns {string} API基础URL\r\n */\r\nexport const getApiBaseUrl = () => {\r\n  // 首先检查是否有环境变量指定的API URL\r\n  if (process.env.REACT_APP_API_URL) {\r\n    // 从环境变量中提取基础URL，去掉末尾的 /api\r\n    const baseUrl = process.env.REACT_APP_API_URL.replace(/\\/api$/, '');\r\n    console.log('从环境变量获取API基础URL:', baseUrl);\r\n    return baseUrl;\r\n  }\r\n  \r\n  // 生产环境下的处理\r\n  if (process.env.NODE_ENV === 'production') {\r\n    // 1. 检查是否通过正式域名访问（通常是Nginx代理）\r\n    if (window.location.hostname === 'diaodu.eu.org' || \r\n        window.location.hostname.includes('yourdomain.com') ||\r\n        // 添加其他可能的正式域名\r\n        !window.location.hostname.match(/^\\d+\\.\\d+\\.\\d+\\.\\d+$/)) {\r\n        // 如果是通过域名访问（而非IP），假定是通过Nginx配置了反向代理\r\n        console.log('使用Nginx代理模式 (域名访问)');\r\n        return '';\r\n    } else {\r\n        // 2. 如果是通过IP直接访问（通常是PM2启动的静态服务）\r\n        // 使用完整URL，包含服务器IP和后端端口\r\n        const serverPort = '5000'; // 服务器端口\r\n        const baseUrl = `http://${window.location.hostname}:${serverPort}`;\r\n        console.log('使用PM2模式 (IP直接访问):', baseUrl);\r\n        return baseUrl;\r\n    }\r\n  } else {\r\n    // 开发环境默认使用代理\r\n    console.log('开发环境，使用代理');\r\n    return '';\r\n  }\r\n};\r\n\r\n/**\r\n * 获取完整的API URL\r\n * @param {string} path - API路径\r\n * @returns {string} 完整的API URL\r\n */\r\nexport const getFullApiUrl = (path) => {\r\n  const baseUrl = getApiBaseUrl();\r\n  // 确保路径以斜杠开头\r\n  const normalizedPath = path.startsWith('/') ? path : `/${path}`;\r\n  return `${baseUrl}${normalizedPath}`;\r\n};\r\n\r\n/**\r\n * 获取完整的文件URL\r\n * @param {string} fileUrl - 文件URL或路径\r\n * @returns {string} 完整的文件URL\r\n */\r\nexport const getFullFileUrl = (fileUrl) => {\r\n  // 如果已经是完整URL，直接返回\r\n  if (fileUrl && fileUrl.startsWith('http')) {\r\n    return fileUrl;\r\n  }\r\n  \r\n  // 确保fileUrl以斜杠开头\r\n  const normalizedFileUrl = fileUrl && !fileUrl.startsWith('/') ? `/${fileUrl}` : fileUrl;\r\n  \r\n  // 获取基础URL并拼接\r\n  const baseUrl = getApiBaseUrl();\r\n  return normalizedFileUrl ? `${baseUrl}${normalizedFileUrl}` : '';\r\n};\r\n\r\nexport default {\r\n  getApiBaseUrl,\r\n  getFullApiUrl,\r\n  getFullFileUrl\r\n}; ","import React, { useState, useEffect } from 'react';\nimport { Spin } from 'antd';\nimport mammoth from 'mammoth';\nimport { getFullFileUrl } from '../../utils/apiUtils'; // 导入API工具函数\n\nconst WordPreview = ({ fileUrl }) => {\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (fileUrl) {\n      setLoading(true);\n      setError(null);\n      \n      // 使用工具函数获取完整URL\n      const fullUrl = getFullFileUrl(fileUrl);\n      \n      // 直接在控制台输出调试信息\n      console.log(\"Word预览 - 原始URL:\", fileUrl);\n      console.log(\"Word预览 - 完整URL:\", fullUrl);\n      \n      // 获取认证token\n      const token = localStorage.getItem('token');\n      \n      fetch(fullUrl, {\n        headers: token ? {\n          'Authorization': `Bearer ${token}`\n        } : {}\n      })\n        .then(response => {\n          if (!response.ok) {\n            console.error('Word预览 - 服务器响应错误:', response.status, response.statusText);\n            throw new Error(`服务器错误: ${response.status}`);\n          }\n          // 查看实际的响应头\n          console.log('Word预览 - 响应头:', {\n            contentType: response.headers.get('content-type'),\n            contentLength: response.headers.get('content-length'),\n            contentDisposition: response.headers.get('content-disposition')\n          });\n          return response.arrayBuffer();\n        })\n        .then(arrayBuffer => {\n          if (!arrayBuffer || arrayBuffer.byteLength === 0) {\n            throw new Error('收到空的文件数据');\n          }\n          console.log(\"Word预览 - 成功获取文件数据，大小:\", arrayBuffer.byteLength, \"字节\");\n          \n          console.log(\"Word预览 - 开始转换Word文档\");\n          return mammoth.convertToHtml({ arrayBuffer })\n            .then(result => {\n              console.log(\"Word预览 - 转换成功\");\n              if (result.messages && result.messages.length > 0) {\n                console.log(\"Word预览 - 转换消息:\", result.messages);\n              }\n              setContent(result.value);\n              setLoading(false);\n            })\n            .catch(error => {\n              console.error('Word文档转换失败:', error);\n              setError('文档转换失败: ' + error.message);\n              setLoading(false);\n            });\n        })\n        .catch(error => {\n          console.error('获取Word文档失败:', error);\n          setError(`获取文档失败: ${error.message}`);\n          setLoading(false);\n        });\n    }\n  }, [fileUrl]);\n\n  if (loading) {\n    return <Spin size=\"large\" tip=\"正在处理Word文档...\" />;\n  }\n\n  if (error) {\n    return (\n      <div style={{ textAlign: 'center', color: 'red', padding: '20px' }}>\n        {error}\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className=\"word-preview-container\"\n      dangerouslySetInnerHTML={{ __html: content }}\n      style={{ \n        padding: '20px',\n        backgroundColor: 'white',\n        border: '1px solid #f0f0f0',\n        maxHeight: 'calc(100vh - 260px)',\n        overflowY: 'auto',\n        textAlign: 'left'\n      }}\n    />\n  );\n};\n\nexport default WordPreview; ","import React, { useState, useEffect } from 'react';\nimport { Spin, Alert, Typography, Card } from 'antd';\nimport { getFullFileUrl } from '../../utils/apiUtils'; // 导入API工具函数\n\nconst { Text } = Typography;\n\n/**\n * 文本文件预览组件\n * @param {string} fileUrl - 文件URL\n */\nconst TextPreview = ({ fileUrl }) => {\n  const [loading, setLoading] = useState(true);\n  const [content, setContent] = useState('');\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchTextContent = async () => {\n      try {\n        // 使用工具函数获取完整URL\n        const fullUrl = getFullFileUrl(fileUrl);\n        \n        console.log('TextPreview - 原始URL:', fileUrl);\n        console.log('TextPreview - 完整URL:', fullUrl);\n        setLoading(true);\n        \n        // 获取认证token\n        const token = localStorage.getItem('token');\n        \n        // 创建请求选项，添加认证头\n        const requestOptions = {\n          headers: token ? {\n            'Authorization': `Bearer ${token}`\n          } : {}\n        };\n        \n        // 发送请求获取文本内容\n        console.log('TextPreview - 发送请求，请求选项:', requestOptions);\n        const response = await fetch(fullUrl, requestOptions);\n        \n        if (!response.ok) {\n          console.error('TextPreview - 响应不成功:', response.status, response.statusText);\n          throw new Error(`无法获取文本内容，服务器返回: ${response.status}`);\n        }\n        \n        // 查看实际的响应头\n        console.log('TextPreview - 响应头:', {\n          contentType: response.headers.get('content-type'),\n          contentLength: response.headers.get('content-length'),\n          contentDisposition: response.headers.get('content-disposition')\n        });\n        \n        const text = await response.text();\n        console.log('TextPreview - 成功获取文本内容，长度:', text?.length || 0);\n        setContent(text);\n      } catch (err) {\n        console.error('TextPreview - 文本文件加载失败:', err);\n        setError(err.message || '加载文本内容时发生错误');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    if (fileUrl) {\n      fetchTextContent();\n    }\n  }, [fileUrl]);\n\n  if (loading) {\n    return (\n      <div style={{ width: '100%', height: '300px', display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n        <Spin tip=\"正在加载文本内容...\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert\n        message=\"加载文本失败\"\n        description={error}\n        type=\"error\"\n        showIcon\n      />\n    );\n  }\n\n  return (\n    <Card \n      style={{ \n        width: '100%', \n        height: 'calc(100vh - 260px)',\n        maxHeight: '70vh',\n        overflowY: 'auto',\n        textAlign: 'left'\n      }}\n      bodyStyle={{ padding: '16px', textAlign: 'left' }}\n    >\n      <pre style={{ \n        whiteSpace: 'pre-wrap',\n        wordBreak: 'break-word',\n        fontFamily: 'monospace',\n        fontSize: '14px',\n        margin: 0,\n        padding: 0,\n        textAlign: 'left',\n        display: 'block'\n      }}>\n        {content}\n      </pre>\n    </Card>\n  );\n};\n\nexport default TextPreview; ","import React, { useState, useEffect } from 'react';\nimport { Modal, Spin, message, Button, Space, Tooltip } from 'antd';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport { ZoomInOutlined, ZoomOutOutlined, UndoOutlined } from '@ant-design/icons';\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\nimport 'react-pdf/dist/esm/Page/TextLayer.css';\nimport WordPreview from '../WordPreview'; // 导入Word预览组件\nimport TextPreview from '../TextPreview'; // 导入Text预览组件\nimport { getFullFileUrl } from '../../utils/apiUtils'; // 导入API工具函数\n\n// 注释掉原来的 worker 导入方式\n// import pdfjsWorker from 'pdfjs-dist/build/pdf.worker.entry';\n\n// 设置PDF.js worker，使用 new URL 和 import.meta.url 的推荐方式\n// 这依赖于项目的构建系统 (如 Webpack 5+) 能够正确处理此模式\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  'pdfjs-dist/build/pdf.worker.min.js',\n  import.meta.url,\n).toString();\n\nconst FilePreview = ({ visible, onClose, filename }) => {\n    const [loading, setLoading] = useState(true);\n    const [fileType, setFileType] = useState(null);\n    const [fileUrl, setFileUrl] = useState(null);\n    const [numPages, setNumPages] = useState(null);\n    const [scale, setScale] = useState(1);\n    const baseWidth = 600;\n\n    // 缩放控制函数\n    const zoomIn = () => setScale(prevScale => Math.min(prevScale + 0.2, 3));\n    const zoomOut = () => setScale(prevScale => Math.max(prevScale - 0.2, 0.5));\n    const resetZoom = () => setScale(1);\n\n    // Handler for PDF load error\n    const onDocumentLoadError = (error) => {\n        console.error('React-PDF Document Load Error:', error);\n        message.error(`PDF加载失败: ${error.message}`);\n        // We can set an error state here if we want to display a more custom message in renderPreview\n    };\n\n    useEffect(() => {\n        // Reset states when modal becomes visible or filename changes\n        if (visible && filename) {\n            setLoading(true);\n            setFileType(null);\n            setFileUrl(null);\n            setNumPages(null);\n            \n            // 使用工具函数构建完整的预览URL\n            const previewUrl = getFullFileUrl(`/download/preview/${encodeURIComponent(filename)}`);\n            \n            console.log(\"FilePreview - 预览文件:\", filename);\n            console.log(\"FilePreview - 完整预览URL:\", previewUrl);\n            \n            // 获取认证token\n            const token = localStorage.getItem('token');\n            \n            fetch(previewUrl, {\n                headers: token ? {\n                    'Authorization': `Bearer ${token}`\n                } : {}\n            })\n                .then(response => {\n                    if (!response.ok) {\n                        throw new Error(`服务器错误: ${response.status} ${response.statusText}`);\n                    }\n                    const contentType = response.headers.get('content-type');\n                    setFileType(contentType);\n                    console.log(\"FilePreview - 文件类型:\", contentType);\n                    \n                    // 验证内容类型是否为JSON\n                    if (contentType && contentType.includes('application/json')) {\n                        // 如果是JSON类型，解析为JSON\n                        return response.json();\n                    }\n                    \n                    // 没有content-type或不是JSON类型，直接处理为二进制流\n                    setFileUrl(previewUrl);\n                    return null;\n                })\n                .then(data => {\n                    if (data && data.message) {\n                        // 服务器返回了错误消息\n                        message.info(data.message);\n                        setFileUrl(null);\n                    }\n                })\n                .catch(error => {\n                    console.error('预览文件出错:', error);\n                    message.error(`预览文件获取失败: ${error.message}`);\n                    setFileUrl(null);\n                })\n                .finally(() => {\n                    setLoading(false);\n                });\n        } else if (!visible) {\n            // Reset when modal is closed\n            setLoading(true);\n            setFileType(null);\n            setFileUrl(null);\n            setNumPages(null);\n        }\n    }, [visible, filename]);\n\n    const renderPreview = () => {\n        if (loading) {\n            return <Spin size=\"large\" tip=\"加载中...\" />;\n        }\n\n        if (!fileUrl && fileType === 'application/pdf') {\n             // If fileType is PDF but fileUrl is null (likely due to fetch error or explicit clear)\n             // The onLoadError in Document component will also show a message.\n             // This is a fallback message if fileUrl itself is the issue before Document tries to load.\n            return <div>PDF链接无效或加载失败。</div>;\n        }\n\n        if (!fileType || !fileUrl) { // Check if fileUrl is also available for supported types\n            // This message is for cases where fileType might be known, but URL is missing,\n            // or if fileType itself is null (e.g. initial state or fetch issue)\n            return <div>无法预览此文件或文件加载失败。</div>;\n        }\n\n        if (fileType.startsWith('image/')) {\n            return <img src={fileUrl} alt={filename || 'preview'} style={{ maxWidth: '100%', maxHeight: '600px' }} />;\n        }\n        \n        // 处理Word文档预览\n        if (fileType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || \n            fileType === 'application/msword') {\n            return <WordPreview fileUrl={fileUrl} />;\n        }\n\n        if (fileType === 'application/pdf') {\n            const currentWidth = Math.min(baseWidth, window.innerWidth * 0.8);\n            \n            // 获取token，创建带认证的请求选项\n            const token = localStorage.getItem('token');\n            \n            return (\n                <>\n                    <div style={{ \n                        position: 'sticky',\n                        top: 0,\n                        backgroundColor: 'white',\n                        padding: '10px',\n                        zIndex: 1,\n                        borderBottom: '1px solid #f0f0f0',\n                        marginBottom: '10px',\n                        width: '100%',\n                        display: 'flex',\n                        justifyContent: 'center'\n                    }}>\n                        <Space>\n                            <Tooltip title=\"缩小\">\n                                <Button \n                                    icon={<ZoomOutOutlined />} \n                                    onClick={zoomOut}\n                                    disabled={scale <= 0.5}\n                                />\n                            </Tooltip>\n                            <Tooltip title=\"重置缩放\">\n                                <Button \n                                    icon={<UndoOutlined />} \n                                    onClick={resetZoom}\n                                    disabled={scale === 1}\n                                >\n                                    {Math.round(scale * 100)}%\n                                </Button>\n                            </Tooltip>\n                            <Tooltip title=\"放大\">\n                                <Button \n                                    icon={<ZoomInOutlined />} \n                                    onClick={zoomIn}\n                                    disabled={scale >= 3}\n                                />\n                            </Tooltip>\n                        </Space>\n                    </div>\n                    <div style={{ \n                        width: '100%', \n                        height: 'calc(100vh - 260px)', \n                        maxHeight:'70vh', \n                        overflowY: 'auto',\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center'\n                    }}>\n                        <Document\n                            file={{\n                                url: fileUrl,\n                                httpHeaders: token ? { 'Authorization': `Bearer ${token}` } : undefined,\n                                withCredentials: !!token\n                            }}\n                            onLoadSuccess={({ numPages }) => {\n                                console.log(\"PDF加载成功，页数:\", numPages);\n                                setNumPages(numPages);\n                            }}\n                            onLoadError={(error) => {\n                                console.error(\"PDF加载错误:\", error);\n                                onDocumentLoadError(error);\n                            }}\n                            loading={<Spin size=\"large\" tip=\"正在加载PDF...\" />}\n                            options={{\n                                cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/cmaps/',\n                                cMapPacked: true,\n                                standardFontDataUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/standard_fonts/'\n                            }}\n                        >\n                            {numPages && Array.from(new Array(numPages), (el, index) => (\n                                <Page \n                                    key={`page_${index + 1}`} \n                                    pageNumber={index + 1} \n                                    width={currentWidth * scale}\n                                    renderTextLayer={false}\n                                    renderAnnotationLayer={false}\n                                    style={{ \n                                        marginBottom: '10px',\n                                        boxShadow: '0 2px 5px rgba(0,0,0,0.1)'\n                                    }}\n                                    error={(error) => {\n                                        console.error(\"Page渲染错误:\", error);\n                                        return (\n                                            <div>页面渲染错误: {error.message}</div>\n                                        );\n                                    }}\n                                />\n                            ))}\n                        </Document>\n                    </div>\n                </>\n            );\n        }\n\n        if (fileType.startsWith('text/')) {\n            // 使用TextPreview组件替代iframe\n            return <TextPreview fileUrl={fileUrl} />;\n        }\n\n        // Fallback for unsupported but fetched types (though server should send JSON for these)\n        return <div>此文件类型暂不支持直接预览。</div>;\n    };\n\n    return (\n        <Modal\n            title={filename ? `文件预览: ${filename}` : \"文件预览\"}\n            open={visible}\n            onCancel={onClose}\n            width={'80vw'} // Use viewport width for better responsiveness\n            style={{ top: 20 }} // Adjust modal position\n            footer={null} // No OK/Cancel buttons needed for a preview\n            destroyOnClose // Important to reset state and unmount children fully\n        >\n            <div style={{ textAlign: 'center', minHeight: '300px', padding: '10px' }}>\n                {renderPreview()}\n            </div>\n        </Modal>\n    );\n};\n\nexport default FilePreview; ","import React from 'react';\r\nimport { Descriptions, Tag } from 'antd';\r\nimport { \r\n  TagOutlined, \r\n  ClockCircleOutlined,\r\n  UserOutlined,\r\n  TeamOutlined\r\n} from '@ant-design/icons';\r\nimport { TYPE_COLORS, SUGGESTION_TYPES } from '../../constants/suggestions';\r\n\r\nconst MetadataSection = ({ suggestion, isMobile }) => {\r\n  const styles = {\r\n    container: {\r\n      padding: '12px 16px',\r\n      background: 'linear-gradient(to right, #f8f8f8, #ffffff)',\r\n      borderRadius: '8px',\r\n      marginBottom: '24px',\r\n      border: '1px solid #eaeaea',\r\n      boxShadow: '0 2px 5px rgba(0, 0, 0, 0.03)',\r\n    },\r\n    tagStyle: {\r\n      padding: '2px 8px', \r\n      borderRadius: '15px', \r\n      margin: 0,\r\n      fontWeight: 500\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '未知';\r\n    \r\n    const date = new Date(dateString);\r\n    return isMobile \r\n      ? `${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`\r\n      : date.toLocaleString();\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <Descriptions \r\n        column={isMobile ? 1 : 4}\r\n        size={isMobile ? \"small\" : \"default\"}\r\n        colon={false}\r\n        labelStyle={{ \r\n          width: isMobile ? '60px' : '70px',\r\n          color: '#666',\r\n          fontWeight: '500'\r\n        }}\r\n        contentStyle={{\r\n          color: '#333',\r\n        }}\r\n      >\r\n        <Descriptions.Item \r\n          label={\r\n            <span style={{ display: 'flex', alignItems: 'center' }}>\r\n              <TagOutlined style={{ color: '#1890ff', marginRight: '4px' }} />\r\n              类型\r\n            </span>\r\n          }\r\n        >\r\n          <Tag \r\n            color={TYPE_COLORS[suggestion.type] || 'default'}\r\n            style={styles.tagStyle}\r\n          >\r\n            {SUGGESTION_TYPES[suggestion.type] || suggestion.type}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item \r\n          label={\r\n            <span style={{ display: 'flex', alignItems: 'center' }}>\r\n              <ClockCircleOutlined style={{ color: '#722ed1', marginRight: '4px' }} />\r\n              时间\r\n            </span>\r\n          }\r\n        >\r\n          <Tag color=\"purple\" style={styles.tagStyle}>\r\n            {formatDate(suggestion.createdAt)}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item \r\n          label={\r\n            <span style={{ display: 'flex', alignItems: 'center' }}>\r\n              <UserOutlined style={{ color: '#1890ff', marginRight: '4px' }} />\r\n              提交人\r\n            </span>\r\n          }\r\n        >\r\n          <Tag color=\"blue\" style={styles.tagStyle}>\r\n            {suggestion.submitter?.name || '未知'}                 \r\n          </Tag>\r\n        </Descriptions.Item>\r\n        \r\n        <Descriptions.Item \r\n          label={\r\n            <span style={{ display: 'flex', alignItems: 'center' }}>\r\n              <TeamOutlined style={{ color: '#52c41a', marginRight: '4px' }} />\r\n              班组\r\n            </span>\r\n          }\r\n        >\r\n          <Tag color=\"green\" style={styles.tagStyle}>\r\n            {suggestion.team || '未指定'}\r\n          </Tag>\r\n        </Descriptions.Item>\r\n      </Descriptions>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MetadataSection; ","import React from 'react';\r\nimport { Divider } from 'antd';\r\n\r\nconst ContentSection = ({ title, content, isMobile }) => {\r\n  const styles = {\r\n    dividerStyle: {\r\n      margin: isMobile ? '16px 0' : '20px 0',\r\n      color: '#1890ff',\r\n      fontSize: isMobile ? '16px' : '18px'\r\n    },\r\n    contentBlockStyle: {\r\n      whiteSpace: 'pre-wrap',\r\n      padding: '20px',\r\n      borderRadius: '12px',\r\n      background: '#fafafa',\r\n      border: '1px solid #e8e8e8',\r\n      boxShadow: '0 2px 6px rgba(0, 0, 0, 0.03)',\r\n      marginBottom: '24px',\r\n      fontSize: '15px',\r\n      lineHeight: '1.8',\r\n      position: 'relative',\r\n      overflow: 'hidden'\r\n    },\r\n    highlightBar: {\r\n      position: 'absolute',\r\n      left: 0,\r\n      top: 0,\r\n      width: '4px',\r\n      height: '100%',\r\n      background: title === '建议内容' ? '#1890ff' : '#52c41a',\r\n      borderRadius: '4px 0 0 4px'\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Divider orientation=\"left\" style={styles.dividerStyle}>\r\n        <strong>{title}</strong>\r\n      </Divider>\r\n      <div style={styles.contentBlockStyle}>\r\n        <div style={styles.highlightBar}></div>\r\n        <div style={{ marginLeft: '10px' }}>{content}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ContentSection; ","import React from 'react';\nimport { Card, List, Button, Avatar, Typography, Divider } from 'antd';\nimport { DownloadOutlined, EyeOutlined, FileTextOutlined, FileExcelOutlined, FilePdfOutlined, FileImageOutlined, FileWordOutlined } from '@ant-design/icons';\n\nconst { Text } = Typography;\n\nconst AttachmentSection = ({ attachments, handleDownloadAttachment, handlePreviewFile, isMobile, fixEncodingIssues }) => {\n  const styles = {\n    dividerStyle: {\n      margin: isMobile ? '16px 0' : '20px 0',\n      color: '#1890ff',\n      fontSize: isMobile ? '16px' : '18px'\n    },\n    cardStyle: {\n      borderRadius: '12px',\n      marginBottom: '16px',\n      boxShadow: '0 1px 4px rgba(0, 0, 0, 0.05)'\n    },\n    listItemStyle: {\n      padding: isMobile ? '8px 0' : '12px 0',\n      transition: 'all 0.3s ease',\n      ':hover': {\n        background: '#f0f5ff'\n      }\n    },\n    buttonStyle: (type, isMobileProp) => ({\n      borderRadius: '16px',\n      boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n      border: 0,\n      transition: 'all 0.3s',\n      padding: isMobileProp ? '0 6px' : '0 12px',\n      height: '28px',\n      minWidth: isMobileProp ? '28px' : undefined,\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    })\n  };\n\n  const getFileIcon = (filename) => {\n    if (!filename) return <FileTextOutlined />;\n    \n    const ext = filename.split('.').pop().toLowerCase();\n    \n    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'].includes(ext)) {\n      return <FileImageOutlined style={{ color: '#13c2c2' }} />;\n    } else if (['pdf'].includes(ext)) {\n      return <FilePdfOutlined style={{ color: '#f5222d' }} />;\n    } else if (['doc', 'docx'].includes(ext)) {\n      return <FileWordOutlined style={{ color: '#1890ff' }} />;\n    } else if (['xls', 'xlsx', 'csv'].includes(ext)) {\n      return <FileExcelOutlined style={{ color: '#52c41a' }} />;\n    } else {\n      return <FileTextOutlined style={{ color: '#fa8c16' }} />;\n    }\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return '未知时间';\n    \n    const date = new Date(dateString);\n    return isMobile \n      ? date.toLocaleDateString()\n      : date.toLocaleString();\n  };\n\n  return (\n    <>\n      <Divider orientation=\"left\" style={styles.dividerStyle}>\n        <DownloadOutlined /> <strong>附件</strong>\n      </Divider>\n      <Card \n        type=\"inner\" \n        style={styles.cardStyle}\n        bodyStyle={{ padding: isMobile ? '12px' : '16px' }}\n      >\n        <List\n          itemLayout={isMobile ? \"vertical\" : \"horizontal\"}\n          dataSource={attachments}\n          renderItem={attachment => (\n            <List.Item\n              style={styles.listItemStyle}\n              actions={[\n                <Button \n                  type=\"primary\"\n                  ghost\n                  size=\"small\"\n                  icon={<DownloadOutlined />} \n                  onClick={() => handleDownloadAttachment(attachment)}\n                  style={styles.buttonStyle('download', isMobile)}\n                >\n                  {isMobile ? null : '下载'}\n                </Button>,\n                <Button \n                  type=\"default\"\n                  size=\"small\"\n                  icon={<EyeOutlined />} \n                  onClick={() => handlePreviewFile(attachment)}\n                  style={{...styles.buttonStyle('preview', isMobile), marginLeft: '8px'}}\n                >\n                  {isMobile ? null : '预览'}\n                </Button>\n              ]}\n            >\n              <List.Item.Meta\n                avatar={\n                  <Avatar \n                    shape=\"square\" \n                    icon={getFileIcon(attachment.originalname)} \n                    size={isMobile ? \"default\" : \"large\"}\n                    style={{ backgroundColor: '#f5f5f5' }}\n                  />\n                }\n                title={\n                  <Text \n                    style={{ \n                      fontSize: isMobile ? '14px' : '15px',\n                      fontWeight: 500\n                    }} \n                    ellipsis={{ tooltip: attachment.originalname ? fixEncodingIssues(attachment.originalname) : '未知文件名' }}\n                  >\n                    {attachment.originalname ? fixEncodingIssues(attachment.originalname) : '未知文件名'}\n                  </Text>\n                }\n                description={`上传于 ${formatDate(attachment.uploadedAt)}`}\n              />\n            </List.Item>\n          )}\n        />\n      </Card>\n    </>\n  );\n};\n\nexport default AttachmentSection; ","import React from 'react';\r\nimport { Card, Tag, Typography, Space, Badge } from 'antd';\r\nimport { CheckCircleOutlined, ClockCircleOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\r\nimport { STATUS_COLORS, SUGGESTION_STATUS } from '../../constants/suggestions';\r\nimport { getStatusDisplayText, getStatusColor } from '../../utils/statusUtils';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst StatusSection = ({ currentStatus, implementation, scoring, isMobile }) => {\r\n  const styles = {\r\n    card: {\r\n      borderRadius: '10px',\r\n      marginBottom: '16px'\r\n    },\r\n    tagStyle: {\r\n      padding: '3px 10px',\r\n      borderRadius: '12px',\r\n      marginLeft: '8px',\r\n      fontSize: '14px',\r\n      fontWeight: '500'\r\n    },\r\n    badgeStyle: (status) => {\r\n      const isApproved = status === 'APPROVED';\r\n      const isRejected = status === 'REJECTED';\r\n      \r\n      return {\r\n        display: 'block',\r\n        padding: '4px 8px 4px 4px',\r\n        background: isApproved ? '#f6ffed' : isRejected ? '#fff2f0' : '#e6f7ff',\r\n        border: `1px solid ${isApproved ? '#b7eb8f' : isRejected ? '#ffccc7' : '#91d5ff'}`,\r\n        borderRadius: '16px',\r\n        marginBottom: '16px'\r\n      };\r\n    },\r\n    badgeDot: (status) => {\r\n      const isApproved = status === 'APPROVED';\r\n      const isRejected = status === 'REJECTED';\r\n      \r\n      return {\r\n        display: 'inline-block',\r\n        width: '8px',\r\n        height: '8px',\r\n        borderRadius: '50%',\r\n        background: isApproved ? '#52c41a' : isRejected ? '#f5222d' : '#1890ff',\r\n        marginRight: '8px'\r\n      };\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    if (status === 'APPROVED') return <CheckCircleOutlined style={{ color: '#52c41a' }} />;\r\n    if (status === 'REJECTED') return <ExclamationCircleOutlined style={{ color: '#f5222d' }} />;\r\n    return <ClockCircleOutlined style={{ color: '#1890ff' }} />;\r\n  };\r\n\r\n  return (\r\n    <Card \r\n      title={\r\n        <div style={{ display: 'flex', alignItems: 'center' }}>\r\n          <span style={{ marginRight: '8px' }}>状态信息</span>\r\n          <Badge status={STATUS_COLORS[currentStatus] === 'success' ? 'success' : \r\n                         STATUS_COLORS[currentStatus] === 'error' ? 'error' : \r\n                         STATUS_COLORS[currentStatus] === 'warning' ? 'warning' : 'processing'} />\r\n        </div>\r\n      }\r\n      type=\"inner\" \r\n      style={styles.card}\r\n      bodyStyle={{ padding: isMobile ? '16px' : '20px' }}\r\n    >\r\n      <Space direction=\"vertical\" style={{ width: '100%' }}>\r\n        <div>\r\n          <div style={styles.badgeStyle(currentStatus)}>\r\n            <span style={styles.badgeDot(currentStatus)}></span>\r\n            <Text strong>当前状态: </Text>\r\n            <Text style={{ fontWeight: '500' }}>\r\n              {SUGGESTION_STATUS[currentStatus] || currentStatus}\r\n            </Text>\r\n          </div>\r\n\r\n          {implementation && (\r\n            <div style={styles.badgeStyle(implementation.status)}>\r\n              <span style={styles.badgeDot(implementation.status)}></span>\r\n              <Text strong>实施状态: </Text>\r\n              <Text style={{ fontWeight: '500' }}>\r\n                {getStatusDisplayText(implementation.status || 'NOT_STARTED', 'implementation')}\r\n              </Text>\r\n            </div>\r\n          )}\r\n\r\n          {scoring && scoring.score !== undefined && (\r\n            <div style={{ marginTop: '16px' }}>\r\n              <Text strong>建议评分: </Text>\r\n              <Tag \r\n                color=\"gold\"\r\n                style={styles.tagStyle}\r\n              >\r\n                {typeof scoring.score === 'number' ? scoring.score.toFixed(1) : '-'}\r\n              </Tag>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </Space>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default StatusSection; ","import React from 'react';\r\nimport { Card, Row, Col, Tag, Typography, Timeline, Avatar } from 'antd';\r\nimport { CheckCircleOutlined, CloseCircleOutlined, UserOutlined, CalendarOutlined, CommentOutlined } from '@ant-design/icons';\r\n\r\nconst { Text, Paragraph } = Typography;\r\n\r\nconst ReviewSection = ({ review, type, isMobile }) => {\r\n  const isApproved = review.result === 'APPROVED';\r\n  \r\n  const styles = {\r\n    card: {\r\n      borderRadius: '10px',\r\n      marginBottom: '16px',\r\n      borderLeft: `3px solid ${isApproved ? '#52c41a' : '#f5222d'}`\r\n    },\r\n    header: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      marginBottom: '16px'\r\n    },\r\n    icon: {\r\n      fontSize: '18px',\r\n      marginRight: '8px',\r\n      color: isApproved ? '#52c41a' : '#f5222d'\r\n    },\r\n    title: {\r\n      margin: 0,\r\n      fontWeight: 'bold'\r\n    },\r\n    resultTag: {\r\n      borderRadius: '12px',\r\n      padding: '2px 10px',\r\n      fontWeight: 'bold',\r\n      marginLeft: '8px'\r\n    },\r\n    infoItem: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      marginBottom: '8px'\r\n    },\r\n    infoIcon: {\r\n      marginRight: '8px',\r\n      color: '#1890ff'\r\n    },\r\n    infoLabel: {\r\n      fontWeight: 'bold',\r\n      marginRight: '8px'\r\n    },\r\n    commentBox: {\r\n      padding: '12px 16px',\r\n      background: '#f9f9f9',\r\n      borderRadius: '8px',\r\n      marginTop: '12px',\r\n      border: '1px solid #e8e8e8'\r\n    }\r\n  };\r\n\r\n  const reviewTime = review.reviewedAt ? new Date(review.reviewedAt).toLocaleString() : '未知';\r\n  \r\n  return (\r\n    <Card\r\n      type=\"inner\"\r\n      style={styles.card}\r\n      bodyStyle={{ padding: isMobile ? '16px' : '20px' }}\r\n    >\r\n      <div style={styles.header}>\r\n        {isApproved ? \r\n          <CheckCircleOutlined style={styles.icon} /> : \r\n          <CloseCircleOutlined style={styles.icon} />\r\n        }\r\n        <h3 style={styles.title}>{type === 'first' ? '一级审核' : '二级审核'}</h3>\r\n        <Tag \r\n          color={isApproved ? 'success' : 'error'}\r\n          style={styles.resultTag}\r\n        >\r\n          {isApproved ? '通过' : '拒绝'}\r\n        </Tag>\r\n      </div>\r\n\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12}>\r\n          <div style={styles.infoItem}>\r\n            <UserOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>审核人:</span>\r\n            <Avatar \r\n              size=\"small\" \r\n              style={{ marginRight: '8px', backgroundColor: '#1890ff' }}\r\n            >\r\n              {review.reviewer?.name ? review.reviewer.name.charAt(0) : '?'}\r\n            </Avatar>\r\n            <Text>{review.reviewer?.name || '未知'}</Text>\r\n          </div>\r\n        </Col>\r\n        <Col xs={24} sm={12}>\r\n          <div style={styles.infoItem}>\r\n            <CalendarOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>审核时间:</span>\r\n            <Text>{reviewTime}</Text>\r\n          </div>\r\n        </Col>\r\n        <Col span={24}>\r\n          <div style={styles.infoItem}>\r\n            <CommentOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>审核意见:</span>\r\n          </div>\r\n          <div style={styles.commentBox}>\r\n            {review.comments ? \r\n              <Paragraph style={{ margin: 0 }}>{review.comments}</Paragraph> : \r\n              <Text type=\"secondary\">无审核意见</Text>\r\n            }\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ReviewSection; ","import React from 'react';\r\nimport { Card, Row, Col, Tag, Typography, Timeline, Avatar } from 'antd';\r\nimport { StarOutlined, UserOutlined, TeamOutlined, CalendarOutlined } from '@ant-design/icons';\r\n\r\nconst { Text } = Typography;\r\n\r\nconst ScoringSection = ({ scoring, isMobile }) => {\r\n  if (!scoring || scoring.score === undefined) return null;\r\n  \r\n  const styles = {\r\n    card: {\r\n      borderRadius: '10px',\r\n      marginBottom: '16px',\r\n      borderLeft: '3px solid #faad14'\r\n    },\r\n    header: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      marginBottom: '16px'\r\n    },\r\n    icon: {\r\n      fontSize: '18px',\r\n      marginRight: '8px',\r\n      color: '#faad14'\r\n    },\r\n    title: {\r\n      margin: 0,\r\n      fontWeight: 'bold'\r\n    },\r\n    scoreTag: {\r\n      borderRadius: '12px',\r\n      padding: '2px 10px',\r\n      fontWeight: 'bold',\r\n      fontSize: '14px',\r\n      marginLeft: '8px'\r\n    },\r\n    infoItem: {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      marginBottom: '12px'\r\n    },\r\n    infoIcon: {\r\n      marginRight: '8px',\r\n      color: '#1890ff'\r\n    },\r\n    infoLabel: {\r\n      fontWeight: 'bold',\r\n      marginRight: '8px'\r\n    },\r\n    timelineItem: {\r\n      padding: '8px 0'\r\n    },\r\n    historyScore: {\r\n      fontWeight: 'bold',\r\n      fontSize: '16px',\r\n      color: '#faad14',\r\n      marginLeft: '8px'\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return '未知';\r\n    return new Date(dateString).toLocaleString();\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      type=\"inner\"\r\n      style={styles.card}\r\n      bodyStyle={{ padding: isMobile ? '16px' : '20px' }}\r\n    >\r\n      <div style={styles.header}>\r\n        <StarOutlined style={styles.icon} />\r\n        <h3 style={styles.title}>建议评分</h3>\r\n        <Tag \r\n          color=\"gold\"\r\n          style={styles.scoreTag}\r\n        >\r\n          {typeof scoring.score === 'number' ? scoring.score.toFixed(1) : '-'}\r\n        </Tag>\r\n      </div>\r\n\r\n      <Row gutter={[16, 16]}>\r\n        <Col xs={24} sm={12}>\r\n          <div style={styles.infoItem}>\r\n            <UserOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>评分人:</span>\r\n            <Avatar \r\n              size=\"small\" \r\n              style={{ marginRight: '8px', backgroundColor: '#faad14' }}\r\n            >\r\n              {scoring.scorer?.name ? scoring.scorer.name.charAt(0) : '?'}\r\n            </Avatar>\r\n            <Text>{scoring.scorer?.name || '未知'}</Text>\r\n          </div>\r\n        </Col>\r\n        \r\n        <Col xs={24} sm={12}>\r\n          <div style={styles.infoItem}>\r\n            <TeamOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>角色:</span>\r\n            <Tag color=\"blue\">\r\n              {scoring.scorer?.role || scoring.scorerRole || '未知角色'}\r\n            </Tag>\r\n          </div>\r\n        </Col>\r\n        \r\n        <Col xs={24}>\r\n          <div style={styles.infoItem}>\r\n            <CalendarOutlined style={styles.infoIcon} />\r\n            <span style={styles.infoLabel}>评分时间:</span>\r\n            <Text>{formatDate(scoring.scoredAt)}</Text>\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      \r\n      {scoring.history && scoring.history.length > 0 && (\r\n        <>\r\n          <div style={{ marginTop: '16px', marginBottom: '8px', fontWeight: 'bold' }}>评分历史</div>\r\n          <Timeline style={{ marginTop: 12 }}>\r\n            {scoring.history.map((record, index) => (\r\n              <Timeline.Item \r\n                key={index} \r\n                color=\"gold\" \r\n                dot={<StarOutlined style={{ fontSize: '16px' }} />}\r\n              >\r\n                <div style={styles.timelineItem}>\r\n                  <div>\r\n                    <Avatar \r\n                      size=\"small\" \r\n                      style={{ marginRight: '8px', backgroundColor: '#1890ff' }}\r\n                    >\r\n                      {record.scorer?.name ? record.scorer.name.charAt(0) : '?'}\r\n                    </Avatar>\r\n                    <Text strong>{record.scorer?.name || '未知用户'}</Text>\r\n                    <Tag color=\"blue\" style={{ margin: '0 8px' }}>\r\n                      {record.scorer?.role || record.scorerRole || '未知角色'}\r\n                    </Tag>\r\n                  </div>\r\n                  <div style={{ marginTop: '4px', marginLeft: '28px', color: '#888' }}>\r\n                    {formatDate(record.scoredAt)} \r\n                    评分为 <span style={styles.historyScore}>\r\n                      {typeof record.score === 'number' ? record.score.toFixed(1) : '?'}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </Timeline.Item>\r\n            ))}\r\n          </Timeline>\r\n        </>\r\n      )}\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default ScoringSection; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport {\n  Card,\n  Typography,\n  Space,\n  Tag,\n  Button,\n  Descriptions,\n  Timeline,\n  Spin,\n  Modal,\n  Form,\n  Input,\n  message,\n  Divider,\n  Alert,\n  Popconfirm,\n  List,\n  Comment,\n  Avatar,\n  Radio,\n  Row,\n  Col,\n  Badge,\n  Select,\n  DatePicker,\n  Tooltip\n} from 'antd';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  EditOutlined, \n  RollbackOutlined, \n  CheckCircleOutlined, \n  CloseCircleOutlined,\n  CommentOutlined,\n  FileTextOutlined,\n  HistoryOutlined,\n  DownloadOutlined,\n  TagOutlined,\n  UserOutlined,\n  TeamOutlined,\n  ClockCircleOutlined,\n  DeleteOutlined,\n  ExclamationCircleOutlined,\n  StarOutlined,\n  EyeOutlined\n} from '@ant-design/icons';\nimport { suggestionService } from '../../services/suggestionService';\nimport { authService } from '../../services/authService';\nimport { SUGGESTION_TYPES, SUGGESTION_STATUS, STATUS_COLORS, TYPE_COLORS, IMPLEMENTATION_STATUS } from '../../constants/suggestions';\nimport { getStatusDisplayText, getStatusColor } from '../../utils/statusUtils';\nimport { getCurrentStatus } from '../../utils/suggestionUtils';\nimport moment from 'moment';\nimport FilePreview from '../../components/FilePreview';\n\n// Import the new components\nimport {\n  MetadataSection,\n  ContentSection,\n  AttachmentSection,\n  StatusSection,\n  ReviewSection,\n  ScoringSection\n} from '../../components/SuggestionDetail';\n\nconst { Title, Text, Paragraph } = Typography;\nconst { TextArea } = Input;\nconst { confirm } = Modal;\nconst { Option } = Select;\n\n// 添加一个辅助函数，尝试修复乱码的文件名\nconst fixEncodingIssues = (text) => {\n  try {\n    // 尝试检测乱码的中文文件名\n    // 乱码字符通常有一些特征，如è®³å¤ç®¡ç这样的组合\n    if (/[èéêëàáâãäåæçìíîïòóôõøùúûü]/.test(text)) {\n      // 尝试将错误编码的字符重新编码为UTF-8\n      // 先转换为ISO-8859-1，再转换为UTF-8\n      return decodeURIComponent(escape(text));\n    }\n    \n    // 如果没有检测到乱码特征，则直接返回原始文本\n    return text;\n  } catch (error) {\n    console.error('修复文件名编码错误:', error);\n    return text; // 如果修复失败，返回原始文本\n  }\n};\n\nconst SuggestionDetail = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const [suggestion, setSuggestion] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [commentModalVisible, setCommentModalVisible] = useState(false);\n  const [editModalVisible, setEditModalVisible] = useState(false);\n  const [firstReviewModalVisible, setFirstReviewModalVisible] = useState(false);\n  const [secondReviewModalVisible, setSecondReviewModalVisible] = useState(false);\n  const [scoreModalVisible, setScoreModalVisible] = useState(false);\n  const [commentForm] = Form.useForm();\n  const [editForm] = Form.useForm();\n  const [firstReviewForm] = Form.useForm();\n  const [secondReviewForm] = Form.useForm();\n  const [scoreForm] = Form.useForm();\n  const [submitting, setSubmitting] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [previewVisible, setPreviewVisible] = useState(false);\n  const [previewFile, setPreviewFile] = useState(null);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  const [filePreviewUrl, setFilePreviewUrl] = useState('');\n  const [fileType, setFileType] = useState('');\n  const [isRejectModalVisible, setIsRejectModalVisible] = useState(false);\n  \n  // Main styles for cards and layout\n  const cardStyles = {\n    mainCard: {\n      borderRadius: '8px', \n      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.05)',\n      overflow: 'hidden'\n    },\n    contentCard: {\n      borderRadius: '8px',\n      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.05)',\n      height: '100%'\n    },\n    cardBody: {\n      padding: isMobile ? '16px' : '24px'\n    }\n  };\n  \n  // 添加媒体查询检测，优化性能\n  useEffect(() => {\n    const handleResizeInternal = () => {\n      const newIsMobile = window.innerWidth <= 768;\n      if (newIsMobile !== isMobile) {\n        setIsMobile(newIsMobile);\n      }\n    };\n    \n    let resizeTimer;\n    const debouncedResize = () => {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(handleResizeInternal, 100);\n    };\n    \n    window.addEventListener('resize', debouncedResize);\n    return () => {\n      window.removeEventListener('resize', debouncedResize);\n      clearTimeout(resizeTimer);\n    };\n  }, [isMobile]);\n  \n  // 判断是否是值班主任\n  const isSupervisor = useMemo(() => currentUser?.role === '值班主任', [currentUser]);\n  \n  // 判断是否是管理人员\n  const isAdmin = useMemo(() => currentUser?.role === '安全科管理人员' || \n                 currentUser?.role === '运行科管理人员' || \n                 currentUser?.role === '部门经理', [currentUser]);\n                 \n  const isDepartmentManager = useMemo(() => currentUser?.role === '部门经理', [currentUser]);\n  const isSafetyAdmin = useMemo(() => currentUser?.role === '安全科管理人员', [currentUser]);\n  const isOperationAdmin = useMemo(() => currentUser?.role === '运行科管理人员', [currentUser]);\n  \n  // 添加 isTeamMatch 的定义\n  const isTeamMatch = useMemo(() => currentUser?.team === suggestion?.team || \n                     currentUser?.team === suggestion?.submitter?.team, [currentUser, suggestion]);\n  \n  // 修改检查状态的逻辑，使用getCurrentStatus函数\n  const currentStatus = useMemo(() => suggestion ? getCurrentStatus(suggestion) : '', [suggestion]);\n  const isPendingFirstReview = useMemo(() => currentStatus === 'PENDING_FIRST_REVIEW', [currentStatus]);\n  const isPendingSecondReview = useMemo(() => currentStatus === 'PENDING_SECOND_REVIEW', [currentStatus]);\n  \n  // 判断是否可以进行一级审核 - 是值班主任且班组匹配，或部门经理\n  const canFirstReview = useMemo(() => ((isSupervisor && isTeamMatch) || isDepartmentManager) && \n                        isPendingFirstReview, [isSupervisor, isTeamMatch, isDepartmentManager, isPendingFirstReview]);\n\n  // 判断是否可以进行二级审核\n  const isSafetyType = useMemo(() => suggestion?.type === 'SAFETY' || suggestion?.type === '安全管理', [suggestion]);\n  \n  const canSecondReview = useMemo(() => (\n    (isSafetyAdmin && isSafetyType) || \n    (isOperationAdmin && !isSafetyType) || \n    isDepartmentManager\n  ) && isPendingSecondReview, [isSafetyAdmin, isSafetyType, isOperationAdmin, isDepartmentManager, isPendingSecondReview]);\n\n  // 更新评分权限逻辑：部门经理可评所有建议，安全科只评安全类，运行科只评非安全类\n  const canScore = useMemo(() => isDepartmentManager || \n                  (currentUser?.role === '安全科管理人员' && isSafetyType) || \n                  (currentUser?.role === '运行科管理人员' && !isSafetyType), [currentUser, isDepartmentManager, isSafetyType]);\n\n  // 新增：判断评分按钮是否应该显示 - 修正对中文状态的兼容\n  const shouldShowScoreButton = useMemo(() => canScore && currentStatus === 'APPROVED', [canScore, currentStatus]);\n\n  // 获取建议详情\n  const fetchSuggestionDetail = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await suggestionService.getSuggestionById(id);\n      setSuggestion(response.data);\n    } catch (error) {\n      message.error('获取建议详情失败');\n    } finally {\n      setLoading(false);\n    }\n  }, [id]);\n\n  // 获取当前用户信息\n  useEffect(() => {\n    const fetchCurrentUser = async () => {\n      try {\n        const user = await authService.getCurrentUser();\n        if (!user) {\n          message.error('请先登录后再访问此页面');\n          navigate('/login');\n          return;\n        }\n        setCurrentUser(user);\n      } catch (error) {\n        message.error('获取用户信息失败');\n        navigate('/login');\n      }\n    };\n    \n    fetchCurrentUser();\n  }, [navigate]);\n\n  useEffect(() => {\n    fetchSuggestionDetail();\n  }, [fetchSuggestionDetail]);\n\n  // 添加评论\n  const handleAddComment = useCallback(async (values) => {\n    try {\n      setSubmitting(true);\n      await suggestionService.addComment(id, values.content);\n      message.success('评论添加成功');\n      commentForm.resetFields();\n      setCommentModalVisible(false);\n      fetchSuggestionDetail();\n    } catch (error) {\n      message.error('添加评论失败');\n    } finally {\n      setSubmitting(false);\n    }\n  }, []);\n\n  // 修改建议\n  const handleEdit = async (values) => {\n    try {\n      setSubmitting(true);\n      await suggestionService.updateSuggestion(id, {\n        title: values.title,\n        type: values.type,\n        content: values.content,\n        expectedBenefit: values.expectedBenefit,\n        reason: values.reason\n      });\n      message.success('建议修改成功');\n      editForm.resetFields();\n      setEditModalVisible(false);\n      fetchSuggestionDetail();\n    } catch (error) {\n      console.error('修改建议失败:', error);\n      message.error('修改建议失败');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // 下载附件\n  const handleDownloadAttachment = useCallback(async (attachment) => {\n    const baseUrl = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n    const token = localStorage.getItem('token');\n    \n    // 添加时间戳参数来避免缓存\n    const timestamp = new Date().getTime();\n    const url = `${baseUrl}/download/${attachment.filename}?originalname=${encodeURIComponent(attachment.originalname)}&t=${timestamp}`;\n    \n    try {\n      // 创建一个隐藏的a标签，模拟点击下载\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      // 不使用download属性，让浏览器根据Content-Disposition头处理\n      \n      // 如果有token，添加到URL或使用fetch API\n      if (token) {\n        // 使用fetch API进行下载，可以添加认证头\n        fetch(url, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        })\n        .then(response => {\n          if (!response.ok) {\n            throw new Error(`下载失败: ${response.status} ${response.statusText}`);\n          }\n          return response.blob();\n        })\n        .then(blob => {\n          // 使用URL.createObjectURL创建临时URL\n          const blobUrl = window.URL.createObjectURL(blob);\n          a.href = blobUrl;\n          a.download = attachment.originalname;\n          document.body.appendChild(a);\n          a.click();\n          // 清理\n          setTimeout(() => {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(blobUrl);\n          }, 100);\n        })\n        .catch(error => {\n          console.error('下载附件失败:', error);\n          message.error('下载附件失败，请稍后重试');\n        });\n      } else {\n        // 如果没有token，直接使用链接下载（不推荐，因为已添加了认证）\n        a.href = url;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      }\n      \n      // 记录下载操作\n      console.log('下载附件:', {\n        文件名: attachment.originalname,\n        编码后: encodeURIComponent(attachment.originalname),\n        URL: url\n      });\n    } catch (error) {\n      // console.error('下载附件失败:', error);\n      message.error('下载附件失败，请稍后重试');\n    }\n  }, []);\n\n  // 一级审核\n  const handleFirstReview = async (values) => {\n    try {\n      setSubmitting(true);\n      console.log('提交一级审核:', {\n        建议ID: id,\n        审核人: currentUser?.name,\n        审核人角色: currentUser?.role,\n        审核人班组: currentUser?.team,\n        审核结果: values.result === 'approve' ? '通过' : '拒绝',\n        审核意见: values.comment\n      });\n      \n      const reviewData = {\n        suggestionId: id,\n        reviewType: 'first',\n        result: values.result,\n        comment: values.comment,\n        reviewerId: currentUser?._id\n      };\n      \n      await suggestionService.submitReview(reviewData);\n      message.success('一级审核完成');\n      firstReviewForm.resetFields();\n      setFirstReviewModalVisible(false);\n      fetchSuggestionDetail();\n      \n      // 如果从审核列表页面进入，则返回审核列表\n      if (window.history.length > 1) {\n        setTimeout(() => {\n          navigate('/suggestions/review');\n        }, 1500);\n      }\n    } catch (error) {\n      console.error('一级审核失败:', error);\n      message.error('一级审核失败: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // 二级审核\n  const handleSecondReview = async (values) => {\n    try {\n      setSubmitting(true);\n      console.log('提交二级审核, 参数:', {\n        id,\n        result: values.result,\n        comment: values.comment\n      });\n      \n      const reviewData = {\n        suggestionId: id,\n        reviewType: 'second',\n        result: values.result,\n        comment: values.comment,\n        reviewerId: currentUser?._id\n      };\n      \n      await suggestionService.submitReview(reviewData);\n      message.success('二级审核完成');\n      secondReviewForm.resetFields();\n      setSecondReviewModalVisible(false);\n      fetchSuggestionDetail();\n      \n      // 如果从审核列表页面进入，则返回审核列表\n      if (window.history.length > 1) {\n        setTimeout(() => {\n          navigate('/suggestions/review');\n        }, 1500);\n      }\n    } catch (error) {\n      console.error('二级审核失败:', error);\n      message.error('二级审核失败: ' + (error.response?.data?.message || error.message));\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // 删除建议处理函数\n  const handleDelete = useCallback(() => {\n    confirm({\n      title: '确认删除这条建议吗？',\n      icon: <ExclamationCircleOutlined />,\n      content: '',\n      okText: '确认删除',\n      okType: 'danger',\n      cancelText: '取消',\n      confirmLoading: isDeleting,\n      async onOk() {\n        setIsDeleting(true);\n        try {\n          // 调用 service 中的 deleteSuggestion\n          const result = await suggestionService.deleteSuggestion(id);\n          console.log('handleDelete 收到 Service Result:', result);\n          if (result.success) {\n            message.success('建议已成功删除');\n            // Navigate after success message is shown\n            setTimeout(() => {\n              navigate('/suggestions/list');\n            }, 1000);\n          } else {\n            message.error(result.message || '删除建议失败');\n          }\n        } catch (error) {\n          message.error('删除建议时发生错误');\n        } finally {\n          setIsDeleting(false);\n        }\n      },\n      onCancel() {\n        // console.log('取消删除'); // console.log removed\n      },\n    });\n  }, [id, navigate, isDeleting]);\n\n  // Add score submit handler\n  const handleScoreSubmit = async () => {\n    const values = await scoreForm.validateFields();\n    const scoreValue = parseFloat(values.score);\n    if (isNaN(scoreValue) || scoreValue < 0.5 || scoreValue > 5) {\n      message.error('请输入 0.5 到 5 之间的有效分数');\n      return;\n    }\n    await suggestionService.scoreSuggestion(id, scoreValue);\n    message.success('评分成功');\n    setScoreModalVisible(false);\n    fetchSuggestionDetail();\n  };\n\n  // 处理文件预览\n  const handlePreviewFile = (file) => {\n    setPreviewFile(file);\n    setPreviewVisible(true);\n  };\n\n  if (loading) {\n    return (\n      <div style={{ textAlign: 'center', padding: '50px' }}>\n        <Spin tip=\"加载建议详情...\" />\n      </div>\n    );\n  }\n\n  if (!suggestion) {\n    return (\n      <Card>\n        <Alert\n          message=\"建议不存在或已被删除\"\n          description=\"您查找的建议可能不存在或已被删除，请返回列表查看其他建议。\"\n          type=\"error\"\n          showIcon\n        />\n        <div style={{ marginTop: 16, textAlign: 'center' }}>\n          <Button type=\"primary\" onClick={() => navigate('/suggestions/list')}>\n            返回列表\n          </Button>\n        </div>\n      </Card>\n    );\n  }\n\n  const showEditModal = () => {\n    editForm.setFieldsValue({\n      title: suggestion.title,\n      content: suggestion.content,\n      expectedBenefit: suggestion.expectedBenefit,\n      type: suggestion.type\n    });\n    setEditModalVisible(true);\n  };\n\n  // 渲染操作按钮\n  const renderActionButtons = () => {\n    const actions = [];\n\n    // 提交评论按钮\n    actions.push(\n      <Button key=\"comment\" icon={<CommentOutlined />} onClick={() => setCommentModalVisible(true)}>\n        添加评论\n      </Button>\n    );\n\n    // 判断是否可以删除建议\n    const canDelete = isDepartmentManager || \n      (currentUser && \n       suggestion && \n       suggestion.submitter && \n       currentUser._id === suggestion.submitter._id && \n       (!suggestion.secondReview || suggestion.secondReview.result !== 'APPROVED'));\n\n    // 编辑按钮 (如果用户是提交者且状态为待一级审核)\n    if (currentUser && suggestion && suggestion.submitter && currentUser._id === suggestion.submitter._id && isPendingFirstReview) {\n      actions.push(\n        <Button key=\"edit\" icon={<EditOutlined />} onClick={showEditModal} style={{ marginLeft: 8 }}>\n          编辑建议\n        </Button>\n      );\n    }\n\n    // 一级审核按钮\n    if (canFirstReview) {\n      actions.push(\n        <Button key=\"firstReview\" type=\"primary\" icon={<CheckCircleOutlined />} onClick={() => setFirstReviewModalVisible(true)} style={{ marginLeft: 8 }}>\n          一级审核\n        </Button>\n      );\n    }\n\n    // 二级审核按钮\n    if (canSecondReview) {\n      actions.push(\n        <Button key=\"secondReview\" type=\"primary\" icon={<CheckCircleOutlined />} onClick={() => setSecondReviewModalVisible(true)} style={{ marginLeft: 8 }}>\n          二级审核\n        </Button>\n      );\n    }\n    \n    // 评分按钮 - 使用新的 shouldShowScoreButton 条件\n    if (shouldShowScoreButton) {\n      actions.push(\n        <Button key=\"score\" icon={<StarOutlined />} onClick={() => setScoreModalVisible(true)} style={{ marginLeft: 8 }}>\n          评分\n        </Button>\n      );\n    }\n\n    // 删除按钮 (部门经理或未通过二级审核的建议提交者可删除)\n    if (canDelete) {\n      actions.push(\n        <Popconfirm\n          key=\"delete\"\n          title=\"确定要删除此建议吗？\"\n          description=\"删除后将无法恢复，请谨慎操作！\"\n          icon={<ExclamationCircleOutlined style={{ color: 'red' }} />}\n          onConfirm={handleDelete}\n          okText=\"确定删除\"\n          cancelText=\"取消\"\n        >\n          <Button danger icon={<DeleteOutlined />} style={{ marginLeft: 8 }} loading={isDeleting}>\n            删除建议\n          </Button>\n        </Popconfirm>\n      );\n    }\n    \n    return actions.length > 0 ? actions : null;\n  };\n\n  return (\n    <div className=\"responsive-container\">\n      <Card \n        title={\n          isMobile ? (\n            <>\n              <div style={{ width: '100%' }}>\n                <Title level={4} style={{ margin: 0, wordBreak: 'break-word', whiteSpace: 'normal' }}>\n                  {suggestion.title}\n                </Title>\n              </div>\n              <div style={{\n                marginTop: '8px',\n                width: '100%',\n                display: 'flex',\n                flexWrap: 'wrap',\n                justifyContent: 'flex-start',\n                gap: '8px'\n              }}>\n                {renderActionButtons()}\n              </div>\n            </>\n          ) : (\n            <Row justify=\"space-between\" align=\"middle\">\n              <Col flex=\"auto\">\n                <Title level={4} style={{ margin: 0, wordBreak: 'break-word', whiteSpace: 'normal' }}>\n                  {suggestion.title}\n                </Title>\n              </Col>\n              <div style={{\n                marginLeft: 'auto',\n                // width: 'auto', // default for block/flex item not taking full width\n                display: 'flex',\n                flexWrap: 'wrap',\n                justifyContent: 'flex-end',\n                gap: '8px'\n              }}>\n                {renderActionButtons()}\n              </div>\n            </Row>\n          )\n        }\n        style={cardStyles.mainCard}\n        bodyStyle={cardStyles.cardBody}\n      >\n        <Row gutter={[isMobile ? 12 : 24, isMobile ? 16 : 24]} style={{ marginBottom: '20px' }}>\n          <Col xs={24} sm={24} md={16}>\n            <Card\n              title={<><FileTextOutlined style={{ marginRight: '8px' }} />建议详情</>}\n              style={cardStyles.contentCard}\n              bodyStyle={cardStyles.cardBody}\n            >\n              <MetadataSection suggestion={suggestion} isMobile={isMobile} />\n              \n              <ContentSection \n                title=\"建议内容\" \n                content={suggestion.content} \n                isMobile={isMobile} \n              />\n              \n              <ContentSection \n                title=\"预期效益\" \n                content={suggestion.expectedBenefit}\n                isMobile={isMobile} \n              />\n              \n              {suggestion.attachments && suggestion.attachments.length > 0 && (\n                <AttachmentSection \n                  attachments={suggestion.attachments}\n                  handleDownloadAttachment={handleDownloadAttachment}\n                  handlePreviewFile={handlePreviewFile}\n                  isMobile={isMobile}\n                  fixEncodingIssues={fixEncodingIssues}\n                />\n              )}\n            </Card>\n          </Col>\n\n          <Col xs={24} sm={24} md={8}>\n            <Card\n              title=\"跟进信息\"\n              style={cardStyles.contentCard}\n              bodyStyle={{ padding: isMobile ? '12px' : '16px' }}\n            >\n              <Space direction=\"vertical\" style={{ width: '100%' }} size={isMobile ? 12 : 16}>\n                <StatusSection \n                  currentStatus={currentStatus} \n                  implementation={suggestion.implementation}\n                  scoring={suggestion.scoring}\n                  isMobile={isMobile}\n                />\n                \n                {suggestion.firstReview && (\n                  <ReviewSection \n                    review={suggestion.firstReview} \n                    type=\"first\"\n                    isMobile={isMobile}\n                  />\n                )}\n                \n                {suggestion.secondReview && (\n                  <ReviewSection \n                    review={suggestion.secondReview} \n                    type=\"second\"\n                    isMobile={isMobile}\n                  />\n                )}\n                \n                {suggestion.scoring && suggestion.scoring.score !== undefined && (\n                  <ScoringSection \n                    scoring={suggestion.scoring}\n                    isMobile={isMobile}\n                  />\n                )}\n\n                {suggestion.comments && suggestion.comments.length > 0 && (\n                  <Card \n                    title={<><CommentOutlined /> 修改记录</>} \n                    type=\"inner\" \n                  >\n                    <Timeline>\n                      {suggestion.comments.map((comment, index) => (\n                        <Timeline.Item key={index} color=\"#1890ff\">\n                          <div style={{ \n                                padding: '12px 16px', \n                                background: '#f9f9f9', \n                                borderRadius: '6px',\n                                marginBottom: '8px'\n                              }}>\n                                <p>{comment.content}</p>\n                                <div style={{ textAlign: 'right', color: '#888', fontSize: '12px' }}>\n                                  {comment.createdAt ? new Date(comment.createdAt).toLocaleDateString() : ''}\n                                </div>\n                              </div>\n                        </Timeline.Item>\n                      ))}\n                    </Timeline>\n                  </Card>\n                )}\n\n                {suggestion.revisionHistory && suggestion.revisionHistory.length > 0 && (\n                  <Card \n                    title={<><HistoryOutlined /> 修改历史</>} \n                    type=\"inner\" \n                  >\n                    <Timeline>\n                      {suggestion.revisionHistory.map((revision, index) => (\n                        <Timeline.Item key={index} dot={<HistoryOutlined style={{ fontSize: '16px' }} />}>\n                          <div style={{ marginBottom: '8px' }}>\n                            <Text strong>{revision.modifiedBy?.name || '未知用户'}</Text> 于{' '}\n                            {revision.modifiedAt ? new Date(revision.modifiedAt).toLocaleString() : '未知时间'} \n                            修改了内容\n                          </div>\n                          <div style={{ \n                            padding: '8px 12px', \n                            background: '#f9f9f9', \n                            borderRadius: '4px' \n                          }}>\n                            修改原因: {revision.reason}\n                          </div>\n                        </Timeline.Item>\n                      ))}\n                    </Timeline>\n                  </Card>\n                )}\n\n                {suggestion.implementationRecords && suggestion.implementationRecords.length > 0 && (\n                  <Card \n                    title={<>实施记录</>} \n                    type=\"inner\" \n                  >\n                    <Timeline>\n                      {suggestion.implementationRecords.map((record, index) => (\n                        <Timeline.Item \n                          key={index} \n                          color={record.status === '已完成' ? 'green' : (record.status === '已拒绝' ? 'red' : 'blue')}\n                        >\n                          <div style={{ marginBottom: '8px' }}>\n                            <Text strong>{record.updatedBy?.name || '未知用户'}</Text> 于{' '}\n                            {record.updatedAt ? new Date(record.updatedAt).toLocaleString() : '未知时间'} \n                            将状态更新为 <Tag \n                              color={STATUS_COLORS[record.status] || 'default'}\n                              style={{ padding: '2px 8px', borderRadius: '4px' }}\n                            >\n                              {SUGGESTION_STATUS[record.status] || record.status}\n                            </Tag>\n                          </div>\n                          <div style={{ \n                            padding: '8px 12px', \n                            background: '#f9f9f9', \n                            borderRadius: '4px' \n                          }}>\n                            说明: {record.comments}\n                          </div>\n                        </Timeline.Item>\n                      ))}\n                    </Timeline>\n                  </Card>\n                )}\n              </Space>\n            </Card>\n          </Col>\n        </Row>\n      </Card>\n\n      {/* 添加评论模态框 */}\n      <Modal\n        title={<><CommentOutlined /> 添加评论</>}\n        open={commentModalVisible}\n        onCancel={() => setCommentModalVisible(false)}\n        footer={null}\n        width={isMobile ? '95%' : 520}\n        style={{ borderRadius: '8px' }}\n        bodyStyle={{ padding: isMobile ? '16px' : '24px' }}\n      >\n        <Form\n          form={commentForm}\n          onFinish={handleAddComment}\n          layout=\"vertical\"\n        >\n          <Form.Item\n            name=\"content\"\n            rules={[{ required: true, message: '请输入评论内容' }]}\n          >\n            <TextArea \n              rows={4} \n              placeholder=\"请输入您的评论...\" \n              style={{ borderRadius: '4px' }}\n            />\n          </Form.Item>\n          <Form.Item style={{ marginBottom: 0, textAlign: 'right' }}>\n            <Button \n              onClick={() => setCommentModalVisible(false)}\n              style={{ marginRight: '8px', borderRadius: '4px' }}\n            >\n              取消\n            </Button>\n            <Button \n              type=\"primary\" \n              htmlType=\"submit\" \n              loading={submitting}\n              style={{ borderRadius: '4px' }}\n            >\n              提交评论\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 修改建议模态框 */}\n      <Modal\n        title={<><EditOutlined /> 修改建议</>}\n        open={editModalVisible}\n        onCancel={() => setEditModalVisible(false)}\n        footer={null}\n        width={700}\n        style={{ borderRadius: '8px' }}\n        bodyStyle={{ padding: '24px' }}\n      >\n        <Form\n          form={editForm}\n          onFinish={handleEdit}\n          layout=\"vertical\"\n        >\n          <Form.Item\n            name=\"title\"\n            label=\"标题\"\n            rules={[{ required: true, message: '请输入标题' }]}\n          >\n            <Input style={{ borderRadius: '4px' }} />\n          </Form.Item>\n          <Form.Item\n            name=\"type\"\n            label=\"建议类型\"\n            rules={[{ required: true, message: '请选择建议类型' }]}\n          >\n            <Select placeholder=\"请选择建议类型\" style={{ borderRadius: '4px' }}>\n              {Object.entries(SUGGESTION_TYPES).map(([key, value]) => (\n                <Option key={key} value={key}>{value}</Option>\n              ))}\n            </Select>\n          </Form.Item>\n          <Form.Item\n            name=\"content\"\n            label=\"内容\"\n            rules={[{ required: true, message: '请输入内容' }]}\n          >\n            <TextArea \n              rows={6} \n              style={{ borderRadius: '4px' }} \n            />\n          </Form.Item>\n          <Form.Item\n            name=\"expectedBenefit\"\n            label=\"预期效益\"\n            rules={[{ required: true, message: '请输入预期效益' }]}\n          >\n            <TextArea \n              rows={4} \n              style={{ borderRadius: '4px' }} \n            />\n          </Form.Item>\n          <Form.Item\n            name=\"reason\"\n            label=\"修改原因\"\n          >\n            <TextArea \n              rows={2} \n              style={{ borderRadius: '4px' }} \n            />\n          </Form.Item>\n          <Form.Item style={{ marginBottom: 0, textAlign: 'right' }}>\n            <Button \n              onClick={() => setEditModalVisible(false)}\n              style={{ marginRight: '8px', borderRadius: '4px' }}\n            >\n              取消\n            </Button>\n            <Button \n              type=\"primary\" \n              htmlType=\"submit\" \n              loading={submitting}\n              style={{ borderRadius: '4px' }}\n            >\n              提交修改\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 一级审核模态框 */}\n      <Modal\n        title={<><CheckCircleOutlined /> 一级审核</>}\n        open={firstReviewModalVisible}\n        onCancel={() => setFirstReviewModalVisible(false)}\n        footer={null}\n        width={600}\n        style={{ borderRadius: '8px' }}\n        bodyStyle={{ padding: '24px' }}\n      >\n        <Alert\n          message=\"一级审核提示\"\n          description=\"请仔细审核建议内容，确认是否通过一级审核。通过后将进入二级审核流程。\"\n          type=\"info\"\n          showIcon\n          style={{ marginBottom: '16px', borderRadius: '4px' }}\n        />\n        <Form\n          form={firstReviewForm}\n          onFinish={handleFirstReview}\n          layout=\"vertical\"\n          initialValues={{ result: 'approve' }}\n        >\n          <Form.Item\n            name=\"result\"\n            label=\"审核结果\"\n            rules={[{ required: true, message: '请选择审核结果' }]}\n          >\n            <Radio.Group>\n              <Radio.Button value=\"approve\" style={{ borderRadius: '4px 0 0 4px' }}>通过</Radio.Button>\n              <Radio.Button value=\"reject\" style={{ borderRadius: '0 4px 4px 0' }}>拒绝</Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n          <Form.Item\n            name=\"comment\"\n            label=\"审核意见\"\n            rules={[{ required: true, message: '请输入审核意见' }]}\n          >\n            <TextArea \n              rows={4} \n              placeholder=\"请输入审核意见...\" \n              style={{ borderRadius: '4px' }}\n            />\n          </Form.Item>\n          <Form.Item style={{ marginBottom: 0, textAlign: 'right' }}>\n            <Button \n              onClick={() => setFirstReviewModalVisible(false)}\n              style={{ marginRight: '8px', borderRadius: '4px' }}\n            >\n              取消\n            </Button>\n            <Button \n              type=\"primary\" \n              htmlType=\"submit\" \n              loading={submitting}\n              style={{ borderRadius: '4px' }}\n            >\n              提交审核\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 二级审核模态框 */}\n      <Modal\n        title={<><CheckCircleOutlined /> 二级审核</>}\n        open={secondReviewModalVisible}\n        onCancel={() => setSecondReviewModalVisible(false)}\n        footer={null}\n        width={600}\n        style={{ borderRadius: '8px' }}\n        bodyStyle={{ padding: '24px' }}\n      >\n        <Alert\n          message=\"二级审核提示\"\n          description=\"请仔细审核建议内容，确认是否最终通过。通过后建议将进入实施流程，否则将结束处理。\"\n          type=\"warning\"\n          showIcon\n          style={{ marginBottom: '16px', borderRadius: '4px' }}\n        />\n        <Form\n          form={secondReviewForm}\n          onFinish={handleSecondReview}\n          layout=\"vertical\"\n          initialValues={{ result: 'approve' }}\n        >\n          <Form.Item\n            name=\"result\"\n            label=\"审核结果\"\n            rules={[{ required: true, message: '请选择审核结果' }]}\n          >\n            <Radio.Group>\n              <Radio.Button value=\"approve\" style={{ borderRadius: '4px 0 0 4px' }}>通过</Radio.Button>\n              <Radio.Button value=\"reject\" style={{ borderRadius: '0 4px 4px 0' }}>拒绝</Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n          <Form.Item\n            name=\"comment\"\n            label=\"审核意见\"\n            rules={[{ required: true, message: '请输入审核意见' }]}\n          >\n            <TextArea \n              rows={4} \n              placeholder=\"请输入审核意见...\" \n              style={{ borderRadius: '4px' }}\n            />\n          </Form.Item>\n          <Form.Item style={{ marginBottom: 0, textAlign: 'right' }}>\n            <Button \n              onClick={() => setSecondReviewModalVisible(false)}\n              style={{ marginRight: '8px', borderRadius: '4px' }}\n            >\n              取消\n            </Button>\n            <Button \n              type=\"primary\" \n              htmlType=\"submit\" \n              loading={submitting}\n              style={{ borderRadius: '4px' }}\n            >\n              提交审核\n            </Button>\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* Score Modal */} \n      <Modal\n        title={suggestion?.scoring?.score !== undefined ? '修改建议评分' : '为建议评分'}\n        open={scoreModalVisible}\n        onCancel={() => setScoreModalVisible(false)}\n        onOk={handleScoreSubmit}\n        okText=\"提交评分\"\n        cancelText=\"取消\"\n      >\n        <Alert\n          message=\"评分提示\"\n          description=\"请根据以下标准评分：创新性、实用性、效益性、完整性、可行性。最小评分单位0.5分。\"\n          type=\"info\"\n          showIcon\n          style={{ marginBottom: '16px', borderRadius: '4px' }}\n        />\n        <Form form={scoreForm} layout=\"vertical\" name=\"score_form\">\n          <Form.Item\n            name=\"score\"\n            label=\"分数 (0.5-5)\"\n            rules={[\n              { required: true, message: '请输入分数' },\n              {\n                validator: (_, value) => {\n                  const scoreNum = parseFloat(value);\n                  if (isNaN(scoreNum) || scoreNum < 0.5 || scoreNum > 5) {\n                    return Promise.reject(new Error('分数必须在 0.5 到 5 之间'));\n                  }\n                  // 校验是否为0.5的倍数\n                  if ((scoreNum * 10) % 5 !== 0) {\n                    return Promise.reject(new Error('分数必须是0.5的倍数'));\n                  }\n                  return Promise.resolve();\n                },\n              },\n            ]}\n          >\n            <Input type=\"number\" min={0.5} max={5} step={0.5} placeholder=\"请输入 0.5-5 之间的分数 (例如: 3.5)\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 添加文件预览组件 */}\n      <FilePreview\n        visible={previewVisible}\n        onClose={() => setPreviewVisible(false)}\n        filename={previewFile?.filename}\n      />\n    </div>\n  );\n};\n\nexport default SuggestionDetail; ","import { REVIEW_STATUS } from '../constants/suggestions';\r\n\r\n/**\r\n * 获取建议的当前状态\r\n * @param {Object} suggestion 建议对象\r\n * @returns {string} 建议的当前状态\r\n */\r\nexport const getCurrentStatus = (suggestion) => {\r\n  if (!suggestion) return '';\r\n  \r\n  const statusKey = suggestion.reviewStatus || suggestion.status;\r\n  \r\n  // 如果状态是中文，尝试将其映射回英文键\r\n  if (typeof statusKey === 'string' && /[\\u4e00-\\u9fa5]/.test(statusKey)) {\r\n    const statusEntry = Object.entries(REVIEW_STATUS).find(([_, value]) => value === statusKey);\r\n    return statusEntry ? statusEntry[0] : statusKey;\r\n  }\r\n  \r\n  return statusKey;\r\n}; "],"names":["getApiBaseUrl","baseUrl","process","replace","console","log","getFullFileUrl","fileUrl","startsWith","normalizedFileUrl","_ref","content","setContent","useState","loading","setLoading","error","setError","useEffect","fullUrl","token","localStorage","getItem","fetch","headers","then","response","ok","status","statusText","Error","contentType","get","contentLength","contentDisposition","arrayBuffer","byteLength","mammoth","result","messages","length","value","catch","message","_jsx","Spin","size","tip","style","textAlign","color","padding","children","className","dangerouslySetInnerHTML","__html","backgroundColor","border","maxHeight","overflowY","Text","Typography","async","requestOptions","text","err","fetchTextContent","width","height","display","justifyContent","alignItems","Alert","description","type","showIcon","Card","bodyStyle","whiteSpace","wordBreak","fontFamily","fontSize","margin","pdfjs","GlobalWorkerOptions","workerSrc","URL","toString","visible","onClose","filename","fileType","setFileType","setFileUrl","numPages","setNumPages","scale","setScale","zoomIn","prevScale","Math","min","zoomOut","max","resetZoom","previewUrl","encodeURIComponent","includes","json","data","info","finally","Modal","title","open","onCancel","top","footer","destroyOnClose","minHeight","renderPreview","src","alt","maxWidth","WordPreview","currentWidth","window","innerWidth","_jsxs","_Fragment","position","zIndex","borderBottom","marginBottom","Space","Tooltip","Button","icon","ZoomOutOutlined","onClick","disabled","UndoOutlined","round","ZoomInOutlined","flexDirection","Document","file","url","httpHeaders","undefined","withCredentials","onLoadSuccess","_ref2","onLoadError","onDocumentLoadError","options","cMapUrl","cMapPacked","standardFontDataUrl","Array","from","el","index","Page","pageNumber","renderTextLayer","renderAnnotationLayer","boxShadow","TextPreview","_suggestion$submitter","suggestion","isMobile","styles","container","background","borderRadius","tagStyle","fontWeight","Descriptions","column","colon","labelStyle","contentStyle","Item","label","TagOutlined","marginRight","Tag","TYPE_COLORS","SUGGESTION_TYPES","ClockCircleOutlined","dateString","date","Date","toLocaleDateString","toLocaleTimeString","hour","minute","toLocaleString","formatDate","createdAt","UserOutlined","submitter","name","TeamOutlined","team","dividerStyle","contentBlockStyle","lineHeight","overflow","highlightBar","left","Divider","orientation","marginLeft","attachments","handleDownloadAttachment","handlePreviewFile","fixEncodingIssues","cardStyle","listItemStyle","transition","buttonStyle","isMobileProp","minWidth","getFileIcon","FileTextOutlined","ext","split","pop","toLowerCase","FileImageOutlined","FilePdfOutlined","FileWordOutlined","FileExcelOutlined","DownloadOutlined","List","itemLayout","dataSource","renderItem","attachment","actions","ghost","EyeOutlined","Meta","avatar","Avatar","shape","originalname","ellipsis","tooltip","uploadedAt","currentStatus","implementation","scoring","card","badgeStyle","isApproved","isRejected","badgeDot","Badge","STATUS_COLORS","direction","strong","SUGGESTION_STATUS","getStatusDisplayText","score","marginTop","toFixed","Paragraph","_review$reviewer","_review$reviewer2","review","borderLeft","header","resultTag","infoItem","infoIcon","infoLabel","commentBox","reviewTime","reviewedAt","CheckCircleOutlined","CloseCircleOutlined","Row","gutter","Col","xs","sm","reviewer","charAt","CalendarOutlined","span","CommentOutlined","comments","_scoring$scorer","_scoring$scorer2","_scoring$scorer3","scoreTag","timelineItem","historyScore","StarOutlined","scorer","role","scorerRole","scoredAt","history","Timeline","map","record","_record$scorer","_record$scorer2","_record$scorer3","dot","Title","TextArea","Input","confirm","Option","Select","test","decodeURIComponent","escape","SuggestionDetail","_suggestion$scoring","id","useParams","navigate","useNavigate","setSuggestion","commentModalVisible","setCommentModalVisible","editModalVisible","setEditModalVisible","firstReviewModalVisible","setFirstReviewModalVisible","secondReviewModalVisible","setSecondReviewModalVisible","scoreModalVisible","setScoreModalVisible","commentForm","Form","useForm","editForm","firstReviewForm","secondReviewForm","scoreForm","submitting","setSubmitting","currentUser","setCurrentUser","isDeleting","setIsDeleting","previewVisible","setPreviewVisible","previewFile","setPreviewFile","setIsMobile","filePreviewUrl","setFilePreviewUrl","isRejectModalVisible","setIsRejectModalVisible","cardStyles","mainCard","contentCard","cardBody","handleResizeInternal","newIsMobile","resizeTimer","debouncedResize","clearTimeout","setTimeout","addEventListener","removeEventListener","isSupervisor","useMemo","isDepartmentManager","isSafetyAdmin","isOperationAdmin","isTeamMatch","getCurrentStatus","isPendingFirstReview","isPendingSecondReview","canFirstReview","isSafetyType","canSecondReview","canScore","shouldShowScoreButton","fetchSuggestionDetail","useCallback","suggestionService","getSuggestionById","user","authService","getCurrentUser","fetchCurrentUser","handleAddComment","addComment","values","success","resetFields","location","protocol","hostname","port","timestamp","getTime","a","document","createElement","href","blob","blobUrl","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","文件名","编码后","handleDelete","ExclamationCircleOutlined","okText","okType","cancelText","confirmLoading","onOk","deleteSuggestion","showEditModal","setFieldsValue","expectedBenefit","renderActionButtons","push","canDelete","_id","secondReview","EditOutlined","Popconfirm","onConfirm","danger","DeleteOutlined","level","flexWrap","gap","justify","align","flex","md","MetadataSection","ContentSection","AttachmentSection","StatusSection","firstReview","ReviewSection","ScoringSection","comment","revisionHistory","HistoryOutlined","revision","_revision$modifiedBy","modifiedBy","modifiedAt","reason","implementationRecords","_record$updatedBy","updatedBy","updatedAt","form","onFinish","layout","rules","required","rows","placeholder","htmlType","updateSuggestion","Object","entries","key","建议ID","审核人","审核人角色","审核人班组","审核结果","审核意见","reviewData","suggestionId","reviewType","reviewerId","submitReview","_error$response","_error$response$data","initialValues","Radio","_error$response2","_error$response2$data","validateFields","scoreValue","parseFloat","isNaN","scoreSuggestion","validator","_","scoreNum","Promise","reject","resolve","step","FilePreview","statusKey","reviewStatus","statusEntry","REVIEW_STATUS","find"],"sourceRoot":""}