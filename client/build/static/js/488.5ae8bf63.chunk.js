"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[488],{69488:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var s=n(65043),i=n(84892),l=n(33307),r=n(94406),a=n(1068),d=n(65256),o=n(50289),p=n(48193),c=n(89421),x=n(8387),m=n(64435),h=n(44394),u=n(26655),j=n(76466),y=n(85421),g=n(47419),A=n(11645),f=n(98166),v=n(33946),S=n(24702),Y=n(36091),D=n(30119),b=n(73216),w=n(86178),E=n.n(w),T=n(26510),z=n(78816),I=n(19119),M=n(82437),B=n(70579);const{Title:k,Text:C,Paragraph:O}=i.A,{TextArea:P}=l.A,{Option:L}=r.A,{Panel:_}=a.A,{Dragger:R}=d.A,N=()=>{var e;const t=(0,b.Zp)(),[n]=o.A.useForm(),[i,a]=(0,s.useState)([]),[d,w]=(0,s.useState)(!0),[P,_]=(0,s.useState)(null),[R,N]=(0,s.useState)(!1),[W,q]=(0,s.useState)(null),[U,G]=(0,s.useState)(!1),[F,H]=(0,s.useState)(!1),[V,$]=(0,s.useState)("\u672a\u5f00\u59cb"),[J,K]=(0,s.useState)({current:1,pageSize:10,total:0}),[Q,Z]=(0,s.useState)({field:"updatedAt",order:"descend"}),[X,ee]=(0,s.useState)(""),[te,ne]=(0,s.useState)("ALL"),[se,ie]=(0,s.useState)("ALL");(0,s.useEffect)((()=>{(async()=>{try{const e=await z.y.getCurrentUser();if(!e)return p.Ay.error("\u8bf7\u5148\u767b\u5f55"),void t("/login");_(e)}catch(e){console.error("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25:",e),p.Ay.error("\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25"),t("/login")}})()}),[t]);const le=async()=>{if(!P)return;w(!0);const e={page:J.current,pageSize:J.pageSize,sortBy:Q.field,sortOrder:"ascend"===Q.order?"asc":"desc",reviewStatus:"APPROVED",includeImplementation:!0,forceRefresh:!0};X&&(e.title=X),te&&"ALL"!==te&&(e.type=te),se&&"ALL"!==se&&(e.implementationStatus=se),Object.keys(e).forEach((t=>(null==e[t]||""===e[t])&&delete e[t])),console.log("\u5f00\u59cb\u83b7\u53d6\u5b9e\u65bd\u5efa\u8bae\u6570\u636e..."),console.log("\u8bf7\u6c42\u53c2\u6570:",e);try{const t=await T.O.getSuggestions(e);console.log("\u83b7\u53d6\u5230\u5b9e\u65bd\u5efa\u8bae\u6570\u636e:",t),t&&t.data&&t.pagination?(a(t.data),K((e=>({...e,current:t.pagination.current,pageSize:t.pagination.pageSize,total:t.pagination.total})))):(a([]),K((e=>({...e,total:0}))),console.warn("\u4eceAPI\u83b7\u53d6\u7684\u6570\u636e\u683c\u5f0f\u4e0d\u7b26\u5408\u9884\u671f\u6216\u6570\u636e\u4e3a\u7a7a"))}catch(t){console.error("\u83b7\u53d6\u5f85\u5b9e\u65bd\u5efa\u8bae\u5931\u8d25:",t),p.Ay.error("\u83b7\u53d6\u5f85\u5b9e\u65bd\u5efa\u8bae\u5931\u8d25"),a([]),K((e=>({...e,total:0,current:1})))}finally{w(!1)}};(0,s.useEffect)((()=>{P&&le()}),[P,J.current,J.pageSize,Q,X,te,se]);const re=e=>{ee(e),K((e=>({...e,current:1})))},ae=e=>{var t,s,i,l,r;q(e),N(!0);let a="\u672a\u5f00\u59cb";e.implementation&&e.implementation.status?a=(0,M.Aw)(e.implementation.status,"implementation"):e.implementationStatus&&(a=(0,M.Aw)(e.implementationStatus,"implementation")),console.log("\u5f53\u524d\u72b6\u6001:",a),$(a),n.setFieldsValue({status:a,responsiblePerson:(null===(t=e.implementation)||void 0===t?void 0:t.responsiblePerson)||"",startDate:null!==(s=e.implementation)&&void 0!==s&&s.startDate?E()(e.implementation.startDate):null,plannedEndDate:null!==(i=e.implementation)&&void 0!==i&&i.plannedEndDate?E()(e.implementation.plannedEndDate):null,actualEndDate:null!==(l=e.implementation)&&void 0!==l&&l.actualEndDate?E()(e.implementation.actualEndDate):null,notes:(null===(r=e.implementation)||void 0===r?void 0:r.notes)||""})},de=()=>{N(!1),q(null),n.resetFields()},oe=e=>{q(e),H(!0)},pe=()=>{H(!1)},ce=[{title:"\u6807\u9898",dataIndex:"title",key:"title",sorter:!0,render:(e,t)=>(0,B.jsx)(c.A,{type:"link",onClick:()=>oe(t),style:{fontSize:"14px",padding:"0",textAlign:"left",height:"auto",lineHeight:"normal"},children:(0,B.jsx)("span",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:e})})},{title:"\u7c7b\u578b",dataIndex:"type",key:"type",sorter:!0,render:e=>{const t=I.SUGGESTION_TYPES[e]||e;return(0,B.jsx)(x.A,{color:I.TYPE_COLORS[e]||"default",style:{padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:t})}},{title:"\u5ba1\u6838\u72b6\u6001",dataIndex:"reviewStatus",key:"reviewStatus",sorter:!0,render:e=>{const t=(0,M.Aw)(e,"review"),n=(0,M.qY)(e,"review");return(0,B.jsx)(x.A,{color:n||"green",style:{padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:t||"\u5df2\u6279\u51c6"})}},{title:"\u5b9e\u65bd\u72b6\u6001",dataIndex:"implementationStatus",key:"implementationStatus",sorter:!0,render:(e,t)=>{var n;const s=(null===(n=t.implementation)||void 0===n?void 0:n.status)||e||"NOT_STARTED",i=(0,M.Aw)(s,"implementation"),l=(0,M.qY)(s,"implementation");return(0,B.jsx)(x.A,{color:l||"default",style:{padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:i||"\u672a\u5f00\u59cb"})}},{title:"\u73ed\u7ec4",dataIndex:"team",key:"team",sorter:!0,render:e=>(0,B.jsx)("span",{style:{fontSize:"14px"},children:e})},{title:"\u8d23\u4efb\u4eba",dataIndex:["implementation","responsiblePerson"],key:"responsiblePerson",render:e=>(0,B.jsx)("span",{style:{fontSize:"14px"},children:e||"\u672a\u5206\u914d"})},{title:"\u8ba1\u5212\u5b8c\u6210\u65e5\u671f",dataIndex:["implementation","plannedEndDate"],key:"plannedEndDate",render:e=>(0,B.jsx)("span",{style:{fontSize:"14px"},children:e?E()(e).format("YYYY-MM-DD"):"\u672a\u8bbe\u7f6e"})},{title:"\u64cd\u4f5c",key:"action",render:(e,t)=>(0,B.jsxs)(m.A,{children:[(0,B.jsx)(c.A,{type:"primary",onClick:()=>ae(t),style:{fontSize:"14px"},children:"\u66f4\u65b0\u72b6\u6001"}),(0,B.jsx)(c.A,{onClick:()=>oe(t),icon:(0,B.jsx)(Y.A,{}),style:{fontSize:"14px"},children:"\u8be6\u60c5"})]})}],xe=[{title:"\u5efa\u8bae\u5b9e\u65bd\u4fe1\u606f",dataIndex:"title",key:"title",render:(e,t)=>{var n,s,i;const l=(null===(n=t.implementation)||void 0===n?void 0:n.status)||t.implementationStatus||"NOT_STARTED",r=(0,M.Aw)(l,"implementation"),a=(0,M.qY)(l,"implementation");return(0,B.jsxs)("div",{style:{padding:"8px 0"},children:[(0,B.jsx)("div",{style:{fontSize:"15px",fontWeight:"bold",marginBottom:"8px"},children:e}),(0,B.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"8px"},children:[(0,B.jsx)(x.A,{color:I.TYPE_COLORS[t.type]||"default",style:{padding:"2px 6px",fontSize:"12px"},children:I.SUGGESTION_TYPES[t.type]||t.type}),(0,B.jsx)(x.A,{color:a,style:{padding:"2px 6px",fontSize:"12px"},children:r})]}),(0,B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#888",marginBottom:"8px"},children:[(0,B.jsxs)("span",{children:["\u73ed\u7ec4: ",t.team||"\u672a\u77e5"]}),(0,B.jsxs)("span",{children:["\u8d23\u4efb\u4eba: ",(null===(s=t.implementation)||void 0===s?void 0:s.responsiblePerson)||"\u672a\u5206\u914d"]})]}),(0,B.jsx)("div",{style:{fontSize:"12px",color:"#888",marginBottom:"10px"},children:(0,B.jsxs)("span",{children:["\u8ba1\u5212\u5b8c\u6210: ",null!==(i=t.implementation)&&void 0!==i&&i.plannedEndDate?E()(t.implementation.plannedEndDate).format("YYYY-MM-DD"):"\u672a\u8bbe\u7f6e"]})}),(0,B.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"10px"},children:[(0,B.jsx)(c.A,{type:"primary",size:"small",onClick:()=>ae(t),children:"\u66f4\u65b0\u72b6\u6001"}),(0,B.jsx)(c.A,{size:"small",onClick:()=>oe(t),children:"\u67e5\u770b\u8be6\u60c5"})]})]})}}],[me,he]=(0,s.useState)(window.innerWidth<=768);return(0,s.useEffect)((()=>{const e=()=>{he(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,B.jsxs)("div",{className:"responsive-container",style:{padding:me?"12px":"24px"},children:[(0,B.jsx)(u.A,{style:{marginBottom:me?"12px":"20px"},bodyStyle:{padding:me?"12px":"24px"},children:(0,B.jsx)(o.A,{layout:me?"vertical":"inline",children:(0,B.jsxs)(g.A,{gutter:me?8:16,style:{width:"100%"},children:[(0,B.jsx)(A.A,{xs:24,sm:12,md:8,lg:6,children:(0,B.jsx)(o.A.Item,{style:{width:"100%",marginBottom:me?"12px":"20px"},label:"\u641c\u7d22",children:(0,B.jsx)(l.A.Search,{placeholder:"\u641c\u7d22\u5efa\u8bae\u6807\u9898...",allowClear:!0,onSearch:re,onChange:e=>{e.target.value||re("")},enterButton:!0})})}),(0,B.jsx)(A.A,{xs:24,sm:12,md:8,lg:6,children:(0,B.jsx)(o.A.Item,{style:{width:"100%",marginBottom:me?"12px":"20px"},label:"\u7c7b\u578b",children:(0,B.jsxs)(r.A,{value:te,onChange:e=>{ne(e),K((e=>({...e,current:1})))},style:{width:"100%"},placeholder:"\u6240\u6709\u7c7b\u578b",children:[(0,B.jsx)(L,{value:"ALL",children:"\u6240\u6709\u7c7b\u578b"}),Object.entries(I.SUGGESTION_TYPES).map((e=>{let[t,n]=e;return(0,B.jsx)(L,{value:t,children:n},t)}))]})})}),(0,B.jsx)(A.A,{xs:24,sm:12,md:8,lg:6,children:(0,B.jsx)(o.A.Item,{style:{width:"100%",marginBottom:me?"12px":"20px"},label:"\u5b9e\u65bd\u72b6\u6001",children:(0,B.jsxs)(r.A,{value:se,onChange:e=>{ie(e),K((e=>({...e,current:1})))},style:{width:"100%"},placeholder:"\u6240\u6709\u5b9e\u65bd\u72b6\u6001",children:[(0,B.jsx)(L,{value:"ALL",children:"\u6240\u6709\u5b9e\u65bd\u72b6\u6001"}),Object.entries(I.IMPLEMENTATION_STATUS).map((e=>{let[t,n]=e;return(0,B.jsx)(L,{value:t,children:n},t)}))]})})})]})})}),(0,B.jsxs)(u.A,{bodyStyle:{padding:me?"12px":"24px"},children:[(0,B.jsx)(k,{level:me?4:3,style:{fontSize:me?"18px":"20px",marginBottom:me?"16px":"20px"},children:"\u5efa\u8bae\u5b9e\u65bd\u8ddf\u8e2a"}),(0,B.jsx)(f.A,{columns:me?xe:ce,dataSource:i,rowKey:"_id",loading:d,onChange:(e,t,n)=>{console.log("Table changed:",e,t,n),K((t=>({...t,current:e.current,pageSize:e.pageSize}))),n&&n.field&&n.order?Z({field:n.field,order:n.order}):Z({field:"updatedAt",order:"descend"})},pagination:{current:J.current,pageSize:J.pageSize,total:J.total,size:me?"small":"default",showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`\u5171 ${e} \u6761\u5efa\u8bae`},scroll:{}})]}),(0,B.jsx)(v.A,{title:"\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001",visible:R,onCancel:de,footer:null,width:me?"95%":600,bodyStyle:{padding:me?"16px":"24px"},children:(0,B.jsxs)(o.A,{form:n,onFinish:async()=>{try{var e,t,s;const i=await n.validateFields();G(!0);const l=Object.keys(I.IMPLEMENTATION_STATUS).find((e=>I.IMPLEMENTATION_STATUS[e]===i.status));if(!l)return p.Ay.error("\u65e0\u6548\u7684\u72b6\u6001\u9009\u62e9\uff0c\u65e0\u6cd5\u627e\u5230\u5bf9\u5e94\u7684\u72b6\u6001\u4ee3\u7801"),void G(!1);const r={status:l,responsiblePerson:i.responsiblePerson,startDate:null===(e=i.startDate)||void 0===e?void 0:e.format("YYYY-MM-DD"),plannedCompletionDate:null===(t=i.plannedEndDate)||void 0===t?void 0:t.format("YYYY-MM-DD"),actualCompletionDate:null===(s=i.actualEndDate)||void 0===s?void 0:s.format("YYYY-MM-DD"),notes:i.notes};console.log("\u51c6\u5907\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001:",W._id,r);const a=await T.O.updateImplementation(W._id,r);console.log("\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001 API \u54cd\u5e94:",a),a&&a.success?(p.Ay.success("\u5b9e\u65bd\u72b6\u6001\u66f4\u65b0\u6210\u529f"),N(!1),le()):p.Ay.error((null===a||void 0===a?void 0:a.message)||"\u64cd\u4f5c\u5931\u8d25")}catch(i){console.error("\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u5931\u8d25:",i),i.errorFields?p.Ay.error("\u8868\u5355\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u68c0\u67e5"):p.Ay.error("\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u65f6\u53d1\u751f\u9519\u8bef")}finally{G(!1)}},layout:"vertical",children:[(0,B.jsxs)(g.A,{gutter:me?8:16,children:[(0,B.jsx)(A.A,{xs:24,sm:12,children:(0,B.jsx)(o.A.Item,{name:"status",label:"\u5b9e\u65bd\u72b6\u6001",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b9e\u65bd\u72b6\u6001"}],children:(0,B.jsx)(r.A,{placeholder:"\u8bf7\u9009\u62e9\u5b9e\u65bd\u72b6\u6001",onChange:e=>{console.log("\u72b6\u6001\u53d8\u66f4\u4e3a:",e),$(e),n.setFieldsValue({status:e})},options:Object.entries(I.IMPLEMENTATION_STATUS).filter((e=>{let[t,n]=e;return"EVALUATED"!==t})).map((e=>{let[t,n]=e;return{value:n,label:n}}))})})}),(0,B.jsx)(A.A,{xs:24,sm:12,children:(0,B.jsx)(o.A.Item,{name:"responsiblePerson",label:"\u8d23\u4efb\u4eba",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d23\u4efb\u4eba"},{max:50,message:"\u8d23\u4efb\u4eba\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"}],children:(0,B.jsx)(l.A,{placeholder:"\u8bf7\u8f93\u5165\u8d23\u4efb\u4eba"})})})]}),(0,B.jsxs)(g.A,{gutter:me?8:16,children:[(0,B.jsx)(A.A,{xs:24,sm:8,children:(0,B.jsx)(o.A.Item,{name:"startDate",label:"\u5f00\u59cb\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5f00\u59cb\u65e5\u671f"}],children:(0,B.jsx)(S.A,{style:{width:"100%"},placeholder:"\u9009\u62e9\u65e5\u671f",format:"YYYY-MM-DD"})})}),(0,B.jsx)(A.A,{xs:24,sm:8,children:(0,B.jsx)(o.A.Item,{name:"plannedEndDate",label:"\u8ba1\u5212\u5b8c\u6210\u65e5\u671f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8ba1\u5212\u5b8c\u6210\u65e5\u671f"}],children:(0,B.jsx)(S.A,{style:{width:"100%"},placeholder:"\u9009\u62e9\u65e5\u671f",format:"YYYY-MM-DD"})})}),(0,B.jsx)(A.A,{xs:24,sm:8,children:(0,B.jsx)(o.A.Item,{name:"actualEndDate",label:"\u5b9e\u9645\u5b8c\u6210\u65e5\u671f",children:(0,B.jsx)(S.A,{style:{width:"100%"},placeholder:"\u9009\u62e9\u65e5\u671f",format:"YYYY-MM-DD",disabled:!["COMPLETED","\u5df2\u5b8c\u6210"].includes(V)})})})]}),(0,B.jsx)(o.A.Item,{name:"notes",label:"\u5b9e\u65bd\u5907\u6ce8",children:(0,B.jsx)(l.A.TextArea,{rows:me?3:4,placeholder:"\u8bf7\u8f93\u5165\u5b9e\u65bd\u8fc7\u7a0b\u4e2d\u7684\u8be6\u7ec6\u8bf4\u660e"})}),(0,B.jsxs)(g.A,{gutter:16,children:[(0,B.jsx)(A.A,{span:me?12:8,children:(0,B.jsx)(c.A,{type:"primary",htmlType:"submit",loading:U,style:{width:"100%"},children:"\u63d0\u4ea4"})}),(0,B.jsx)(A.A,{span:me?12:8,children:(0,B.jsx)(c.A,{onClick:de,style:{width:"100%"},children:"\u53d6\u6d88"})})]})]})}),(0,B.jsx)(v.A,{title:W?`\u5efa\u8bae\u5b9e\u65bd\u8ddf\u8e2a: ${W.title}`:"\u5efa\u8bae\u8be6\u60c5",visible:F,onCancel:pe,footer:[(0,B.jsx)(c.A,{onClick:pe,style:{fontSize:"14px"},children:"\u5173\u95ed"},"back")],width:me?"95%":800,bodyStyle:{fontSize:"14px",padding:me?"16px":"24px"},children:W&&(0,B.jsxs)("div",{children:[(0,B.jsxs)(u.A,{title:"\u5efa\u8bae\u57fa\u672c\u4fe1\u606f",style:{marginBottom:16},bodyStyle:{padding:me?"12px":"24px"},children:[(0,B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:me?"100%":"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u5efa\u8bae\u7c7b\u578b: "}),(0,B.jsx)(x.A,{color:I.TYPE_COLORS[W.type]||"default",style:{marginLeft:"8px",padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:I.SUGGESTION_TYPES[W.type]||W.type})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:me?"100%":"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u63d0\u4ea4\u4eba: "}),(0,B.jsx)(C,{children:(null===(e=W.submitter)||void 0===e?void 0:e.name)||"\u672a\u77e5"})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:me?"100%":"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u73ed\u7ec4: "}),(0,B.jsx)(C,{children:W.team||"\u672a\u77e5"})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:me?"100%":"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u63d0\u4ea4\u65f6\u95f4: "}),(0,B.jsx)(C,{children:W.createdAt?E()(W.createdAt).format("YYYY-MM-DD HH:mm"):"\u672a\u77e5"})]})]}),(0,B.jsxs)("div",{style:{marginTop:16},children:[(0,B.jsx)(C,{strong:!0,children:"\u5efa\u8bae\u5185\u5bb9: "}),(0,B.jsx)(O,{children:W.content})]})]}),(()=>{if(!W||!W.implementation)return(0,B.jsx)(h.A,{message:"\u6682\u65e0\u5b9e\u65bd\u4fe1\u606f",type:"info",showIcon:!0});const e=W.implementation,t=e.statusHistory||e.history||[];return console.log("\u5b9e\u65bd\u5386\u53f2\u8bb0\u5f55:",t),(0,B.jsxs)("div",{children:[(0,B.jsxs)(u.A,{title:"\u5b9e\u65bd\u57fa\u672c\u4fe1\u606f",style:{marginBottom:16},children:[(0,B.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u5b9e\u65bd\u72b6\u6001: "}),(0,B.jsx)(x.A,{color:(0,M.qY)(e.status||"\u672a\u5f00\u59cb"),style:{padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:(0,M.Aw)(e.status||"\u672a\u5f00\u59cb","implementation")})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u8d23\u4efb\u4eba: "}),(0,B.jsx)(C,{children:e.responsiblePerson||"\u672a\u5206\u914d"})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u5f00\u59cb\u65e5\u671f: "}),(0,B.jsx)(C,{children:e.startDate?E()(e.startDate).format("YYYY-MM-DD"):"\u672a\u8bbe\u7f6e"})]}),(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u8ba1\u5212\u5b8c\u6210\u65e5\u671f: "}),(0,B.jsx)(C,{children:e.plannedEndDate?E()(e.plannedEndDate).format("YYYY-MM-DD"):"\u672a\u8bbe\u7f6e"})]}),e.actualEndDate&&(0,B.jsxs)("div",{style:{marginBottom:16,minWidth:"45%"},children:[(0,B.jsx)(C,{strong:!0,children:"\u5b9e\u9645\u5b8c\u6210\u65e5\u671f: "}),(0,B.jsx)(C,{children:E()(e.actualEndDate).format("YYYY-MM-DD")})]})]}),e.notes&&(0,B.jsxs)("div",{style:{marginTop:16},children:[(0,B.jsx)(C,{strong:!0,children:"\u5b9e\u65bd\u5907\u6ce8: "}),(0,B.jsx)(O,{children:e.notes})]})]}),e.attachments&&e.attachments.length>0&&(0,B.jsx)(u.A,{title:"\u5b9e\u65bd\u9644\u4ef6",style:{marginBottom:16},children:(0,B.jsx)("ul",{style:{paddingLeft:20},children:e.attachments.map(((e,t)=>(0,B.jsx)("li",{children:(0,B.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.name})},t)))})}),t&&t.length>0?(0,B.jsx)(u.A,{title:"\u5b9e\u65bd\u5386\u53f2\u8bb0\u5f55",style:{marginBottom:16},children:(0,B.jsx)(j.A,{reverse:!0,children:[...t].reverse().map(((e,n)=>{var s;return(0,B.jsx)(j.A.Item,{color:(0,M.qY)(e.status),dot:(0,B.jsx)("div",{style:{background:(0,M.qY)(e.status),borderRadius:"50%",width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:0===n&&(0,B.jsx)(D.A,{style:{fontSize:"10px",color:"#fff"}})}),children:(0,B.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:"4px",padding:"12px",marginBottom:"8px",backgroundColor:"#fafafa"},children:[(0,B.jsxs)("div",{style:{borderBottom:"1px solid #f0f0f0",paddingBottom:"8px",marginBottom:"8px"},children:[(0,B.jsx)(x.A,{color:(0,M.qY)(e.status),style:{padding:"4px 8px",borderRadius:"4px",fontSize:"14px"},children:(0,M.Aw)(e.status,"implementation")}),(0,B.jsx)(C,{type:"secondary",style:{marginLeft:"8px"},children:E()(e.date||e.timestamp).format("YYYY-MM-DD HH:mm:ss")})]}),(0,B.jsxs)("p",{children:[(0,B.jsx)(C,{strong:!0,children:"\u64cd\u4f5c\u4eba\u5458: "}),(null===(s=e.updatedBy)||void 0===s?void 0:s.name)||e.updatedBy||"\u7cfb\u7edf"]}),(e.notes||e.comments)&&(0,B.jsxs)("div",{style:{marginTop:"4px"},children:[(0,B.jsx)(C,{strong:!0,children:"\u5907\u6ce8\u4fe1\u606f: "}),(0,B.jsx)("div",{style:{backgroundColor:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid #f0f0f0",marginTop:"4px"},children:e.notes||e.comments})]}),n<t.length-1&&0!==n&&(0,B.jsx)("div",{style:{marginTop:"8px"},children:(0,B.jsxs)(C,{type:"secondary",children:["\u72b6\u6001\u6301\u7eed\u65f6\u95f4: ",E()(e.date||e.timestamp).diff(E()([...t].reverse()[n-1].date||[...t].reverse()[n-1].timestamp),"hours")>=24?`${E()(e.date||e.timestamp).diff(E()([...t].reverse()[n-1].date||[...t].reverse()[n-1].timestamp),"days")} \u5929`:`${E()(e.date||e.timestamp).diff(E()([...t].reverse()[n-1].date||[...t].reverse()[n-1].timestamp),"hours")} \u5c0f\u65f6`]})})]})},n)}))})}):(0,B.jsx)(u.A,{title:"\u5b9e\u65bd\u5386\u53f2\u8bb0\u5f55",style:{marginBottom:16},children:(0,B.jsx)(y.A,{description:"\u6682\u65e0\u72b6\u6001\u53d8\u66f4\u8bb0\u5f55"})})]})})()]})})]})}}}]);
//# sourceMappingURL=488.5ae8bf63.chunk.js.map