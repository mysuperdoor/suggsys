"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[884],{37884:(e,a,t)=>{t.r(a),t.d(a,{default:()=>te});var n=t(65043),s=t(94406),r=t(33946),l=t(50289),o=t(48193),i=t(8387),c=t(64435),d=t(39998),u=t(35696),p=t(89421),g=t(26655),h=t(98166),m=t(47419),v=t(11645),A=t(33307),x=t(58168),y=t(64467),f=t(40164),w=t(98139),j=t.n(w),b=t(5544),I=t(53986),S=t(28678),C=t(25001),k=n.forwardRef((function(e,a){var t,s=e.prefixCls,r=void 0===s?"rc-switch":s,l=e.className,o=e.checked,i=e.defaultChecked,c=e.disabled,d=e.loadingIcon,u=e.checkedChildren,p=e.unCheckedChildren,g=e.onClick,h=e.onChange,m=e.onKeyDown,v=(0,I.A)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),A=(0,S.A)(!1,{value:o,defaultValue:i}),x=(0,b.A)(A,2),f=x[0],w=x[1];function k(e,a){var t=f;return c||(w(t=e),null===h||void 0===h||h(t,a)),t}var E=j()(r,l,(t={},(0,y.A)(t,"".concat(r,"-checked"),f),(0,y.A)(t,"".concat(r,"-disabled"),c),t));return n.createElement("button",Object.assign({},v,{type:"button",role:"switch","aria-checked":f,disabled:c,className:E,ref:a,onKeyDown:function(e){e.which===C.A.LEFT?k(!1,e):e.which===C.A.RIGHT&&k(!0,e),null===m||void 0===m||m(e)},onClick:function(e){var a=k(!f,e);null===g||void 0===g||g(a,e)}}),d,n.createElement("span",{className:"".concat(r,"-inner")},f?u:p))}));k.displayName="Switch";const E=k;var O=t(35296),z=t(78440),T=t(87063),N=t(16021),_=function(e,a){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&a.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)a.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(t[n[s]]=e[n[s]])}return t},M=n.forwardRef((function(e,a){var t=e.prefixCls,s=e.size,r=e.disabled,l=e.loading,o=e.className,i=void 0===o?"":o,c=_(e,["prefixCls","size","disabled","loading","className"]),d=n.useContext(O.QO),u=d.getPrefixCls,p=d.direction,g=n.useContext(T.A),h=n.useContext(z.A),m=(null!==r&&void 0!==r?r:h)||l,v=u("switch",t),A=n.createElement("div",{className:"".concat(v,"-handle")},l&&n.createElement(f.A,{className:"".concat(v,"-loading-icon")})),w=j()((0,y.A)((0,y.A)((0,y.A)({},"".concat(v,"-small"),"small"===(s||g)),"".concat(v,"-loading"),l),"".concat(v,"-rtl"),"rtl"===p),i);return n.createElement(N.A,{insertExtraNode:!0},n.createElement(E,(0,x.A)({},c,{prefixCls:v,className:w,disabled:m,ref:a,loadingIcon:A})))}));M.__ANT_SWITCH=!0;const P=M;var R=t(67407),F=t(89379);const D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"};var $=t(22172),q=function(e,a){return n.createElement($.A,(0,F.A)((0,F.A)({},e),{},{ref:a,icon:D}))};const U=n.forwardRef(q);var H=t(61966),B=t(39470),V=t(75337),K=t(46237),G=t(89967),L=t(94505);const J=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:10};try{console.log("\u83b7\u53d6\u7528\u6237\u5217\u8868\u53c2\u6570:",e);const a=new URLSearchParams(e).toString();console.log("userService.getUsers - queryString:",a);const t=await L.A.get(`/users?${a}`);console.log("\u83b7\u53d6\u7528\u6237\u5217\u8868\u539f\u59cb\u54cd\u5e94:",t);let n={data:[],pagination:{current:parseInt(e.page)||1,pageSize:parseInt(e.limit)||10,total:0}};if(t&&t.data&&Array.isArray(t.data.users))console.log("\u683c\u5f0f1: response.data = { users: [...], pagination: {...} }"),n.data=t.data.users,t.data.pagination&&(n.pagination={current:parseInt(t.data.pagination.current)||n.pagination.current,pageSize:parseInt(t.data.pagination.pageSize)||n.pagination.pageSize,total:parseInt(t.data.pagination.total)||n.pagination.total});else if(t&&Array.isArray(t.data))console.log("\u683c\u5f0f2: response.data = [...]"),n.data=t.data,n.pagination.total=t.data.length;else if(t&&t.data&&t.data.data&&Array.isArray(t.data.data))console.log("\u683c\u5f0f3: response.data.data = [...]"),n.data=t.data.data,t.data.pagination?n.pagination={current:parseInt(t.data.pagination.current)||n.pagination.current,pageSize:parseInt(t.data.pagination.pageSize)||n.pagination.pageSize,total:parseInt(t.data.pagination.total)||n.pagination.total}:n.pagination.total=t.data.data.length;else if(console.warn("userService.getUsers - \u672a\u77e5\u54cd\u5e94\u7ed3\u6784:",t),t&&"object"===typeof t){const e=Object.entries(t).find((e=>{let[a,t]=e;return Array.isArray(t)}));e&&(console.log(`\u627e\u5230\u53ef\u80fd\u7684\u6570\u636e\u6570\u7ec4: ${e[0]}`),n.data=e[1],n.pagination.total=e[1].length);const a=Object.entries(t).find((e=>{let[a,t]=e;return"object"===typeof t&&null!==t&&("pagination"===a||"page"===a||"paging"===a)}));if(a){console.log(`\u627e\u5230\u53ef\u80fd\u7684\u5206\u9875\u4fe1\u606f: ${a[0]}`);const e=a[1];n.pagination={current:parseInt(e.current||e.page||e.currentPage||1),pageSize:parseInt(e.pageSize||e.limit||e.size||10),total:parseInt(e.total||e.totalCount||e.totalItems||0)}}}return console.log("userService.getUsers - \u5904\u7406\u540e\u7684\u7ed3\u679c:",n),n}catch(a){throw console.error("\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25:",a),a}},Q=async e=>{try{console.log("\u53d1\u9001\u521b\u5efa\u7528\u6237\u8bf7\u6c42:",e);const a=await L.A.post("/users",e);return console.log("\u521b\u5efa\u7528\u6237\u54cd\u5e94:",a.data),a.data}catch(a){if(console.error("\u521b\u5efa\u7528\u6237\u5931\u8d25:",a),a.response&&a.response.data)throw a.response.data;throw a}},Y=async(e,a)=>{try{console.log("\u53d1\u9001\u66f4\u65b0\u7528\u6237\u8bf7\u6c42 - \u539f\u59cb\u6570\u636e:",a);const t={DEPARTMENT_MANAGER:"\u90e8\u95e8\u7ecf\u7406",SHIFT_SUPERVISOR:"\u503c\u73ed\u4e3b\u4efb",SAFETY_ADMIN:"\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458",OPERATION_ADMIN:"\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458",TEAM_MEMBER:"\u73ed\u7ec4\u4eba\u5458"},n={TEAM_A:"\u7532\u73ed",TEAM_B:"\u4e59\u73ed",TEAM_C:"\u4e19\u73ed",TEAM_D:"\u4e01\u73ed",NONE:"\u65e0\u73ed\u7ec4"},s={...a,role:t[a.role]||a.role,team:n[a.team]||a.team,department:"PRODUCTION"===a.department?"\u751f\u4ea7\u8c03\u5ea6\u90e8":a.department};console.log("\u53d1\u9001\u66f4\u65b0\u7528\u6237\u8bf7\u6c42 - \u5904\u7406\u540e\u6570\u636e:",s);const r=await L.A.put(`/users/${e}`,s);return console.log("\u66f4\u65b0\u7528\u6237\u54cd\u5e94:",r.data),r.data}catch(s){var t,n;throw console.error("\u66f4\u65b0\u7528\u6237\u5931\u8d25:",s),console.error("\u9519\u8bef\u8be6\u60c5:",{status:null===(t=s.response)||void 0===t?void 0:t.status,data:null===(n=s.response)||void 0===n?void 0:n.data,message:s.message}),s}},W=async e=>{try{console.log("\u53d1\u9001\u5220\u9664\u7528\u6237\u8bf7\u6c42:",{id:e});const a=await L.A.delete(`/users/${e}`);return console.log("\u5220\u9664\u7528\u6237\u54cd\u5e94:",a.data),a.data}catch(a){if(console.error("\u5220\u9664\u7528\u6237\u5931\u8d25:",a),a.response&&a.response.data)throw a.response.data;throw a}},X=async(e,a)=>{try{console.log("\u53d1\u9001\u91cd\u7f6e\u5bc6\u7801\u8bf7\u6c42:",{id:e,passwordLength:null===a||void 0===a?void 0:a.length});const t=await L.A.put(`/users/${e}/password`,{password:a});return console.log("\u91cd\u7f6e\u5bc6\u7801\u54cd\u5e94:",t.data),t.data}catch(t){if(console.error("\u91cd\u7f6e\u5bc6\u7801\u5931\u8d25:",t),t.response&&t.response.data)throw t.response.data;throw t}};var Z=t(70579);const{Option:ee}=s.A,{confirm:ae}=r.A,te=()=>{const[e]=l.A.useForm(),[a]=l.A.useForm(),[t,x]=(0,n.useState)([]),[y,f]=(0,n.useState)(!1),[w,j]=(0,n.useState)(!1),[b,I]=(0,n.useState)(!1),[S,C]=(0,n.useState)(null),[k,E]=(0,n.useState)({current:1,pageSize:10,total:0,showTotal:e=>`\u5171 ${e} \u6761\u8bb0\u5f55`}),[O,z]=(0,n.useState)({role:"",team:"",status:""}),T=[{label:"\u90e8\u95e8\u7ecf\u7406",value:"\u90e8\u95e8\u7ecf\u7406"},{label:"\u503c\u73ed\u4e3b\u4efb",value:"\u503c\u73ed\u4e3b\u4efb"},{label:"\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458",value:"\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458"},{label:"\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458",value:"\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458"},{label:"\u73ed\u7ec4\u4eba\u5458",value:"\u73ed\u7ec4\u4eba\u5458"}],N=[{label:"\u7532\u73ed",value:"\u7532\u73ed"},{label:"\u4e59\u73ed",value:"\u4e59\u73ed"},{label:"\u4e19\u73ed",value:"\u4e19\u73ed"},{label:"\u4e01\u73ed",value:"\u4e01\u73ed"},{label:"\u65e0\u73ed\u7ec4",value:"\u65e0\u73ed\u7ec4"}],_=[{label:"\u751f\u4ea7\u8c03\u5ea6\u90e8",value:"\u751f\u4ea7\u8c03\u5ea6\u90e8"}],M=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{f(!0);const a={page:e.page||k.current,limit:e.pageSize||k.pageSize,...O};console.log("\u8bf7\u6c42\u7528\u6237\u5217\u8868\u53c2\u6570:",a);const t=await J(a);console.log("\u7528\u6237\u670d\u52a1\u8fd4\u56de\u7ed3\u679c:",t),t&&t.data?(console.log("\u8bbe\u7f6e\u7528\u6237\u6570\u636e:",t.data),x(t.data),t.pagination&&(console.log("\u66f4\u65b0\u5206\u9875\u4fe1\u606f:",t.pagination),E({...k,current:parseInt(t.pagination.current)||1,pageSize:parseInt(t.pagination.pageSize)||10,total:parseInt(t.pagination.total)||0,showTotal:e=>`\u5171 ${e} \u6761\u8bb0\u5f55`}))):(console.warn("\u83b7\u53d6\u5230\u7684\u7528\u6237\u6570\u636e\u4e3a\u7a7a"),x([]),o.Ay.warning("\u83b7\u53d6\u7528\u6237\u5217\u8868\u4e3a\u7a7a"))}catch(r){var a,t,n,s;console.error("\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25:",r),console.error("\u9519\u8bef\u8be6\u60c5:",{status:null===(a=r.response)||void 0===a?void 0:a.status,data:null===(t=r.response)||void 0===t?void 0:t.data,message:r.message}),o.Ay.error("\u83b7\u53d6\u7528\u6237\u5217\u8868\u5931\u8d25: "+((null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.message)||r.message||"\u672a\u77e5\u9519\u8bef"))}finally{f(!1)}};(0,n.useEffect)((()=>{M()}),[O]);const F=e=>({"\u90e8\u95e8\u7ecf\u7406":"red","\u503c\u73ed\u4e3b\u4efb":"orange","\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458":"green","\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458":"blue","\u73ed\u7ec4\u4eba\u5458":"purple"}[e]||"default"),D=[{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username",width:120},{title:"\u59d3\u540d",dataIndex:"name",key:"name",width:120},{title:"\u89d2\u8272",dataIndex:"role",key:"role",width:150,render:e=>{const a=["\u90e8\u95e8\u7ecf\u7406","\u503c\u73ed\u4e3b\u4efb","\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458","\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458","\u73ed\u7ec4\u4eba\u5458"].includes(e)?e:(e=>({DEPARTMENT_MANAGER:"\u90e8\u95e8\u7ecf\u7406",SHIFT_SUPERVISOR:"\u503c\u73ed\u4e3b\u4efb",SAFETY_ADMIN:"\u5b89\u5168\u79d1\u7ba1\u7406\u4eba\u5458",OPERATION_ADMIN:"\u8fd0\u884c\u79d1\u7ba1\u7406\u4eba\u5458",TEAM_MEMBER:"\u73ed\u7ec4\u4eba\u5458"}[e]||e))(e);return(0,Z.jsx)(i.A,{color:F(e),children:a})},filters:T.map((e=>({text:e.label,value:e.value})))},{title:"\u73ed\u7ec4",dataIndex:"team",key:"team",width:100,render:e=>{const a=["\u7532\u73ed","\u4e59\u73ed","\u4e19\u73ed","\u4e01\u73ed","\u65e0\u73ed\u7ec4"].includes(e)?e:(e=>({TEAM_A:"\u7532\u73ed",TEAM_B:"\u4e59\u73ed",TEAM_C:"\u4e19\u73ed",TEAM_D:"\u4e01\u73ed",NONE:"\u65e0\u73ed\u7ec4"}[e]||e))(e);return a},filters:N.map((e=>({text:e.label,value:e.value})))},{title:"\u90e8\u95e8",dataIndex:"department",key:"department",width:100,render:e=>(e=>({PRODUCTION:"\u751f\u4ea7\u8c03\u5ea6\u90e8"}[e]||e))(e),filters:_.map((e=>({text:e.label,value:e.value})))},{title:"\u72b6\u6001",dataIndex:"active",key:"active",width:80,render:e=>(0,Z.jsx)(i.A,{color:e?"green":"red",children:e?"\u542f\u7528":"\u7981\u7528"}),filters:[{text:"\u542f\u7528",value:"true"},{text:"\u7981\u7528",value:"false"}]},{title:"\u64cd\u4f5c",key:"action",width:250,render:(e,a)=>(0,Z.jsxs)(c.A,{split:(0,Z.jsx)(d.A,{type:"vertical"}),children:[(0,Z.jsx)(u.A,{title:"\u7f16\u8f91\u7528\u6237",children:(0,Z.jsx)(p.A,{type:"primary",icon:(0,Z.jsx)(R.A,{}),size:"small",onClick:()=>q(a),children:"\u7f16\u8f91"})}),(0,Z.jsx)(u.A,{title:"\u91cd\u7f6e\u5bc6\u7801",children:(0,Z.jsx)(p.A,{icon:(0,Z.jsx)(U,{}),size:"small",onClick:()=>ne(a),children:"\u91cd\u7f6e\u5bc6\u7801"})}),(0,Z.jsx)(u.A,{title:"\u5220\u9664\u7528\u6237",children:(0,Z.jsx)(p.A,{danger:!0,icon:(0,Z.jsx)(H.A,{}),size:"small",onClick:()=>L(a),children:"\u5220\u9664"})})]})}],$=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;C(a),e.resetFields(),a?e.setFieldsValue({username:a.username,name:a.name,role:a.role,team:a.team,department:a.department,active:a.active}):e.setFieldsValue({active:!0,department:"\u751f\u4ea7\u8c03\u5ea6\u90e8"}),j(!0)},q=e=>{$(e)},L=e=>{const a=JSON.parse(localStorage.getItem("user"));e._id!==(null===a||void 0===a?void 0:a._id)?ae({title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7528\u6237\u5417\uff1f",icon:(0,Z.jsx)(B.A,{}),content:`\u7528\u6237\u540d: ${e.username}, \u59d3\u540d: ${e.name}`,okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk(){te(e._id)}}):o.Ay.error("\u4e0d\u80fd\u5220\u9664\u5f53\u524d\u767b\u5f55\u7684\u8d26\u53f7")},te=async e=>{try{console.log("\u5220\u9664\u7528\u6237\uff0cID:",e);const a=await W(e);console.log("\u5220\u9664\u7528\u6237\u54cd\u5e94:",a),o.Ay.success("\u7528\u6237\u5220\u9664\u6210\u529f"),M()}catch(r){var a,t,n,s;console.error("\u5220\u9664\u7528\u6237\u9519\u8bef\u8be6\u60c5:",r),console.error("\u9519\u8bef\u54cd\u5e94:",r.response);const e=(null===(a=r.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||(null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.msg)||r.message||"\u5220\u9664\u7528\u6237\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5";o.Ay.error(`\u5220\u9664\u5931\u8d25: ${e}`)}},ne=e=>{C(e),a.resetFields(),I(!0)};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(g.A,{title:"\u7528\u6237\u7ba1\u7406",extra:(0,Z.jsx)(p.A,{type:"primary",icon:(0,Z.jsx)(V.A,{}),onClick:()=>$(),children:"\u6dfb\u52a0\u7528\u6237"}),children:(0,Z.jsx)(h.A,{columns:D,dataSource:t,rowKey:"_id",loading:y,onChange:(e,a,t)=>{console.log("\u8868\u683c\u53d8\u5316:",e,a,t),E((a=>({...a,current:e.current,pageSize:e.pageSize}))),M({page:e.current,pageSize:e.pageSize})},pagination:{current:k.current,pageSize:k.pageSize,total:k.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`\u5171 ${e} \u6761\u8bb0\u5f55`},bordered:!0,className:"user-table",size:"middle"})}),(0,Z.jsx)(r.A,{title:S?"\u7f16\u8f91\u7528\u6237":"\u6dfb\u52a0\u7528\u6237",open:w,onCancel:()=>j(!1),onOk:async()=>{try{const c=await e.validateFields();console.log("\u4fdd\u5b58\u7528\u6237\u8868\u5355\u6570\u636e:",c);const d={...c,active:"boolean"===typeof c.active?c.active:"true"===c.active};if(console.log("\u51c6\u5907\u53d1\u9001\u5230\u540e\u7aef\u7684\u6570\u636e:",d),S){console.log("\u66f4\u65b0\u7528\u6237\uff0cID:",S._id,"\u6570\u636e:",d);try{const e=await Y(S._id,d);console.log("\u66f4\u65b0\u7528\u6237\u54cd\u5e94:",e),o.Ay.success("\u7528\u6237\u66f4\u65b0\u6210\u529f"),j(!1),M()}catch(i){var a,t,n;console.error("\u66f4\u65b0\u7528\u6237\u9519\u8bef\u8be6\u60c5:",null===(a=i.response)||void 0===a?void 0:a.data);const e=(null===(t=i.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||i.message||"\u66f4\u65b0\u7528\u6237\u5931\u8d25";o.Ay.error(`\u66f4\u65b0\u5931\u8d25: ${e}`)}}else{console.log("\u521b\u5efa\u65b0\u7528\u6237\uff0c\u6570\u636e:",d);try{const e=await Q(d);console.log("\u521b\u5efa\u7528\u6237\u54cd\u5e94:",e),o.Ay.success("\u7528\u6237\u521b\u5efa\u6210\u529f"),j(!1),M()}catch(i){var s,r,l;console.error("\u521b\u5efa\u7528\u6237\u9519\u8bef\u8be6\u60c5:",null===(s=i.response)||void 0===s?void 0:s.data);const e=(null===(r=i.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.message)||i.message||"\u521b\u5efa\u7528\u6237\u5931\u8d25";o.Ay.error(`\u521b\u5efa\u5931\u8d25: ${e}`)}}}catch(i){console.error("\u8868\u5355\u9a8c\u8bc1\u9519\u8bef:",i),o.Ay.error("\u8868\u5355\u9a8c\u8bc1\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165")}},width:600,destroyOnClose:!0,children:(0,Z.jsxs)(l.A,{form:e,layout:"vertical",children:[(0,Z.jsxs)(m.A,{gutter:16,children:[(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"username",label:"\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{min:3,message:"\u7528\u6237\u540d\u81f3\u5c113\u4e2a\u5b57\u7b26"}],children:(0,Z.jsx)(A.A,{disabled:!!S,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"})})}),(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"name",label:"\u59d3\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],children:(0,Z.jsx)(A.A,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"})})})]}),!S&&(0,Z.jsx)(l.A.Item,{name:"password",label:"\u521d\u59cb\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u521d\u59cb\u5bc6\u7801"},{min:6,message:"\u5bc6\u7801\u81f3\u5c116\u4e2a\u5b57\u7b26"}],validateFirst:!0,hasFeedback:!0,children:(0,Z.jsx)(A.A.Password,{placeholder:"\u8bf7\u8f93\u5165\u521d\u59cb\u5bc6\u7801"})}),(0,Z.jsxs)(m.A,{gutter:16,children:[(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"role",label:"\u89d2\u8272",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u89d2\u8272"}],children:(0,Z.jsx)(s.A,{placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272",children:T.map((e=>(0,Z.jsx)(ee,{value:e.value,children:e.label},e.value)))})})}),(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"team",label:"\u73ed\u7ec4",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u73ed\u7ec4"}],children:(0,Z.jsx)(s.A,{placeholder:"\u8bf7\u9009\u62e9\u73ed\u7ec4",children:N.map((e=>(0,Z.jsx)(ee,{value:e.value,children:e.label},e.value)))})})})]}),(0,Z.jsxs)(m.A,{gutter:16,children:[(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"department",label:"\u90e8\u95e8",initialValue:"PRODUCTION",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u90e8\u95e8"}],children:(0,Z.jsx)(s.A,{placeholder:"\u8bf7\u9009\u62e9\u90e8\u95e8",disabled:!0,children:_.map((e=>(0,Z.jsx)(ee,{value:e.value,children:e.label},e.value)))})})}),(0,Z.jsx)(v.A,{span:12,children:(0,Z.jsx)(l.A.Item,{name:"active",label:"\u72b6\u6001",valuePropName:"checked",children:(0,Z.jsx)(P,{checkedChildren:(0,Z.jsx)(K.A,{}),unCheckedChildren:(0,Z.jsx)(G.A,{}),defaultChecked:!0})})})]})]})}),(0,Z.jsxs)(r.A,{title:"\u91cd\u7f6e\u7528\u6237\u5bc6\u7801",open:b,onCancel:()=>I(!1),onOk:async()=>{try{const l=await a.validateFields();console.log("\u91cd\u7f6e\u5bc6\u7801\uff0c\u7528\u6237ID:",S._id);try{if(l.password!==l.confirmPassword)return void o.Ay.error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4");console.log("\u53d1\u9001\u5bc6\u7801\u91cd\u7f6e\u8bf7\u6c42\uff0c\u5bc6\u7801\u957f\u5ea6:",l.password.length);const e=await X(S._id,l.password);console.log("\u91cd\u7f6e\u5bc6\u7801\u54cd\u5e94:",e),o.Ay.success(`\u7528\u6237 ${S.name} \u7684\u5bc6\u7801\u5df2\u91cd\u7f6e`),I(!1)}catch(r){var e,t,n,s;console.error("\u91cd\u7f6e\u5bc6\u7801\u9519\u8bef\u8be6\u60c5:",r),r.response&&(console.error("\u9519\u8bef\u72b6\u6001\u7801:",r.response.status),console.error("\u9519\u8bef\u54cd\u5e94\u6570\u636e:",r.response.data));const a=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||(null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.msg)||r.message||"\u91cd\u7f6e\u5bc6\u7801\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5";o.Ay.error(`\u91cd\u7f6e\u5bc6\u7801\u5931\u8d25: ${a}`)}}catch(r){console.error("\u8868\u5355\u9a8c\u8bc1\u9519\u8bef:",r)}},destroyOnClose:!0,children:[S&&(0,Z.jsxs)("div",{style:{marginBottom:16},children:["\u7528\u6237: ",S.name," (",S.username,")"]}),(0,Z.jsxs)(l.A,{form:a,layout:"vertical",children:[(0,Z.jsx)(l.A.Item,{name:"password",label:"\u65b0\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"},{min:6,message:"\u5bc6\u7801\u81f3\u5c116\u4e2a\u5b57\u7b26"}],validateFirst:!0,hasFeedback:!0,children:(0,Z.jsx)(A.A.Password,{placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801"})}),(0,Z.jsx)(l.A.Item,{name:"confirmPassword",label:"\u786e\u8ba4\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801"},e=>{let{getFieldValue:a}=e;return{validator:(e,t)=>t&&a("password")!==t?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4")):Promise.resolve()}}],validateFirst:!0,hasFeedback:!0,children:(0,Z.jsx)(A.A.Password,{placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801"})})]})]})]})}},61966:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(89379),s=t(65043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var l=t(22172),o=function(e,a){return s.createElement(l.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:r}))};const i=s.forwardRef(o)}}]);
//# sourceMappingURL=884.c7d43bf2.chunk.js.map