"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[256],{19119:(t,e,a)=>{a.r(e),a.d(e,{IMPLEMENTATION_STATUS:()=>r,IMPLEMENTATION_STATUS_COLORS:()=>E,IMPLEMENTATION_STATUS_TRANSITIONS:()=>i,REVIEW_LEVELS:()=>g,REVIEW_RESULTS:()=>u,REVIEW_STATUS:()=>n,REVIEW_STATUS_COLORS:()=>o,REVIEW_STATUS_TRANSITIONS:()=>s,STATUS_COLORS:()=>T,SUGGESTION_STATUS:()=>c,SUGGESTION_TYPES:()=>l,TYPE_COLORS:()=>S});const n={PENDING_FIRST_REVIEW:"\u7b49\u5f85\u4e00\u7ea7\u5ba1\u6838",PENDING_SECOND_REVIEW:"\u7b49\u5f85\u4e8c\u7ea7\u5ba1\u6838",APPROVED:"\u5df2\u6279\u51c6",REJECTED:"\u5df2\u9a73\u56de"},o={PENDING_FIRST_REVIEW:"gold",PENDING_SECOND_REVIEW:"orange",APPROVED:"green",REJECTED:"red"},s={PENDING_FIRST_REVIEW:["APPROVED","REJECTED"],PENDING_SECOND_REVIEW:["APPROVED","REJECTED"],APPROVED:[],REJECTED:["PENDING_FIRST_REVIEW"]},r={NOT_STARTED:"\u672a\u5f00\u59cb",CONTACTING:"\u8054\u7cfb\u4e2d",IN_PROGRESS:"\u5b9e\u65bd\u4e2d",DELAYED:"\u5ef6\u671f",COMPLETED:"\u5df2\u5b8c\u6210",CANCELLED:"\u5df2\u53d6\u6d88"},i={NOT_STARTED:["CONTACTING","CANCELLED"],CONTACTING:["IN_PROGRESS","CANCELLED"],IN_PROGRESS:["COMPLETED","DELAYED","CANCELLED"],DELAYED:["IN_PROGRESS","COMPLETED","CANCELLED"],COMPLETED:[],CANCELLED:["CONTACTING"]},E={NOT_STARTED:"gold",CONTACTING:"processing",IN_PROGRESS:"warning",DELAYED:"orange",COMPLETED:"success",CANCELLED:"red"},c={PENDING_FIRST_REVIEW:"\u7b49\u5f85\u4e00\u7ea7\u5ba1\u6838",PENDING_SECOND_REVIEW:"\u7b49\u5f85\u4e8c\u7ea7\u5ba1\u6838",APPROVED:"\u5df2\u6279\u51c6",REJECTED:"\u5df2\u9a73\u56de",NOT_STARTED:"\u672a\u5f00\u59cb",NOT_IMPLEMENTED:"\u5df2\u6279\u51c6\u5f85\u5b9e\u65bd",IMPLEMENTING:"\u5b9e\u65bd\u4e2d",DELAYED:"\u5b9e\u65bd\u5ef6\u671f",COMPLETED:"\u5df2\u5b8c\u6210",CANCELLED:"\u5df2\u53d6\u6d88"},l={SAFETY:"\u8c03\u5ea6\u5b89\u5168\u7c7b",ELECTRICAL:"\u8bbe\u5907\u7535\u6c14\u7c7b",MECHANICAL:"\u8bbe\u5907\u673a\u68b0\u7c7b",KEXIN_AUTOMATION:"\u79d1\u4fe1\u81ea\u52a8\u5316\u7c7b",KEXIN_MONITORING:"\u79d1\u4fe1\u76d1\u63a7\u7c7b",OTHER:"\u5176\u5b83\u7c7b"},g={FIRST_LEVEL:"\u4e00\u7ea7\u5ba1\u6838",SECOND_LEVEL:"\u4e8c\u7ea7\u5ba1\u6838"},u={PENDING:"\u5f85\u5ba1\u6838",APPROVED:"\u901a\u8fc7",REJECTED:"\u62d2\u7edd"},T={PENDING_FIRST_REVIEW:"gold",PENDING_SECOND_REVIEW:"orange",APPROVED:"green",REJECTED:"red",NOT_STARTED:"default",NOT_IMPLEMENTED:"cyan",IMPLEMENTING:"blue",DELAYED:"purple",COMPLETED:"green",CANCELLED:"magenta"},S={SAFETY:"volcano",ELECTRICAL:"geekblue",MECHANICAL:"orange",KEXIN_AUTOMATION:"cyan",KEXIN_MONITORING:"red",OTHER:"purple"}},26510:(t,e,a)=>{a.d(e,{O:()=>r});var n=a(94505),o=a(86213);const s="/suggestions",r={getCreateData:async()=>{try{return await n.A.get("/suggestions/create")}catch(t){throw console.error("\u83b7\u53d6\u521b\u5efa\u5efa\u8bae\u6570\u636e\u5931\u8d25:",t),t}},submitSuggestion:async t=>{try{console.log("\u63d0\u4ea4\u5efa\u8bae\uff0c\u8868\u5355\u6570\u636e:",t);const e=await n.A.post("/suggestions",t,{headers:{"Content-Type":void 0}});return console.log("\u63d0\u4ea4\u5efa\u8bae\u54cd\u5e94:",e),e}catch(a){var e;throw console.error("\u63d0\u4ea4\u5efa\u8bae\u5931\u8d25:",a),console.error("\u9519\u8bef\u54cd\u5e94:",null===(e=a.response)||void 0===e?void 0:e.data),a}},getSuggestions:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{console.log("suggestionService.getSuggestions - params:",t);const e=new URLSearchParams(t).toString();console.log("suggestionService.getSuggestions - queryString:",e);const a=await n.A.get(`/suggestions?${e}`);console.log("suggestionService.getSuggestions - \u539f\u59cb\u54cd\u5e94:",a);let o={data:[],pagination:{current:parseInt(t.page)||1,pageSize:parseInt(t.limit)||10,total:0}};if(a&&a.data&&Array.isArray(a.data.suggestions))console.log("\u683c\u5f0f1: response.data = { suggestions: [...], pagination: {...} }"),o.data=a.data.suggestions,a.data.pagination&&(o.pagination={current:parseInt(a.data.pagination.current)||o.pagination.current,pageSize:parseInt(a.data.pagination.pageSize)||o.pagination.pageSize,total:parseInt(a.data.pagination.total)||o.pagination.total});else if(a&&Array.isArray(a.data))console.log("\u683c\u5f0f2: response.data = [...]"),o.data=a.data,o.pagination.total=a.data.length;else if(a&&a.data&&a.data.data&&Array.isArray(a.data.data))console.log("\u683c\u5f0f3: response.data.data = [...]"),o.data=a.data.data,a.data.pagination?o.pagination={current:parseInt(a.data.pagination.current)||o.pagination.current,pageSize:parseInt(a.data.pagination.pageSize)||o.pagination.pageSize,total:parseInt(a.data.pagination.total)||o.pagination.total}:o.pagination.total=a.data.data.length;else if(console.warn("suggestionService.getSuggestions - \u672a\u77e5\u54cd\u5e94\u7ed3\u6784:",a),a&&"object"===typeof a){const t=Object.entries(a).find((t=>{let[e,a]=t;return Array.isArray(a)}));t&&(console.log(`\u627e\u5230\u53ef\u80fd\u7684\u6570\u636e\u6570\u7ec4: ${t[0]}`),o.data=t[1],o.pagination.total=t[1].length);const e=Object.entries(a).find((t=>{let[e,a]=t;return"object"===typeof a&&null!==a&&("pagination"===e||"page"===e||"paging"===e)}));if(e){console.log(`\u627e\u5230\u53ef\u80fd\u7684\u5206\u9875\u4fe1\u606f: ${e[0]}`);const t=e[1];o.pagination={current:parseInt(t.current||t.page||t.currentPage||1),pageSize:parseInt(t.pageSize||t.limit||t.size||10),total:parseInt(t.total||t.totalCount||t.totalItems||0)}}}return console.log("suggestionService.getSuggestions - \u5904\u7406\u540e\u7684\u7ed3\u679c:",o),o}catch(a){var e;throw console.error("\u83b7\u53d6\u5efa\u8bae\u5217\u8868\u5931\u8d25:",(null===(e=a.response)||void 0===e?void 0:e.data)||a.message),a}},getSuggestionById:async t=>{try{const e=await n.A.get(`/suggestions/${t}`);return e&&e.data?{data:i(e.data)}:e?{data:i(e)}:e}catch(e){throw console.error("\u83b7\u53d6\u5efa\u8bae\u8be6\u60c5\u5931\u8d25:",e),e}},updateSuggestionStatus:async(t,e,a)=>{try{return await n.A.put(`/suggestions/${t}/status`,{status:e,comment:a})}catch(o){throw console.error("\u66f4\u65b0\u5efa\u8bae\u72b6\u6001\u5931\u8d25:",o),o}},firstReview:async(t,e,a)=>{try{console.log("\u63d0\u4ea4\u4e00\u7ea7\u5ba1\u6838:",t,"\u5ba1\u6838\u7ed3\u679c:",e,"\u5ba1\u6838\u610f\u89c1:",a);const o=await n.A.put(`/suggestions/${t}/first-review`,{result:e,comments:a});return console.log("\u4e00\u7ea7\u5ba1\u6838\u54cd\u5e94:",o),o}catch(s){var o;throw console.error("\u4e00\u7ea7\u5ba1\u6838\u5931\u8d25:",s),console.error("\u9519\u8bef\u8be6\u60c5:",null===(o=s.response)||void 0===o?void 0:o.data),s}},secondReview:async(t,e,a)=>{try{console.log("\u63d0\u4ea4\u4e8c\u7ea7\u5ba1\u6838:",t,"\u5ba1\u6838\u7ed3\u679c:",e,"\u5ba1\u6838\u610f\u89c1:",a);const o=await n.A.put(`/suggestions/${t}/second-review`,{result:e,comments:a});return console.log("\u4e8c\u7ea7\u5ba1\u6838\u54cd\u5e94:",o),o}catch(s){var o;throw console.error("\u4e8c\u7ea7\u5ba1\u6838\u5931\u8d25:",s),console.error("\u9519\u8bef\u8be6\u60c5:",null===(o=s.response)||void 0===o?void 0:o.data),s}},updateSuggestion:async(t,e)=>{try{console.log("\u66f4\u65b0\u5efa\u8bae:",t,e);return await n.A.put(`/suggestions/${t}`,e)}catch(a){throw console.error("\u66f4\u65b0\u5efa\u8bae\u5931\u8d25:",a),a}},addComment:async(t,e)=>{try{return await n.A.post(`/suggestions/${t}/comments`,{content:e})}catch(a){throw console.error("\u6dfb\u52a0\u8bc4\u8bba\u5931\u8d25:",a),a}},getAllSuggestions:async()=>{try{return(await o.A.get(s)).data}catch(t){throw console.error("\u83b7\u53d6\u5efa\u8bae\u5217\u8868\u5931\u8d25:",t),t}},getSuggestion:async t=>{try{return(await o.A.get(`${s}/${t}`)).data}catch(e){throw console.error("\u83b7\u53d6\u5efa\u8bae\u8be6\u60c5\u5931\u8d25:",e),e}},createSuggestion:async t=>{try{return(await o.A.post(s,t)).data}catch(e){throw console.error("\u521b\u5efa\u5efa\u8bae\u5931\u8d25:",e),e}},deleteSuggestion:async t=>{try{console.log(`\u5c1d\u8bd5\u5220\u9664\u5efa\u8bae: ${t}`);const e=await n.A.delete(`/suggestions/${t}`);return console.log("\u5220\u9664\u5efa\u8bae\u54cd\u5e94:",e),e&&!0===e.success?{success:!0,message:e.message}:(console.warn("\u5220\u9664\u6210\u529f\u4f46\u54cd\u5e94\u683c\u5f0f\u4e0d\u7b26\u5408\u9884\u671f:",e),{success:!1,message:(null===e||void 0===e?void 0:e.message)||"\u5220\u9664\u5931\u8d25\uff0c\u54cd\u5e94\u683c\u5f0f\u9519\u8bef"})}catch(s){var e,a,o;return console.error(`\u5220\u9664\u5efa\u8bae ${t} \u5931\u8d25:`,s),console.error("\u9519\u8bef\u54cd\u5e94:",null===(e=s.response)||void 0===e?void 0:e.data),{success:!1,message:(null===(a=s.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"\u5220\u9664\u5efa\u8bae\u65f6\u53d1\u751f\u7f51\u7edc\u6216\u670d\u52a1\u5668\u9519\u8bef"}}},submitForReview:async t=>{try{return(await o.A.post(`${s}/${t}/submit`)).data}catch(e){throw console.error("\u63d0\u4ea4\u5efa\u8bae\u5ba1\u6838\u5931\u8d25:",e),e}},reviewSuggestion:async(t,e)=>{try{return(await o.A.post(`${s}/${t}/review`,e)).data}catch(a){throw console.error("\u5ba1\u6838\u5efa\u8bae\u5931\u8d25:",a),a}},updateImplementation:async(t,e)=>{try{const a={"\u672a\u5f00\u59cb":"NOT_STARTED","\u8054\u7cfb\u4e2d":"CONTACTING","\u5b9e\u65bd\u4e2d":"IN_PROGRESS","\u5df2\u5b8c\u6210":"COMPLETED","\u53d6\u6d88":"CANCELLED"},o={...e,status:a[e.status]||e.status};delete o.evaluation,console.log("\u53d1\u9001\u5b9e\u65bd\u66f4\u65b0\u8bf7\u6c42 (suggestionService):",t,o);const r=await n.A.put(`${s}/${t}/implementation`,o);return console.log("\u5b9e\u65bd\u66f4\u65b0\u54cd\u5e94:",r),{success:!0,message:"\u5b9e\u65bd\u72b6\u6001\u66f4\u65b0\u6210\u529f",data:r.data||r}}catch(i){var a,o,r;return console.error("\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u5931\u8d25 (suggestionService):",i),console.error("\u9519\u8bef\u54cd\u5e94:",null===(a=i.response)||void 0===a?void 0:a.data),{success:!1,message:(null===(o=i.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.message)||"\u66f4\u65b0\u5b9e\u65bd\u72b6\u6001\u5931\u8d25",error:i}}},getImplementationStats:async()=>{try{return(await o.A.get(`${s}/stats/implementation`)).data}catch(t){throw console.error("\u83b7\u53d6\u5b9e\u65bd\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",t),t}},submitReview:async t=>{try{return await n.A.post("/suggestions/review",t)}catch(e){throw e}},scoreSuggestion:async(t,e)=>{try{return await n.A.post(`/suggestions/${t}/score`,{score:e})}catch(a){throw console.error(`\u5efa\u8bae ${t} \u6253\u5206\u5931\u8d25:`,a),a}}};function i(t){if(!t)return{};let e=t.implementation;var n;e?e={...e,status:e.status||"NOT_STARTED",responsiblePerson:e.responsiblePerson||(null===(n=e.implementer)||void 0===n?void 0:n.name)||("string"===typeof e.implementer?e.implementer:"\u672a\u5206\u914d"),startDate:e.startDate||null,plannedEndDate:e.plannedCompletionDate||e.plannedEndDate||null,actualEndDate:e.actualCompletionDate||e.actualEndDate||null,notes:e.notes||e.comments||"",history:e.history||[]}:e={status:"NOT_STARTED",responsiblePerson:"\u672a\u5206\u914d",startDate:null,plannedEndDate:null,actualEndDate:null,notes:"",history:[]};let o=t.reviewStatus||t.status,s=t.implementationStatus||(e?e.status:"NOT_STARTED");const{REVIEW_STATUS:r,IMPLEMENTATION_STATUS:i}=a(19119);return r[o]&&(o=r[o]),i[s]&&(s=i[s]),{...t,reviewStatus:o,implementationStatus:s,implementation:e,submitter:t.submitter||{name:"\u672a\u77e5",_id:null},comments:Array.isArray(t.comments)?t.comments.map((t=>({...t,user:t.user||{name:"\u672a\u77e5\u7528\u6237"},createdAt:t.createdAt||(new Date).toISOString()}))):[]}}},82437:(t,e,a)=>{a.d(e,{Aw:()=>o,qY:()=>s});var n=a(19119);const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"implementation";if(!t)return"\u672a\u77e5\u72b6\u6001";if("string"===typeof t&&/[\u4e00-\u9fa5]/.test(t))return t;return("review"===e?n.REVIEW_STATUS:n.IMPLEMENTATION_STATUS)[t]||t},s=function(t){let e,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"implementation";if(!t)return"default";let s=t;if("string"===typeof t&&/[\u4e00-\u9fa5]/.test(t)){var r;const e="review"===o?n.REVIEW_STATUS:n.IMPLEMENTATION_STATUS,a=null===(r=Object.entries(e).find((e=>{let[a,n]=e;return n===t})))||void 0===r?void 0:r[0];a&&(s=a)}return"review"===o?(e=n.REVIEW_STATUS,a=n.REVIEW_STATUS_COLORS):(e=n.IMPLEMENTATION_STATUS,a=n.IMPLEMENTATION_STATUS_COLORS),a[s]||"default"}}}]);
//# sourceMappingURL=256.034ef1bb.chunk.js.map