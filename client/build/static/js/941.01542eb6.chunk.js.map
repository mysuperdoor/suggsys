{"version":3,"file":"static/js/941.01542eb6.chunk.js","mappings":"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","sources":["utils/authUtils.js","pages/Reports.js"],"sourcesContent":["// 获取认证头信息\r\nexport const getAuthHeader = () => {\r\n  const token = localStorage.getItem('token');\r\n  return token ? { 'Authorization': `Bearer ${token}` } : {};\r\n};\r\n\r\n// 获取当前用户ID\r\nexport const getCurrentUserId = () => {\r\n  return localStorage.getItem('userId');\r\n};\r\n\r\n// 检查用户是否已登录\r\nexport const isAuthenticated = () => {\r\n  return !!localStorage.getItem('token');\r\n};\r\n\r\n// 检查用户是否有特定角色\r\nexport const hasRole = (roleToCheck) => {\r\n  const userRole = localStorage.getItem('userRole');\r\n  return userRole === roleToCheck;\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { Card, Row, Col, Select, DatePicker, Typography, Spin, Alert, Table } from 'antd';\r\nimport { \r\n  BarChart, Bar, LineChart, Line, PieChart, Pie, \r\n  XAxis, YAxis, CartesianGrid, Tooltip, Legend, \r\n  ResponsiveContainer, Cell \r\n} from 'recharts';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport { getAuthHeader } from '../utils/authUtils';\r\n\r\nconst { Title } = Typography;\r\nconst { RangePicker } = DatePicker;\r\nconst { Option } = Select;\r\n\r\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#A64D79'];\r\n\r\n// API基础URL\r\nconst API_BASE_URL = 'http://localhost:5000/api';\r\n\r\nconst Reports = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const [dateRange, setDateRange] = useState([\r\n    moment().subtract(1, 'year'),\r\n    moment()\r\n  ]);\r\n  const [department, setDepartment] = useState('all');\r\n  const [timeUnit, setTimeUnit] = useState('month');\r\n  \r\n  const [monthlyData, setMonthlyData] = useState([]);\r\n  const [departmentData, setDepartmentData] = useState([]);\r\n  const [statusData, setStatusData] = useState([]);\r\n  const [teamData, setTeamData] = useState([]);\r\n  const [typeData, setTypeData] = useState([]);\r\n  const [topContributors, setTopContributors] = useState([]);\r\n  \r\n  // 添加响应式状态\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\r\n  \r\n  // 检测窗口大小变化\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n  \r\n  const fetchReportData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // 构建查询参数\r\n      const params = new URLSearchParams();\r\n      params.append('startDate', dateRange[0].format('YYYY-MM-DD'));\r\n      params.append('endDate', dateRange[1].format('YYYY-MM-DD'));\r\n      if (department !== 'all') {\r\n        params.append('department', department);\r\n      }\r\n      params.append('timeUnit', timeUnit);\r\n      \r\n      // 修复API路径，使用正确的URL前缀\r\n      const response = await axios.get(\r\n        `${API_BASE_URL}/reports/statistics?${params.toString()}`,\r\n        { headers: getAuthHeader() }\r\n      );\r\n      const data = response.data;\r\n      \r\n      // 更新各个图表数据\r\n      setMonthlyData(data.timeDistribution || []);\r\n      setDepartmentData(data.departmentDistribution || []);\r\n      setStatusData(data.statusDistribution || []);\r\n      setTeamData(data.teamDistribution || []);\r\n      setTypeData(data.typeDistribution || []);\r\n      setTopContributors(data.topContributors || []);\r\n      \r\n    } catch (err) {\r\n      console.error('获取报表数据失败:', err);\r\n      setError('获取报表数据失败，请稍后重试');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    fetchReportData();\r\n  }, [department, timeUnit, dateRange]);\r\n  \r\n  // 按日期范围筛选\r\n  const handleDateRangeChange = (dates) => {\r\n    if (dates && dates.length === 2) {\r\n      setDateRange(dates);\r\n    }\r\n  };\r\n  \r\n  // 贡献者列表表格列定义\r\n  const contributorsColumns = [\r\n    {\r\n      title: '排名',\r\n      dataIndex: 'rank',\r\n      key: 'rank',\r\n      width: 80,\r\n      render: (_, __, index) => index + 1\r\n    },\r\n    {\r\n      title: '姓名',\r\n      dataIndex: 'name',\r\n      key: 'name'\r\n    },\r\n    {\r\n      title: '所属班组',\r\n      dataIndex: 'team',\r\n      key: 'team'\r\n    },\r\n    {\r\n      title: '建议数量',\r\n      dataIndex: 'count',\r\n      key: 'count',\r\n      sorter: (a, b) => a.count - b.count\r\n    },\r\n    {\r\n      title: '采纳率',\r\n      dataIndex: 'adoptionRate',\r\n      key: 'adoptionRate',\r\n      render: (text) => `${text}%`,\r\n      sorter: (a, b) => a.adoptionRate - b.adoptionRate\r\n    }\r\n  ];\r\n  \r\n  return (\r\n    <div className=\"responsive-container\" style={{ padding: isMobile ? 12 : 16 }}>\r\n      <Title level={isMobile ? 3 : 2}>统计报表</Title>\r\n      \r\n      {error && (\r\n        <Alert\r\n          message=\"获取数据失败\"\r\n          description={error}\r\n          type=\"error\"\r\n          style={{ marginBottom: 16 }}\r\n          closable\r\n        />\r\n      )}\r\n      \r\n      <Row gutter={[isMobile ? 8 : 16, isMobile ? 8 : 16]} style={{ marginBottom: isMobile ? 12 : 16 }}>\r\n        <Col xs={24} sm={24} md={8}>\r\n          <Select\r\n            defaultValue=\"all\"\r\n            style={{ width: '100%' }}\r\n            value={department}\r\n            onChange={(value) => setDepartment(value)}\r\n          >\r\n            <Option value=\"all\">所有部门</Option>\r\n            <Option value=\"SAFETY\">安全科</Option>\r\n            <Option value=\"OPERATION\">运行科</Option>\r\n          </Select>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={8}>\r\n          <Select\r\n            style={{ width: '100%' }}\r\n            value={timeUnit}\r\n            onChange={(value) => setTimeUnit(value)}\r\n          >\r\n            <Option value=\"year\">按年度统计</Option>\r\n            <Option value=\"quarter\">按季度统计</Option>\r\n            <Option value=\"month\">按月度统计</Option>\r\n            <Option value=\"week\">按周统计</Option>\r\n          </Select>\r\n        </Col>\r\n        <Col xs={24} sm={12} md={8}>\r\n          <RangePicker\r\n            value={dateRange}\r\n            onChange={handleDateRangeChange}\r\n            style={{ width: '100%' }}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      \r\n      <Spin spinning={loading}>\r\n        <Row gutter={[isMobile ? 8 : 16, isMobile ? 12 : 16]}>\r\n          <Col span={24}>\r\n            <Card \r\n              title=\"建议提交趋势\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <ResponsiveContainer width=\"100%\" height={isMobile ? 250 : 300}>\r\n                <LineChart\r\n                  data={monthlyData}\r\n                  margin={{ top: 5, right: 30, left: isMobile ? 0 : 20, bottom: 5 }}\r\n                >\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"timePeriod\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Legend />\r\n                  <Line \r\n                    type=\"monotone\" \r\n                    dataKey=\"count\" \r\n                    name=\"建议数量\" \r\n                    stroke=\"#8884d8\" \r\n                    activeDot={{ r: 8 }} \r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n          </Col>\r\n          \r\n          <Col xs={24} sm={24} md={12}>\r\n            <Card \r\n              title=\"各班组建议分布\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <ResponsiveContainer width=\"100%\" height={isMobile ? 250 : 300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={teamData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={!isMobile}\r\n                    outerRadius={isMobile ? 60 : 80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                    nameKey=\"name\"\r\n                    label={isMobile ? null : ({name, percent}) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                  >\r\n                    {teamData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip formatter={(value) => [`${value} 条建议`, '数量']} />\r\n                  <Legend />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n          </Col>\r\n          \r\n          <Col xs={24} sm={24} md={12}>\r\n            <Card \r\n              title=\"建议类型分布\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <ResponsiveContainer width=\"100%\" height={isMobile ? 250 : 300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={typeData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={!isMobile}\r\n                    outerRadius={isMobile ? 60 : 80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                    nameKey=\"name\"\r\n                    label={isMobile ? null : ({name, percent}) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                  >\r\n                    {typeData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip formatter={(value) => [`${value} 条建议`, '数量']} />\r\n                  <Legend />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n          </Col>\r\n          \r\n          <Col xs={24} sm={24} md={12}>\r\n            <Card \r\n              title=\"建议状态分布\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <ResponsiveContainer width=\"100%\" height={isMobile ? 250 : 300}>\r\n                <PieChart>\r\n                  <Pie\r\n                    data={statusData}\r\n                    cx=\"50%\"\r\n                    cy=\"50%\"\r\n                    labelLine={!isMobile}\r\n                    outerRadius={isMobile ? 60 : 80}\r\n                    fill=\"#8884d8\"\r\n                    dataKey=\"value\"\r\n                    nameKey=\"name\"\r\n                    label={isMobile ? null : ({name, percent}) => `${name}: ${(percent * 100).toFixed(0)}%`}\r\n                  >\r\n                    {statusData.map((entry, index) => (\r\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                    ))}\r\n                  </Pie>\r\n                  <Tooltip formatter={(value) => [`${value} 条建议`, '数量']} />\r\n                  <Legend />\r\n                </PieChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n          </Col>\r\n          \r\n          <Col xs={24} sm={24} md={12}>\r\n            <Card \r\n              title=\"部门分布\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <ResponsiveContainer width=\"100%\" height={isMobile ? 250 : 300}>\r\n                <BarChart\r\n                  data={departmentData}\r\n                  margin={{ top: 5, right: 30, left: isMobile ? 0 : 20, bottom: 5 }}\r\n                >\r\n                  <CartesianGrid strokeDasharray=\"3 3\" />\r\n                  <XAxis dataKey=\"name\" />\r\n                  <YAxis />\r\n                  <Tooltip />\r\n                  <Legend />\r\n                  <Bar dataKey=\"value\" name=\"建议数量\" fill=\"#8884d8\" />\r\n                </BarChart>\r\n              </ResponsiveContainer>\r\n            </Card>\r\n          </Col>\r\n          \r\n          <Col span={24}>\r\n            <Card \r\n              title=\"建议贡献排行榜\"\r\n              bodyStyle={{ padding: isMobile ? 8 : 24 }}\r\n            >\r\n              <Table\r\n                dataSource={topContributors}\r\n                columns={contributorsColumns}\r\n                rowKey=\"id\"\r\n                pagination={{ pageSize: isMobile ? 5 : 10 }}\r\n                scroll={{ x: isMobile ? 500 : undefined }}\r\n                size={isMobile ? \"small\" : \"middle\"}\r\n              />\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Spin>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reports; "],"names":["getAuthHeader","token","localStorage","getItem","Title","Typography","RangePicker","DatePicker","Option","Select","COLORS","Reports","loading","setLoading","useState","error","setError","dateRange","setDateRange","moment","subtract","department","setDepartment","timeUnit","setTimeUnit","monthlyData","setMonthlyData","departmentData","setDepartmentData","statusData","setStatusData","teamData","setTeamData","typeData","setTypeData","topContributors","setTopContributors","isMobile","setIsMobile","window","innerWidth","useEffect","handleResize","addEventListener","removeEventListener","async","params","URLSearchParams","append","format","data","axios","get","toString","headers","timeDistribution","departmentDistribution","statusDistribution","teamDistribution","typeDistribution","err","console","fetchReportData","_jsxs","className","style","padding","children","_jsx","level","Alert","message","description","type","marginBottom","closable","Row","gutter","Col","xs","sm","md","defaultValue","width","value","onChange","dates","length","Spin","spinning","span","Card","title","bodyStyle","ResponsiveContainer","height","LineChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","Legend","Line","name","stroke","activeDot","r","PieChart","Pie","cx","cy","labelLine","outerRadius","fill","nameKey","label","_ref","percent","toFixed","map","entry","index","Cell","formatter","_ref2","_ref3","BarChart","Bar","Table","dataSource","columns","dataIndex","key","render","_","__","sorter","a","b","count","text","adoptionRate","rowKey","pagination","pageSize","scroll","x","undefined","size"],"sourceRoot":""}