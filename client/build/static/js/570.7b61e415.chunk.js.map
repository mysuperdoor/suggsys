{"version":3,"file":"static/js/570.7b61e415.chunk.js","mappings":"oaACO,MAAMA,EAAgB,CAC3BC,qBAAsB,uCACtBC,sBAAuB,uCACvBC,SAAU,qBACVC,SAAU,sBAICC,EAAuB,CAClCJ,qBAAsB,OACtBC,sBAAuB,SACvBC,SAAU,QACVC,SAAU,OAICE,EAA4B,CACvCL,qBAAsB,CAAC,WAAY,YACnCC,sBAAuB,CAAC,WAAY,YACpCC,SAAU,GACVC,SAAU,CAAC,yBAIAG,EAAwB,CACnCC,YAAa,qBACbC,WAAY,qBACZC,YAAa,qBACbC,QAAS,eACTC,UAAW,qBACXC,UAAW,sBAIAC,EAAoC,CAC/CN,YAAa,CAAC,aAAc,aAC5BC,WAAY,CAAC,cAAe,aAC5BC,YAAa,CAAC,YAAa,UAAW,aACtCC,QAAS,CAAC,cAAe,YAAa,aACtCC,UAAW,GACXC,UAAW,CAAC,eAIDE,EAA+B,CAC1CP,YAAa,OACbC,WAAY,aACZC,YAAa,UACbC,QAAS,SACTC,UAAW,UACXC,UAAW,OAIAG,EAAoB,CAC/Bf,qBAAsB,uCACtBC,sBAAuB,uCACvBC,SAAU,qBACVC,SAAU,qBACVI,YAAa,qBACbS,gBAAiB,uCACjBC,aAAc,qBACdP,QAAS,2BACTC,UAAW,qBACXC,UAAW,sBAIAM,EAAmB,CAC9BC,OAAQ,iCACRC,WAAY,iCACZC,WAAY,iCACZC,iBAAkB,uCAClBC,iBAAkB,iCAClBC,MAAO,sBAIIC,EAAgB,CAC3BC,YAAa,2BACbC,aAAc,4BAIHC,EAAiB,CAC5BC,QAAS,qBACT3B,SAAU,eACVC,SAAU,gBAIC2B,EAAgB,CAC3B9B,qBAAsB,OACtBC,sBAAuB,SACvBC,SAAU,QACVC,SAAU,MACVI,YAAa,UACbS,gBAAiB,OACjBC,aAAc,OACdP,QAAS,SACTC,UAAW,QACXC,UAAW,WAIAmB,EAAc,CACzBZ,OAAQ,UACRC,WAAY,WACZC,WAAY,SACZC,iBAAkB,OAClBC,iBAAkB,MAClBC,MAAO,S,6DC5GT,MAAMQ,EAAU,eAEHC,EAAoB,CAE/BC,cAAeC,UACb,IAEE,aADuBC,EAAAA,EAAIC,IAAI,sBAEjC,CAAE,MAAOC,GAEP,MADAC,QAAQD,MAAM,gEAAeA,GACvBA,CACR,GAIFE,iBAAkBL,UAChB,IACEI,QAAQE,IAAI,0DAAcC,GAG1B,MAAMC,QAAiBP,EAAAA,EAAIQ,KAAK,eAAgBF,EAAU,CACxDG,QAAS,CAEP,oBAAgBC,KAKpB,OADAP,QAAQE,IAAI,wCAAWE,GAChBA,CACT,CAAE,MAAOL,GAAQ,IAADS,EAGd,MAFAR,QAAQD,MAAM,wCAAWA,GACzBC,QAAQD,MAAM,4BAAuB,QAAhBS,EAAET,EAAMK,gBAAQ,IAAAI,OAAA,EAAdA,EAAgBC,MACjCV,CACR,GAIFW,eAAgBd,iBAAwB,IAAjBe,EAAMC,UAAAC,OAAA,QAAAN,IAAAK,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC/B,IACEZ,QAAQE,IAAI,6CAA8CS,GAE1D,MAAMG,EAAc,IAAIC,gBAAgBJ,GAAQK,WAChDhB,QAAQE,IAAI,kDAAmDY,GAE/D,MAAMV,QAAiBP,EAAAA,EAAIC,IAAI,gBAAgBgB,KAE/Cd,QAAQE,IAAI,+DAA4CE,GAGxD,IAAIa,EAAS,CACXR,KAAM,GACNS,WAAY,CACVC,QAASC,SAAST,EAAOU,OAAS,EAClCC,SAAUF,SAAST,EAAOY,QAAU,GACpCC,MAAO,IAKX,GAAIpB,GAAYA,EAASK,MAAQgB,MAAMC,QAAQtB,EAASK,KAAKkB,aAC3D3B,QAAQE,IAAI,4EACZe,EAAOR,KAAOL,EAASK,KAAKkB,YACxBvB,EAASK,KAAKS,aAChBD,EAAOC,WAAa,CAClBC,QAASC,SAAShB,EAASK,KAAKS,WAAWC,UAAYF,EAAOC,WAAWC,QACzEG,SAAUF,SAAShB,EAASK,KAAKS,WAAWI,WAAaL,EAAOC,WAAWI,SAC3EE,MAAOJ,SAAShB,EAASK,KAAKS,WAAWM,QAAUP,EAAOC,WAAWM,aAKtE,GAAIpB,GAAYqB,MAAMC,QAAQtB,EAASK,MAC1CT,QAAQE,IAAI,wCACZe,EAAOR,KAAOL,EAASK,KACvBQ,EAAOC,WAAWM,MAAQpB,EAASK,KAAKI,YAGrC,GAAIT,GAAYA,EAASK,MAAQL,EAASK,KAAKA,MAAQgB,MAAMC,QAAQtB,EAASK,KAAKA,MACtFT,QAAQE,IAAI,6CACZe,EAAOR,KAAOL,EAASK,KAAKA,KACxBL,EAASK,KAAKS,WAChBD,EAAOC,WAAa,CAClBC,QAASC,SAAShB,EAASK,KAAKS,WAAWC,UAAYF,EAAOC,WAAWC,QACzEG,SAAUF,SAAShB,EAASK,KAAKS,WAAWI,WAAaL,EAAOC,WAAWI,SAC3EE,MAAOJ,SAAShB,EAASK,KAAKS,WAAWM,QAAUP,EAAOC,WAAWM,OAGvEP,EAAOC,WAAWM,MAAQpB,EAASK,KAAKA,KAAKI,YAO/C,GAFAb,QAAQ4B,KAAK,2EAA8CxB,GAEvDA,GAAgC,kBAAbA,EAAuB,CAE5C,MAAMyB,EAAYC,OAAOC,QAAQ3B,GAAU4B,MAAKC,IAAA,IAAEC,EAAGC,GAAMF,EAAA,OAAKR,MAAMC,QAAQS,EAAM,IAChFN,IACF7B,QAAQE,IAAI,2DAAc2B,EAAU,MACpCZ,EAAOR,KAAOoB,EAAU,GACxBZ,EAAOC,WAAWM,MAAQK,EAAU,GAAGhB,QAIzC,MAAMuB,EAAiBN,OAAOC,QAAQ3B,GAAU4B,MAAKK,IAAA,IAAEC,EAAKH,GAAME,EAAA,MAC/C,kBAAVF,GACG,OAAVA,IACS,eAARG,GAAgC,SAARA,GAA0B,WAARA,EAAiB,IAG9D,GAAIF,EAAgB,CAClBpC,QAAQE,IAAI,2DAAckC,EAAe,MACzC,MAAMG,EAAiBH,EAAe,GACtCnB,EAAOC,WAAa,CAClBC,QAASC,SAASmB,EAAepB,SAAWoB,EAAelB,MAAQkB,EAAeC,aAAe,GACjGlB,SAAUF,SAASmB,EAAejB,UAAYiB,EAAehB,OAASgB,EAAeE,MAAQ,IAC7FjB,MAAOJ,SAASmB,EAAef,OAASe,EAAeG,YAAcH,EAAeI,YAAc,GAEtG,CACF,CAIF,OADA3C,QAAQE,IAAI,2EAA8Ce,GACnDA,CACT,CAAE,MAAOlB,GAAQ,IAAD6C,EAEd,MADA5C,QAAQD,MAAM,qDAA2B,QAAd6C,EAAA7C,EAAMK,gBAAQ,IAAAwC,OAAA,EAAdA,EAAgBnC,OAAQV,EAAM8C,SACnD9C,CACR,CACF,EAGA+C,kBAAmBlD,UACjB,IACE,MAAMQ,QAAiBP,EAAAA,EAAIC,IAAI,gBAAgBiD,KAE/C,OAAI3C,GAAYA,EAASK,KAChB,CACLA,KAAMuC,EAAuB5C,EAASK,OAE/BL,EACF,CACLK,KAAMuC,EAAuB5C,IAG1BA,CACT,CAAE,MAAOL,GAEP,MADAC,QAAQD,MAAM,oDAAaA,GACrBA,CACR,GAIFkD,uBAAwBrD,MAAOmD,EAAIG,EAAQC,KACzC,IAKE,aAJuBtD,EAAAA,EAAIuD,IAAI,gBAAgBL,WAAa,CAC1DG,SACAC,WAGJ,CAAE,MAAOpD,GAEP,MADAC,QAAQD,MAAM,oDAAaA,GACrBA,CACR,GAIFsD,YAAazD,MAAOmD,EAAIO,EAAUC,KAChC,IACEvD,QAAQE,IAAI,wCAAW6C,EAAI,4BAASO,EAAU,4BAASC,GACvD,MAAMnD,QAAiBP,EAAAA,EAAIuD,IAAI,gBAAgBL,iBAAmB,CAChE9B,OAAQqC,EACRC,SAAUA,IAGZ,OADAvD,QAAQE,IAAI,wCAAWE,GAChBA,CACT,CAAE,MAAOL,GAAQ,IAADyD,EAGd,MAFAxD,QAAQD,MAAM,wCAAWA,GACzBC,QAAQD,MAAM,4BAAuB,QAAhByD,EAAEzD,EAAMK,gBAAQ,IAAAoD,OAAA,EAAdA,EAAgB/C,MACjCV,CACR,GAIF0D,aAAc7D,MAAOmD,EAAIO,EAAUC,KACjC,IACEvD,QAAQE,IAAI,wCAAW6C,EAAI,4BAASO,EAAU,4BAASC,GACvD,MAAMnD,QAAiBP,EAAAA,EAAIuD,IAAI,gBAAgBL,kBAAoB,CACjE9B,OAAQqC,EACRC,SAAUA,IAGZ,OADAvD,QAAQE,IAAI,wCAAWE,GAChBA,CACT,CAAE,MAAOL,GAAQ,IAAD2D,EAGd,MAFA1D,QAAQD,MAAM,wCAAWA,GACzBC,QAAQD,MAAM,4BAAuB,QAAhB2D,EAAE3D,EAAMK,gBAAQ,IAAAsD,OAAA,EAAdA,EAAgBjD,MACjCV,CACR,GAIF4D,iBAAkB/D,MAAOmD,EAAIa,KAC3B,IACE5D,QAAQE,IAAI,4BAAS6C,EAAIa,GAEzB,aADuB/D,EAAAA,EAAIuD,IAAI,gBAAgBL,IAAMa,EAEvD,CAAE,MAAO7D,GAEP,MADAC,QAAQD,MAAM,wCAAWA,GACnBA,CACR,GAMF8D,WAAYjE,MAAOmD,EAAII,KACrB,IAIE,aAHuBtD,EAAAA,EAAIQ,KAAK,gBAAgB0C,aAAe,CAC7De,QAASX,GAGb,CAAE,MAAOpD,GAEP,MADAC,QAAQD,MAAM,wCAAWA,GACnBA,CACR,GAIFgE,kBAAmBnE,UACjB,IAEE,aADuBoE,EAAAA,EAAMlE,IAAIL,IACjBgB,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,oDAAaA,GACrBA,CACR,GAIFkE,cAAerE,UACb,IAEE,aADuBoE,EAAAA,EAAMlE,IAAI,GAAGL,KAAWsD,MAC/BtC,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,oDAAaA,GACrBA,CACR,GAIFmE,iBAAkBtE,UAChB,IAEE,aADuBoE,EAAAA,EAAM3D,KAAKZ,EAAS0E,IAC3B1D,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,wCAAWA,GACnBA,CACR,GAIFqE,iBAAkBxE,UAChB,IACEI,QAAQE,IAAI,yCAAW6C,KACvB,MAAM3C,QAAiBP,EAAAA,EAAIwE,OAAO,gBAAgBtB,KAGlD,OAFA/C,QAAQE,IAAI,wCAAWE,GAEnBA,IAAiC,IAArBA,EAASkE,QAChB,CAAEA,SAAS,EAAMzB,QAASzC,EAASyC,UAG1C7C,QAAQ4B,KAAK,wFAAmBxB,GACzB,CAAEkE,SAAS,EAAOzB,SAAiB,OAARzC,QAAQ,IAARA,OAAQ,EAARA,EAAUyC,UAAW,sEAE3D,CAAE,MAAO9C,GAAQ,IAADwE,EAAAC,EAAAC,EAGd,OAFAzE,QAAQD,MAAM,4BAAQgD,kBAAUhD,GAChCC,QAAQD,MAAM,4BAAuB,QAAhBwE,EAAExE,EAAMK,gBAAQ,IAAAmE,OAAA,EAAdA,EAAgB9D,MAChC,CACL6D,SAAS,EACTzB,SAAuB,QAAd2B,EAAAzE,EAAMK,gBAAQ,IAAAoE,GAAM,QAANC,EAAdD,EAAgB/D,YAAI,IAAAgE,OAAN,EAAdA,EAAsB5B,UAAW,6FAE9C,GAIF6B,gBAAiB9E,UACf,IAEE,aADuBoE,EAAAA,EAAM3D,KAAK,GAAGZ,KAAWsD,aAChCtC,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,oDAAaA,GACrBA,CACR,GAIF4E,iBAAkB/E,MAAOmD,EAAI6B,KAC3B,IAEE,aADuBZ,EAAAA,EAAM3D,KAAK,GAAGZ,KAAWsD,WAAa6B,IAC7CnE,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,wCAAWA,GACnBA,CACR,GAIF8E,qBAAsBjF,MAAOmD,EAAI+B,KAC/B,IAEE,MAAMC,EAAY,CAChB,qBAAO,cACP,qBAAO,aACP,qBAAO,cACP,qBAAO,YACP,eAAM,aAIFC,EAAgB,IACjBF,EACH5B,OAAQ6B,EAAUD,EAAmB5B,SAAW4B,EAAmB5B,eAG9D8B,EAAcC,WAErBjF,QAAQE,IAAI,wEAAiC6C,EAAIiC,GAOjD,MAAM5E,QAAiBP,EAAAA,EAAIuD,IAAI,GAAG3D,KAAWsD,mBAAqBiC,GAKlE,OAHAhF,QAAQE,IAAI,wCAAWE,GAGhB,CACLkE,SAAS,EACTzB,QAAS,mDACTpC,KAAML,EAASK,MAAQL,EAG3B,CAAE,MAAOL,GAAQ,IAADmF,EAAAC,EAAAC,EAId,OAHApF,QAAQD,MAAM,wEAAiCA,GAC/CC,QAAQD,MAAM,4BAAuB,QAAhBmF,EAAEnF,EAAMK,gBAAQ,IAAA8E,OAAA,EAAdA,EAAgBzE,MAEhC,CACL6D,SAAS,EACTzB,SAAuB,QAAdsC,EAAApF,EAAMK,gBAAQ,IAAA+E,GAAM,QAANC,EAAdD,EAAgB1E,YAAI,IAAA2E,OAAN,EAAdA,EAAsBvC,UAAW,mDAC1C9C,MAAOA,EAEX,GAIFsF,uBAAwBzF,UACtB,IAEE,aADuBoE,EAAAA,EAAMlE,IAAI,GAAGL,2BACpBgB,IAClB,CAAE,MAAOV,GAEP,MADAC,QAAQD,MAAM,gEAAeA,GACvBA,CACR,GAIFuF,aAAc1F,UACZ,IAEE,aADuBC,EAAAA,EAAIQ,KAAK,sBAAuBuE,EAEzD,CAAE,MAAO7E,GACP,MAAMA,CACR,GAIFwF,gBAAiB3F,MAAOmD,EAAIyC,KAC1B,IAEE,aADuB3F,EAAAA,EAAIQ,KAAK,gBAAgB0C,UAAY,CAAEyC,SAEhE,CAAE,MAAOzF,GAEP,MADAC,QAAQD,MAAM,gBAAMgD,8BAAYhD,GAC1BA,CACR,IAKJ,SAASiD,EAAuByC,GAC9B,IAAKA,EAAY,MAAO,CAAC,EAGzB,IAAIC,EAAiBD,EAAWC,eACX,IAADC,EAAhBD,EAEFA,EAAiB,IACZA,EAEHxC,OAAQwC,EAAexC,QAAU,cAEjC0C,kBAAmBF,EAAeE,oBACW,QADMD,EAChCD,EAAeG,mBAAW,IAAAF,OAAA,EAA1BA,EAA4BG,QACW,kBAA/BJ,EAAeG,YAA2BH,EAAeG,YAAc,sBAElGE,UAAWL,EAAeK,WAAa,KACvCC,eAAgBN,EAAeO,uBAAyBP,EAAeM,gBAAkB,KACzFE,cAAeR,EAAeS,sBAAwBT,EAAeQ,eAAiB,KAEtFE,MAAOV,EAAeU,OAASV,EAAenC,UAAY,GAE1D8C,QAASX,EAAeW,SAAW,IAIrCX,EAAiB,CACfxC,OAAQ,cACR0C,kBAAmB,qBACnBG,UAAW,KACXC,eAAgB,KAChBE,cAAe,KACfE,MAAO,GACPC,QAAS,IAKb,IAAIC,EAAeb,EAAWa,cAAgBb,EAAWvC,OACrDqD,EAAuBd,EAAWc,uBACZb,EAAiBA,EAAexC,OAAS,eAGnE,MAAM,cAAE1F,EAAa,sBAAEO,GAA0ByI,EAAQ,OAYzD,OATIhJ,EAAc8I,KAChBA,EAAe9I,EAAc8I,IAI3BvI,EAAsBwI,KACxBA,EAAuBxI,EAAsBwI,IAGxC,IACFd,EACHa,eACAC,uBACAb,iBAEAe,UAAWhB,EAAWgB,WAAa,CAAEX,KAAM,eAAMY,IAAK,MAEtDnD,SAAU9B,MAAMC,QAAQ+D,EAAWlC,UAAYkC,EAAWlC,SAASoD,KAAIxD,IAAO,IACzEA,EACHyD,KAAMzD,EAAQyD,MAAQ,CAAEd,KAAM,4BAC9Be,UAAW1D,EAAQ0D,YAAa,IAAIC,MAAOC,kBACvC,GAEV,C,uTCtZA,QA/CiC,SAAUC,GAEzC,SAASC,IACP,IAAIC,EANYC,EAAGC,EAAGC,EAetB,OARAC,EAAAA,EAAAA,GAAgBC,KAAMN,GAPNE,EAQGI,KARAH,EAQMH,EARHI,EAQkBzG,UARNwG,GAAII,EAAAA,EAAAA,GAAgBJ,IAQtDF,GAR0DO,EAAAA,EAAAA,GAA2BN,GAAGO,EAAAA,EAAAA,KAA8BC,QAAQC,UAAUR,EAAGC,GAAK,IAAIG,EAAAA,EAAAA,GAAgBL,GAAGU,aAAeT,EAAEU,MAAMX,EAAGE,KAS3LU,MAAQ,CACZhI,WAAOQ,EACPyH,KAAM,CACJC,eAAgB,KAGbf,CACT,CAgCA,OA5CAgB,EAAAA,EAAAA,GAAUjB,EAAeD,IAazBmB,EAAAA,EAAAA,GAAalB,EAAe,CAAC,CAC3B3E,IAAK,oBACLH,MAAO,SAA2BpC,EAAOiI,GACvCT,KAAKa,SAAS,CACZrI,MAAOA,EACPiI,KAAMA,GAEV,GACC,CACD1F,IAAK,SACLH,MAAO,WACL,IAAIkG,EAAcd,KAAKe,MACrBzF,EAAUwF,EAAYxF,QACtB0F,EAAcF,EAAYE,YAC1BC,EAAWH,EAAYG,SACrBC,EAAclB,KAAKQ,MACrBhI,EAAQ0I,EAAY1I,MACpBiI,EAAOS,EAAYT,KACjBC,EAAiBD,GAAQA,EAAKC,eAAiBD,EAAKC,eAAiB,KACrES,EAAkC,qBAAZ7F,GAA2B9C,GAAS,IAAIiB,WAAa6B,EAC3E8F,EAA0C,qBAAhBJ,EAA8BN,EAAiBM,EAC7E,OAAIxI,EACkB6I,EAAAA,cAAoBC,EAAO,CAC7CC,KAAM,QACNjG,QAAS6F,EACTH,YAA0BK,EAAAA,cAAoB,MAAO,KAAMD,KAGxDH,CACT,KAEKvB,CACT,CA9CiC,CA8C/B2B,EAAAA,WCpDF,IAAIG,EAAgC,SAAUC,EAAG3B,GAC/C,IAAIF,EAAI,CAAC,EACT,IAAK,IAAI8B,KAAKD,EAAOlH,OAAOoH,UAAUC,eAAeC,KAAKJ,EAAGC,IAAM5B,EAAEgC,QAAQJ,GAAK,IAAG9B,EAAE8B,GAAKD,EAAEC,IAC9F,GAAS,MAALD,GAAqD,oBAAjClH,OAAOwH,sBAA2C,KAAIC,EAAI,EAAb,IAAgBN,EAAInH,OAAOwH,sBAAsBN,GAAIO,EAAIN,EAAEpI,OAAQ0I,IAClIlC,EAAEgC,QAAQJ,EAAEM,IAAM,GAAKzH,OAAOoH,UAAUM,qBAAqBJ,KAAKJ,EAAGC,EAAEM,MAAKpC,EAAE8B,EAAEM,IAAMP,EAAEC,EAAEM,IADuB,CAGvH,OAAOpC,CACT,EAiBIsC,EAAgB,CAClBnF,QAASoF,EAAAA,EACT1B,KAAM2B,EAAAA,EACN5J,MAAO6J,EAAAA,EACPC,QAASC,EAAAA,GAEPC,EAAkB,CACpBzF,QAAS0F,EAAAA,EACThC,KAAMiC,EAAAA,EACNlK,MAAOmK,EAAAA,EACPL,QAASM,EAAAA,GAEPC,EAAW,SAAkB9B,GAC/B,IAAIC,EAAcD,EAAMC,YACtB8B,EAAO/B,EAAM+B,KACbC,EAAYhC,EAAMgC,UAClBxB,EAAOR,EAAMQ,KACXyB,GAAYhC,EAAcwB,EAAkBN,GAAeX,IAAS,KACxE,OAAIuB,GACKG,EAAAA,EAAAA,IAAeH,EAAmBzB,EAAAA,cAAoB,OAAQ,CACnE6B,UAAW,GAAGC,OAAOJ,EAAW,UAC/BD,IAAO,WACR,MAAO,CACLI,UAAWE,IAAW,GAAGD,OAAOJ,EAAW,UAAUM,EAAAA,EAAAA,GAAgB,CAAC,EAAGP,EAAK/B,MAAMmC,UAAWJ,EAAK/B,MAAMmC,YAE9G,IAEkB7B,EAAAA,cAAoB2B,EAAU,CAChDE,UAAW,GAAGC,OAAOJ,EAAW,UAEpC,EACIO,EAAY,SAAmBvC,GACjC,IAAIwC,EAAaxC,EAAMwC,WACrBC,EAAYzC,EAAMyC,UAClBT,EAAYhC,EAAMgC,UAClBU,EAAY1C,EAAM0C,UAClBC,EAAc3C,EAAM2C,YACtB,OAAOH,EAA4BlC,EAAAA,cAAoB,SAAU,CAC/DE,KAAM,SACNoC,QAASD,EACTR,UAAW,GAAGC,OAAOJ,EAAW,eAChCa,SAAU,GACTJ,EAAyBnC,EAAAA,cAAoB,OAAQ,CACtD6B,UAAW,GAAGC,OAAOJ,EAAW,gBAC/BS,GAAaC,GAAc,IAChC,EACInC,EAAQ,SAAeuC,GACzB,IAAI7C,EAAc6C,EAAG7C,YACnB8C,EAAqBD,EAAGd,UACxBzH,EAAUuI,EAAGvI,QACbyI,EAASF,EAAGE,OACZC,EAAeH,EAAGX,UAClBA,OAA6B,IAAjBc,EAA0B,GAAKA,EAC3CC,EAAQJ,EAAGI,MACXC,EAAeL,EAAGK,aAClBC,EAAeN,EAAGM,aAClBR,EAAUE,EAAGF,QACbS,EAAaP,EAAGO,WAChBC,EAAWR,EAAGQ,SACdC,EAAWT,EAAGS,SACdd,EAAYK,EAAGL,UACfe,EAAeV,EAAGJ,UAClBA,OAA6B,IAAjBc,EAAuClD,EAAAA,cAAoBmD,EAAAA,EAAe,MAAQD,EAC9FE,EAASZ,EAAGY,OACZ1D,EAAQS,EAAOqC,EAAI,CAAC,cAAe,YAAa,UAAW,SAAU,YAAa,QAAS,eAAgB,eAAgB,UAAW,aAAc,WAAY,WAAY,YAAa,YAAa,WACpMa,EAAkBrD,EAAAA,UAAe,GACnCsD,GAAmBC,EAAAA,EAAAA,GAAeF,EAAiB,GACnDG,EAASF,EAAiB,GAC1BG,EAAYH,EAAiB,GAC3BI,EAAM1D,EAAAA,SACN2D,EAAoB3D,EAAAA,WAAiB4D,EAAAA,IACvCC,EAAeF,EAAkBE,aACjCC,EAAYH,EAAkBG,UAC5BpC,EAAYmC,EAAa,QAASpB,GAClCJ,EAAc,SAAqB5D,GACrC,IAAI+D,EACJiB,GAAU,GACe,QAAxBjB,EAAK9C,EAAMqE,eAA4B,IAAPvB,GAAyBA,EAAGhC,KAAKd,EAAOjB,EAC3E,EAUIyD,IAAaC,GAAmBc,EAChC/C,EAVU,WACZ,IAAIA,EAAOR,EAAMQ,KACjB,YAAavI,IAATuI,EACKA,EAGFwC,EAAS,UAAY,MAC9B,CAGWsB,GAEPC,KAAavB,QAAuB/K,IAAbqL,IAAgCA,EACvDkB,EAAWnC,IAAWL,EAAW,GAAGI,OAAOJ,EAAW,KAAKI,OAAO5B,IAAO8B,EAAAA,EAAAA,IAAgBA,EAAAA,EAAAA,IAAgBA,EAAAA,EAAAA,IAAgBA,EAAAA,EAAAA,GAAgB,CAAC,EAAG,GAAGF,OAAOJ,EAAW,uBAAwB/B,GAAc,GAAGmC,OAAOJ,EAAW,aAAcuC,GAAa,GAAGnC,OAAOJ,EAAW,aAAcgB,GAAS,GAAGZ,OAAOJ,EAAW,QAAuB,QAAdoC,GAAsBjC,GACxVsC,GAAkBC,EAAAA,EAAAA,GAAmB1E,GACzC,OAAoBM,EAAAA,cAAoBqE,EAAAA,GAAW,CACjDC,SAAUd,EACVe,WAAY,GAAGzC,OAAOJ,EAAW,WACjC8C,cAAc,EACdC,aAAa,EACbC,aAAc,SAAsBC,GAClC,MAAO,CACLC,UAAWD,EAAKE,aAEpB,EACAC,WAAY/B,IACX,SAAU1J,GACX,IAAI0L,EAAkB1L,EAAKwI,UACzBmD,EAAc3L,EAAKuJ,MACrB,OAAoB5C,EAAAA,cAAoB,OAAOiF,EAAAA,EAAAA,GAAS,CACtDvB,IAAKA,EACL,aAAcF,EACd3B,UAAWE,IAAWmC,EAAUa,GAChCnC,OAAOqC,EAAAA,EAAAA,IAASA,EAAAA,EAAAA,GAAS,CAAC,EAAGrC,GAAQoC,GACrCnC,aAAcA,EACdC,aAAcA,EACdR,QAASA,EACT4C,KAAM,SACLf,GAAkBF,EAA4BjE,EAAAA,cAAoBwB,EAAU,CAC7E7B,YAAaA,EACb8B,KAAM/B,EAAM+B,KACZC,UAAWA,EACXxB,KAAMA,IACF,KAAmBF,EAAAA,cAAoB,MAAO,CAClD6B,UAAW,GAAGC,OAAOJ,EAAW,aAC/BzH,EAAuB+F,EAAAA,cAAoB,MAAO,CACnD6B,UAAW,GAAGC,OAAOJ,EAAW,aAC/BzH,GAAW,KAAM0F,EAA2BK,EAAAA,cAAoB,MAAO,CACxE6B,UAAW,GAAGC,OAAOJ,EAAW,iBAC/B/B,GAAe,MAAOyD,EAAsBpD,EAAAA,cAAoB,MAAO,CACxE6B,UAAW,GAAGC,OAAOJ,EAAW,YAC/B0B,GAAU,KAAmBpD,EAAAA,cAAoBiC,EAAW,CAC7DC,aAAcA,EACdC,UAAWA,EACXT,UAAWA,EACXU,UAAWA,EACXC,YAAaA,IAEjB,GACF,EACApC,EAAM5B,cAAgBA,EACtB,S,6KCrKA,QADqB,CAAE,KAAQ,CAAE,IAAO,MAAO,MAAS,CAAE,QAAW,gBAAiB,UAAa,SAAW,SAAY,CAAC,CAAE,IAAO,OAAQ,MAAS,CAAE,EAAK,gTAAoT,KAAQ,SAAU,MAAS,Y,eCKve8G,EAAiB,SAAwBzF,EAAOgE,GAClD,OAAoB1D,EAAAA,cAAoBoF,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAG3F,GAAQ,CAAC,EAAG,CAC5FgE,IAAKA,EACLjC,KAAM6D,IAEV,EAKA,QAJ2BtF,EAAAA,WAAiBmF,G,gDCK5C,MAAM,SAAEI,GAAaC,EAAAA,GACf,OAAEC,GAAWC,EAAAA,EAgQnB,EA9PsBC,KACpB,MAAOC,GAAQC,EAAAA,EAAKC,WACbC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAiBC,IAAsBJ,EAAAA,EAAAA,UAAS,KAChDK,EAAcC,IAAmBN,EAAAA,EAAAA,WAAS,IAC1CO,EAAaC,IAAkBR,EAAAA,EAAAA,UAAS,OACxCS,EAAkBC,IAAuBV,EAAAA,EAAAA,WAAS,IAClDW,EAAUC,IAAeZ,EAAAA,EAAAA,UAASa,OAAOC,YAAc,KACxDC,GAAWC,EAAAA,EAAAA,OAGjBC,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAeA,KACnBN,EAAYC,OAAOC,YAAc,IAAI,EAIvC,OADAD,OAAOM,iBAAiB,SAAUD,GAC3B,KACLL,OAAOO,oBAAoB,SAAUF,EAAa,CACnD,GACA,KAGHD,EAAAA,EAAAA,YAAU,KACoBlQ,WAC1B,IACE,MAAMgH,QAAasJ,EAAAA,EAAYC,iBAC/Bd,EAAezI,IAGXA,GAAuB,+CAAdA,EAAKkH,MAAoC,+CAAdlH,EAAKkH,OAC3C9N,QAAQE,IAAI,4EAAiB0G,EAAKkH,MAClCyB,GAAoB,GACpB1M,EAAAA,GAAQ9C,MAAM,sHAGdqQ,YAAW,KACTR,EAAS,oBAAoB,GAC5B,MAEP,CAAE,MAAO7P,GACPC,QAAQD,MAAM,oDAAaA,EAC7B,GAGFsQ,EAAqB,GACpB,CAACT,KAGJE,EAAAA,EAAAA,YAAU,KACiBlQ,WACvB,IACEuP,GAAgB,GAChB,MAAM/O,QAAiBV,EAAAA,EAAkBC,gBACzCK,QAAQE,IAAI,oDAAaE,GAErBA,GAAYA,EAASkQ,MACvBrB,EAAmB7O,EAASkQ,OAG5BrB,EAAmB,CACjB,CAAEsB,MAAO,2BAAQpO,MAAO,UACxB,CAAEoO,MAAO,2BAAQpO,MAAO,cACxB,CAAEoO,MAAO,iCAASpO,MAAO,cACzB,CAAEoO,MAAO,eAAMpO,MAAO,UAG5B,CAAE,MAAOpC,GACPC,QAAQD,MAAM,oDAAaA,GAC3B8C,EAAAA,GAAQ9C,MAAM,8FAEdkP,EAAmB,CACjB,CAAEsB,MAAO,2BAAQpO,MAAO,UACxB,CAAEoO,MAAO,2BAAQpO,MAAO,cACxB,CAAEoO,MAAO,iCAASpO,MAAO,cACzB,CAAEoO,MAAO,eAAMpO,MAAO,UAE1B,CAAC,QACCgN,GAAgB,EAClB,GAGFqB,EAAkB,GACjB,IAuDH,OACEC,EAAAA,EAAAA,KAAA,OAAKhG,UAAU,uBAAsBjC,UACnCkI,EAAAA,EAAAA,MAACC,EAAAA,EAAI,CACHC,MAAM,6CACNjC,QAASO,EACT2B,UAAW,CAAEC,QAAStB,EAAW,OAAS,QAAShH,SAAA,CAElD8G,IACCmB,EAAAA,EAAAA,KAAC5H,EAAAA,EAAK,CACJhG,QAAQ,2BACR0F,YAAY,2HACZO,KAAK,QACL8C,UAAQ,EACRJ,MAAO,CAAEuF,aAAc,OAI3BL,EAAAA,EAAAA,MAACjC,EAAAA,EAAI,CACHD,KAAMA,EACNwC,OAAO,WACPC,SAnEarR,UAEnB,GAAI0P,EACFzM,EAAAA,GAAQ9C,MAAM,qEAIhB,IACE6O,GAAW,GACX5O,QAAQE,IAAI,wCAAWgR,GAGvB,MAAM/Q,EAAW,IAAIgR,SAGrBrC,EAASsC,SAAQ,CAACC,EAAMC,KAClBD,EAAKE,gBACPvR,QAAQE,IAAI,4BAAQoR,KAAUD,EAAKvL,MACnC3F,EAASqR,OAAO,QAASH,EAAKE,eAChC,IAIFzP,OAAO2P,KAAKP,GAAQE,SAAQ9O,IAC1BtC,QAAQE,IAAI,4BAAQoC,KAAQ4O,EAAO5O,IACnCnC,EAASqR,OAAOlP,EAAK4O,EAAO5O,GAAK,IAInC,IAAK,IAAIoP,KAAQvR,EAAS4B,UACxB/B,QAAQE,IAAIwR,EAAK,GAAK,MAAQA,EAAK,aAAcC,KAAOD,EAAK,GAAG5L,KAAO4L,EAAK,KAI9E,MAAMtR,QAAiBV,EAAAA,EAAkBO,iBAAiBE,GAE1DH,QAAQE,IAAI,8CAAYE,GACxByC,EAAAA,GAAQyB,QAAQ,8CAChBsL,EAAS,oBACX,CAAE,MAAO7P,GAAQ,IAADS,EAAAoR,EACd5R,QAAQD,MAAM,wCAAWA,GACzB8C,EAAAA,GAAQ9C,MAAM,8BAAuB,QAAdS,EAAAT,EAAMK,gBAAQ,IAAAI,GAAM,QAANoR,EAAdpR,EAAgBC,YAAI,IAAAmR,OAAN,EAAdA,EAAsB/O,UAAW9C,EAAM8C,SAAW,uBAC3E,CAAC,QACC+L,GAAW,EACb,GAwBMiD,SAAU3C,GAAgBI,EAC1B9D,MAAO,CAAEsG,MAAO,QAAStJ,SAAA,EAEzBiI,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CACRjM,KAAK,QACLyK,MAAM,2BACNyB,MAAO,CAAC,CAAEC,UAAU,EAAMpP,QAAS,+CAAa2F,UAEhDiI,EAAAA,EAAAA,KAACrC,EAAAA,EAAK,CAAC8D,YAAY,6CAAUC,UAAW,SAG1C1B,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CACRjM,KAAK,OACLyK,MAAM,2BACNyB,MAAO,CAAC,CAAEC,UAAU,EAAMpP,QAAS,+CAAa2F,UAEhDiI,EAAAA,EAAAA,KAACnC,EAAAA,EAAM,CAAC4D,YAAY,6CAAS1J,SAC1BwG,EAAgBrI,KAAImC,IACnB2H,EAAAA,EAAAA,KAACpC,EAAM,CAAkBlM,MAAO2G,EAAK3G,MAAMqG,SACxCM,EAAKyH,OADKzH,EAAK3G,cAOxBsO,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CACRjM,KAAK,UACLyK,MAAM,2BACNyB,MAAO,CAAC,CAAEC,UAAU,EAAMpP,QAAS,+CAAa2F,UAEhDiI,EAAAA,EAAAA,KAACtC,EAAQ,CACP+D,YAAY,4DACZE,KAAM5C,EAAW,EAAI,EACrB2C,UAAW,IACXE,WAAS,OAIb5B,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CACRjM,KAAK,kBACLyK,MAAM,2BACNyB,MAAO,CAAC,CAAEC,UAAU,EAAMpP,QAAS,+CAAa2F,UAEhDiI,EAAAA,EAAAA,KAACtC,EAAQ,CACP+D,YAAY,gGACZE,KAAM5C,EAAW,EAAI,EACrB2C,UAAW,IACXE,WAAS,OAIb5B,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CACRxB,MAAM,eACN+B,MAAM,kHAAiC9J,UAEvCiI,EAAAA,EAAAA,KAAC8B,EAAAA,EAAM,CACLzD,SAAUA,EACV0D,SAlIavQ,IAAmB,IAAlB,SAAE6M,GAAU7M,EACpC8M,EAAYD,EAAS,EAkIX2D,aAAcA,KAAM,EACpBC,SAAU,EAAElK,UAEZiI,EAAAA,EAAAA,KAACkC,EAAAA,EAAM,CAACtI,MAAMoG,EAAAA,EAAAA,KAAC1C,EAAc,IAAK8D,SAAUvC,EAAiB9G,SAAC,kCAIlEiI,EAAAA,EAAAA,KAAChC,EAAAA,EAAKsD,KAAI,CAAAvJ,UACRkI,EAAAA,EAAAA,MAACkC,EAAAA,EAAK,CAACpH,MAAO,CACZqH,QAASrD,EAAW,OAAS,cAC7BsD,cAAetD,EAAW,SAAW,MACrCsC,MAAOtC,EAAW,OAAS,QAC3BhH,SAAA,EACAiI,EAAAA,EAAAA,KAACkC,EAAAA,EAAM,CACL7J,KAAK,UACLiK,SAAS,SACTpE,QAASA,EACTkD,SAAUvC,EACV9D,MAAO,CAAEsG,MAAOtC,EAAW,OAAS,QAAShH,SAC9C,8BAGDiI,EAAAA,EAAAA,KAACkC,EAAAA,EAAM,CACLzH,QAASA,IAAM0E,EAAS,qBACxBpE,MAAO,CAAEsG,MAAOtC,EAAW,OAAS,QAAShH,SAC9C,6BAOL,C","sources":["constants/suggestions.js","services/suggestionService.js","../node_modules/antd/es/alert/ErrorBoundary.js","../node_modules/antd/es/alert/index.js","../node_modules/@ant-design/icons-svg/es/asn/UploadOutlined.js","../node_modules/@ant-design/icons/es/icons/UploadOutlined.js","pages/Suggestions/New.js"],"sourcesContent":["// 审核状态\nexport const REVIEW_STATUS = {\n  PENDING_FIRST_REVIEW: '等待一级审核',\n  PENDING_SECOND_REVIEW: '等待二级审核',\n  APPROVED: '已批准',\n  REJECTED: '已驳回',\n};\n\n// 审核状态颜色映射\nexport const REVIEW_STATUS_COLORS = {\n  PENDING_FIRST_REVIEW: 'gold',     // 金色 - 等待一级审核\n  PENDING_SECOND_REVIEW: 'orange',  // 橙色 - 等待二级审核\n  APPROVED: 'green',               // 绿色 - 已批准\n  REJECTED: 'red',                 // 红色 - 已驳回\n};\n\n// 审核状态流转规则\nexport const REVIEW_STATUS_TRANSITIONS = {\n  PENDING_FIRST_REVIEW: ['APPROVED', 'REJECTED'],\n  PENDING_SECOND_REVIEW: ['APPROVED', 'REJECTED'],\n  APPROVED: [],\n  REJECTED: ['PENDING_FIRST_REVIEW'],\n};\n\n// 实施状态\nexport const IMPLEMENTATION_STATUS = {\n  NOT_STARTED: '未开始',\n  CONTACTING: '联系中',\n  IN_PROGRESS: '实施中',\n  DELAYED: '延期',\n  COMPLETED: '已完成',\n  CANCELLED: '已取消'\n};\n\n// 实施状态流转规则\nexport const IMPLEMENTATION_STATUS_TRANSITIONS = {\n  NOT_STARTED: ['CONTACTING', 'CANCELLED'],\n  CONTACTING: ['IN_PROGRESS', 'CANCELLED'],\n  IN_PROGRESS: ['COMPLETED', 'DELAYED', 'CANCELLED'],\n  DELAYED: ['IN_PROGRESS', 'COMPLETED', 'CANCELLED'],\n  COMPLETED: [],\n  CANCELLED: ['CONTACTING']\n};\n\n// 实施状态颜色\nexport const IMPLEMENTATION_STATUS_COLORS = {\n  NOT_STARTED: 'gold',   //金色\n  CONTACTING: 'processing', // 蓝色\n  IN_PROGRESS: 'warning',   // 黄色\n  DELAYED: 'orange',        // 橙色\n  COMPLETED: 'success',     // 绿色\n  CANCELLED: 'red'         // 红色\n};\n\n// 保留原有的状态定义以确保兼容性\nexport const SUGGESTION_STATUS = {\n  PENDING_FIRST_REVIEW: '等待一级审核',\n  PENDING_SECOND_REVIEW: '等待二级审核',\n  APPROVED: '已批准',\n  REJECTED: '已驳回',\n  NOT_STARTED: '未开始',\n  NOT_IMPLEMENTED: '已批准待实施',\n  IMPLEMENTING: '实施中',\n  DELAYED: '实施延期',\n  COMPLETED: '已完成',\n  CANCELLED: '已取消',\n};\n\n// 建议类型\nexport const SUGGESTION_TYPES = {\n  SAFETY: '调度安全类',\n  ELECTRICAL: '设备电气类',\n  MECHANICAL: '设备机械类',\n  KEXIN_AUTOMATION: '科信自动化类',\n  KEXIN_MONITORING: '科信监控类',\n  OTHER: '其它类'\n};\n\n// 审核级别\nexport const REVIEW_LEVELS = {\n  FIRST_LEVEL: '一级审核',\n  SECOND_LEVEL: '二级审核'\n};\n\n// 审核结果\nexport const REVIEW_RESULTS = {\n  PENDING: '待审核',\n  APPROVED: '通过',\n  REJECTED: '拒绝'\n};\n\n// 建议状态颜色映射 (保留以兼容现有代码)\nexport const STATUS_COLORS = {\n  PENDING_FIRST_REVIEW: 'gold',        // 金色 - 等待一级审核\n  PENDING_SECOND_REVIEW: 'orange',     // 橙色 - 等待二级审核\n  APPROVED: 'green',                   // 绿色 - 已批准\n  REJECTED: 'red',                     // 红色 - 已驳回\n  NOT_STARTED: 'default',              // 默认灰色 - 未开始\n  NOT_IMPLEMENTED: 'cyan',             // 青色 - a已批准待实施\n  IMPLEMENTING: 'blue',                // 蓝色 - 实施中\n  DELAYED: 'purple',                   // 紫色 - 实施延期\n  COMPLETED: 'green',                  // 绿色 - 已完成\n  CANCELLED: 'magenta',                // 洋红色 - 已取消\n};\n\n// 建议类型颜色映射\nexport const TYPE_COLORS = {\n  SAFETY: 'volcano',                   // 火山色 - 调度安全类\n  ELECTRICAL: 'geekblue',              // 极客蓝 - 设备电气类\n  MECHANICAL: 'orange',                // 活力橙 - 设备机械类\n  KEXIN_AUTOMATION: 'cyan',            // 科技青 - 科信自动化类\n  KEXIN_MONITORING: 'red',             // 警戒红 - 科信监控类\n  OTHER: 'purple'                      // 紫色 - 其它类\n}; \n","import api from './api';\nimport axios from 'axios';\n\n// 移除开头的 /api，假设 api 实例已配置 baseURL: '/api'\nconst API_URL = '/suggestions';\n\nexport const suggestionService = {\n  // 获取创建建议初始数据\n  getCreateData: async () => {\n    try {\n      const response = await api.get('/suggestions/create');\n      return response;\n    } catch (error) {\n      console.error('获取创建建议数据失败:', error);\n      throw error;\n    }\n  },\n\n  // 提交建议\n  submitSuggestion: async (formData) => {\n    try {\n      console.log('提交建议，表单数据:', formData);\n      \n      // 确保Content-Type由浏览器自动设置\n      const response = await api.post('/suggestions', formData, {\n        headers: {\n          // 不要显式设置Content-Type，让浏览器自动设置，确保边界字符串正确\n          'Content-Type': undefined\n        }\n      });\n      \n      console.log('提交建议响应:', response);\n      return response;\n    } catch (error) {\n      console.error('提交建议失败:', error);\n      console.error('错误响应:', error.response?.data);\n      throw error;\n    }\n  },\n\n  // 获取建议列表\n  getSuggestions: async (params = {}) => {\n    try {\n      console.log('suggestionService.getSuggestions - params:', params);\n      // 将 params 对象转换为查询字符串\n      const queryString = new URLSearchParams(params).toString();\n      console.log('suggestionService.getSuggestions - queryString:', queryString);\n      // 将查询字符串附加到 URL，并使用 api 对象\n      const response = await api.get(`/suggestions?${queryString}`); \n      \n      console.log('suggestionService.getSuggestions - 原始响应:', response);\n      \n      // 分析响应结构并适配成统一的格式：{ data: [...], pagination: {...} }\n      let result = {\n        data: [],\n        pagination: {\n          current: parseInt(params.page) || 1,\n          pageSize: parseInt(params.limit) || 10,\n          total: 0\n        }\n      };\n      \n      // 1. 检查后端直接返回的 suggestions 和 pagination 格式\n      if (response && response.data && Array.isArray(response.data.suggestions)) {\n        console.log('格式1: response.data = { suggestions: [...], pagination: {...} }');\n        result.data = response.data.suggestions;\n        if (response.data.pagination) {\n          result.pagination = {\n            current: parseInt(response.data.pagination.current) || result.pagination.current,\n            pageSize: parseInt(response.data.pagination.pageSize) || result.pagination.pageSize,\n            total: parseInt(response.data.pagination.total) || result.pagination.total\n          };\n        }\n      } \n      // 2. 检查直接返回数组的格式\n      else if (response && Array.isArray(response.data)) {\n        console.log('格式2: response.data = [...]');\n        result.data = response.data;\n        result.pagination.total = response.data.length; // 直接返回数组时，总数就是数组长度\n      }\n      // 3. 检查嵌套数据的格式\n      else if (response && response.data && response.data.data && Array.isArray(response.data.data)) {\n        console.log('格式3: response.data.data = [...]');\n        result.data = response.data.data;\n        if (response.data.pagination) {\n          result.pagination = {\n            current: parseInt(response.data.pagination.current) || result.pagination.current,\n            pageSize: parseInt(response.data.pagination.pageSize) || result.pagination.pageSize,\n            total: parseInt(response.data.pagination.total) || result.pagination.total\n          };\n        } else {\n          result.pagination.total = response.data.data.length; // 没有分页信息时，总数为数组长度\n        }\n      } \n      // 4. 处理其他可能的格式\n      else {\n        console.warn('suggestionService.getSuggestions - 未知响应结构:', response);\n        // 尝试从响应中提取有用信息\n        if (response && typeof response === 'object') {\n          // 尝试找到第一个数组类型的属性作为数据\n          const arrayProp = Object.entries(response).find(([_, value]) => Array.isArray(value));\n          if (arrayProp) {\n            console.log(`找到可能的数据数组: ${arrayProp[0]}`);\n            result.data = arrayProp[1];\n            result.pagination.total = arrayProp[1].length;\n          }\n          \n          // 尝试找到分页信息\n          const paginationProp = Object.entries(response).find(([key, value]) => \n            typeof value === 'object' && \n            value !== null && \n            (key === 'pagination' || key === 'page' || key === 'paging')\n          );\n          \n          if (paginationProp) {\n            console.log(`找到可能的分页信息: ${paginationProp[0]}`);\n            const paginationData = paginationProp[1];\n            result.pagination = {\n              current: parseInt(paginationData.current || paginationData.page || paginationData.currentPage || 1),\n              pageSize: parseInt(paginationData.pageSize || paginationData.limit || paginationData.size || 10),\n              total: parseInt(paginationData.total || paginationData.totalCount || paginationData.totalItems || 0)\n            };\n          }\n        }\n      }\n      \n      console.log('suggestionService.getSuggestions - 处理后的结果:', result);\n      return result;\n    } catch (error) {\n      console.error('获取建议列表失败:', error.response?.data || error.message);\n      throw error;\n    }\n  },\n\n  // 获取单个建议详情\n  getSuggestionById: async (id) => {\n    try {\n      const response = await api.get(`/suggestions/${id}`);\n      // 验证并修复可能的空数据\n      if (response && response.data) {\n        return {\n          data: validateSuggestionData(response.data)\n        };\n      } else if (response) {\n        return {\n          data: validateSuggestionData(response)\n        };\n      }\n      return response;\n    } catch (error) {\n      console.error('获取建议详情失败:', error);\n      throw error;\n    }\n  },\n\n  // 更新建议状态\n  updateSuggestionStatus: async (id, status, comment) => {\n    try {\n      const response = await api.put(`/suggestions/${id}/status`, {\n        status,\n        comment\n      });\n      return response;\n    } catch (error) {\n      console.error('更新建议状态失败:', error);\n      throw error;\n    }\n  },\n\n  // 一级审核\n  firstReview: async (id, approved, comments) => {\n    try {\n      console.log('提交一级审核:', id, '审核结果:', approved, '审核意见:', comments);\n      const response = await api.put(`/suggestions/${id}/first-review`, {\n        result: approved,  // 使用 result 字段\n        comments: comments\n      });\n      console.log('一级审核响应:', response);\n      return response;\n    } catch (error) {\n      console.error('一级审核失败:', error);\n      console.error('错误详情:', error.response?.data);\n      throw error;\n    }\n  },\n\n  // 二级审核\n  secondReview: async (id, approved, comments) => {\n    try {\n      console.log('提交二级审核:', id, '审核结果:', approved, '审核意见:', comments);\n      const response = await api.put(`/suggestions/${id}/second-review`, {\n        result: approved,  // 使用 result 字段\n        comments: comments\n      });\n      console.log('二级审核响应:', response);\n      return response;\n    } catch (error) {\n      console.error('二级审核失败:', error);\n      console.error('错误详情:', error.response?.data);\n      throw error;\n    }\n  },\n\n  // 更新建议\n  updateSuggestion: async (id, updateData) => {\n    try {\n      console.log('更新建议:', id, updateData);\n      const response = await api.put(`/suggestions/${id}`, updateData);\n      return response;\n    } catch (error) {\n      console.error('更新建议失败:', error);\n      throw error;\n    }\n  },\n\n  // 撤回功能已删除\n\n  // 添加评论\n  addComment: async (id, comment) => {\n    try {\n      const response = await api.post(`/suggestions/${id}/comments`, {\n        content: comment\n      });\n      return response;\n    } catch (error) {\n      console.error('添加评论失败:', error);\n      throw error;\n    }\n  },\n\n  // 获取所有建议\n  getAllSuggestions: async () => {\n    try {\n      const response = await axios.get(API_URL);\n      return response.data;\n    } catch (error) {\n      console.error('获取建议列表失败:', error);\n      throw error;\n    }\n  },\n\n  // 获取单个建议\n  getSuggestion: async (id) => {\n    try {\n      const response = await axios.get(`${API_URL}/${id}`);\n      return response.data;\n    } catch (error) {\n      console.error('获取建议详情失败:', error);\n      throw error;\n    }\n  },\n\n  // 创建新建议\n  createSuggestion: async (suggestionData) => {\n    try {\n      const response = await axios.post(API_URL, suggestionData);\n      return response.data;\n    } catch (error) {\n      console.error('创建建议失败:', error);\n      throw error;\n    }\n  },\n\n  // 删除建议\n  deleteSuggestion: async (id) => {\n    try {\n      console.log(`尝试删除建议: ${id}`);\n      const response = await api.delete(`/suggestions/${id}`);\n      console.log('删除建议响应:', response);\n      // 后端返回 { success: true, message: '...' }\n      if (response && response.success === true) {\n        return { success: true, message: response.message };\n      } else {\n        // 如果后端没有按预期返回 success: true\n        console.warn('删除成功但响应格式不符合预期:', response);\n        return { success: false, message: response?.message || '删除失败，响应格式错误' };\n      }\n    } catch (error) {\n      console.error(`删除建议 ${id} 失败:`, error);\n      console.error('错误响应:', error.response?.data);\n      return {\n        success: false,\n        message: error.response?.data?.message || '删除建议时发生网络或服务器错误'\n      };\n    }\n  },\n\n  // 提交建议审核\n  submitForReview: async (id) => {\n    try {\n      const response = await axios.post(`${API_URL}/${id}/submit`);\n      return response.data;\n    } catch (error) {\n      console.error('提交建议审核失败:', error);\n      throw error;\n    }\n  },\n\n  // 审核建议\n  reviewSuggestion: async (id, reviewData) => {\n    try {\n      const response = await axios.post(`${API_URL}/${id}/review`, reviewData);\n      return response.data;\n    } catch (error) {\n      console.error('审核建议失败:', error);\n      throw error;\n    }\n  },\n  \n  // 更新建议实施状态\n  updateImplementation: async (id, implementationData) => {\n    try {\n      // 使用新的实施状态映射\n      const statusMap = {\n        '未开始': 'NOT_STARTED',\n        '联系中': 'CONTACTING',\n        '实施中': 'IN_PROGRESS',\n        '已完成': 'COMPLETED',\n        '取消': 'CANCELLED'\n      };\n\n      // 准备发送到后端的数据\n      const updatePayload = {\n        ...implementationData,\n        status: statusMap[implementationData.status] || implementationData.status,\n      };\n      // 删除 evaluation 键，以防万一\n      delete updatePayload.evaluation;\n\n      console.log('发送实施更新请求 (suggestionService):', id, updatePayload);\n      \n      // 调用统一的更新接口 (假设是 PUT /api/suggestions/:id/implementation 或类似)\n      // 注意：后端路由和控制器需要对应这个路径和方法\n      // 查找之前的代码，发现后端控制器是 suggestionController.updateImplementation\n      // 路由是 PUT /api/suggestions/:id/implementation (需要确认或调整)\n      // 假设路由是 /api/suggestions/:id/implementation\n      const response = await api.put(`${API_URL}/${id}/implementation`, updatePayload);\n      \n      console.log('实施更新响应:', response);\n      \n      // 返回成功标识和数据\n      return {\n        success: true,\n        message: '实施状态更新成功',\n        data: response.data || response // 根据后端实际返回调整\n      };\n\n    } catch (error) {\n      console.error('更新实施状态失败 (suggestionService):', error);\n      console.error('错误响应:', error.response?.data);\n      // 返回包含错误信息的对象\n      return {\n        success: false,\n        message: error.response?.data?.message || '更新实施状态失败', // 优先使用后端错误信息\n        error: error\n      };\n    }\n  },\n  \n  // 获取实施统计数据\n  getImplementationStats: async () => {\n    try {\n      const response = await axios.get(`${API_URL}/stats/implementation`);\n      return response.data;\n    } catch (error) {\n      console.error('获取实施统计数据失败:', error);\n      throw error;\n    }\n  },\n\n  // 提交审核\n  submitReview: async (reviewData) => {\n    try {\n      const response = await api.post('/suggestions/review', reviewData);\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  // 部门经理为建议打分\n  scoreSuggestion: async (id, score) => {\n    try {\n      const response = await api.post(`/suggestions/${id}/score`, { score });\n      return response; // 通常返回更新后的 suggestion 对象\n    } catch (error) {\n      console.error(`建议 ${id} 打分失败:`, error);\n      throw error; // 将错误抛出给调用者处理\n    }\n  }\n};\n\n// 验证并修复建议数据，确保关键字段存在\nfunction validateSuggestionData(suggestion) {\n  if (!suggestion) return {};\n\n  // 处理实施信息，确保字段命名一致\n  let implementation = suggestion.implementation;\n  if (implementation) {\n    // 确保前端显示所需的字段存在\n    implementation = {\n      ...implementation,\n      // 确保状态字段存在，并进行状态名称标准化\n      status: implementation.status || 'NOT_STARTED',\n      // 确保责任人字段存在，优先使用responsiblePerson字段\n      responsiblePerson: implementation.responsiblePerson || \n                         implementation.implementer?.name || \n                         (typeof implementation.implementer === 'string' ? implementation.implementer : '未分配'),\n      // 确保日期字段存在\n      startDate: implementation.startDate || null,\n      plannedEndDate: implementation.plannedCompletionDate || implementation.plannedEndDate || null,\n      actualEndDate: implementation.actualCompletionDate || implementation.actualEndDate || null,\n      // 确保备注字段存在\n      notes: implementation.notes || implementation.comments || '',\n      // 确保历史记录存在\n      history: implementation.history || []\n    };\n  } else {\n    // 如果没有实施信息，创建默认的实施信息\n    implementation = {\n      status: 'NOT_STARTED',\n      responsiblePerson: '未分配',\n      startDate: null,\n      plannedEndDate: null,\n      actualEndDate: null,\n      notes: '',\n      history: []\n    };\n  }\n  \n  // 处理建议状态\n  let reviewStatus = suggestion.reviewStatus || suggestion.status;\n  let implementationStatus = suggestion.implementationStatus || \n                           (implementation ? implementation.status : 'NOT_STARTED');\n  \n  // 导入状态常量\n  const { REVIEW_STATUS, IMPLEMENTATION_STATUS } = require('../constants/suggestions');\n  \n  // 转换审核状态\n  if (REVIEW_STATUS[reviewStatus]) {\n    reviewStatus = REVIEW_STATUS[reviewStatus];\n  }\n  \n  // 转换实施状态\n  if (IMPLEMENTATION_STATUS[implementationStatus]) {\n    implementationStatus = IMPLEMENTATION_STATUS[implementationStatus];\n  }\n  \n  return {\n    ...suggestion,\n    reviewStatus,\n    implementationStatus,\n    implementation,\n    // 确保submitter字段存在\n    submitter: suggestion.submitter || { name: '未知', _id: null },\n    // 确保comments字段是数组\n    comments: Array.isArray(suggestion.comments) ? suggestion.comments.map(comment => ({\n      ...comment,\n      user: comment.user || { name: '未知用户' },\n      createdAt: comment.createdAt || new Date().toISOString()\n    })) : []\n  };\n} ","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nimport * as React from 'react';\nimport Alert from '.';\nvar ErrorBoundary = /*#__PURE__*/function (_React$Component) {\n  _inherits(ErrorBoundary, _React$Component);\n  function ErrorBoundary() {\n    var _this;\n    _classCallCheck(this, ErrorBoundary);\n    _this = _callSuper(this, ErrorBoundary, arguments);\n    _this.state = {\n      error: undefined,\n      info: {\n        componentStack: ''\n      }\n    };\n    return _this;\n  }\n  _createClass(ErrorBoundary, [{\n    key: \"componentDidCatch\",\n    value: function componentDidCatch(error, info) {\n      this.setState({\n        error: error,\n        info: info\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        message = _this$props.message,\n        description = _this$props.description,\n        children = _this$props.children;\n      var _this$state = this.state,\n        error = _this$state.error,\n        info = _this$state.info;\n      var componentStack = info && info.componentStack ? info.componentStack : null;\n      var errorMessage = typeof message === 'undefined' ? (error || '').toString() : message;\n      var errorDescription = typeof description === 'undefined' ? componentStack : description;\n      if (error) {\n        return /*#__PURE__*/React.createElement(Alert, {\n          type: \"error\",\n          message: errorMessage,\n          description: /*#__PURE__*/React.createElement(\"pre\", null, errorDescription)\n        });\n      }\n      return children;\n    }\n  }]);\n  return ErrorBoundary;\n}(React.Component);\nexport default ErrorBoundary;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CheckCircleOutlined from \"@ant-design/icons/es/icons/CheckCircleOutlined\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport CloseCircleOutlined from \"@ant-design/icons/es/icons/CloseCircleOutlined\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport ExclamationCircleOutlined from \"@ant-design/icons/es/icons/ExclamationCircleOutlined\";\nimport InfoCircleFilled from \"@ant-design/icons/es/icons/InfoCircleFilled\";\nimport InfoCircleOutlined from \"@ant-design/icons/es/icons/InfoCircleOutlined\";\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport getDataOrAriaProps from '../_util/getDataOrAriaProps';\nimport { replaceElement } from '../_util/reactNode';\nimport ErrorBoundary from './ErrorBoundary';\nvar iconMapFilled = {\n  success: CheckCircleFilled,\n  info: InfoCircleFilled,\n  error: CloseCircleFilled,\n  warning: ExclamationCircleFilled\n};\nvar iconMapOutlined = {\n  success: CheckCircleOutlined,\n  info: InfoCircleOutlined,\n  error: CloseCircleOutlined,\n  warning: ExclamationCircleOutlined\n};\nvar IconNode = function IconNode(props) {\n  var description = props.description,\n    icon = props.icon,\n    prefixCls = props.prefixCls,\n    type = props.type;\n  var iconType = (description ? iconMapOutlined : iconMapFilled)[type] || null;\n  if (icon) {\n    return replaceElement(icon, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-icon\")\n    }, icon), function () {\n      return {\n        className: classNames(\"\".concat(prefixCls, \"-icon\"), _defineProperty({}, icon.props.className, icon.props.className))\n      };\n    });\n  }\n  return /*#__PURE__*/React.createElement(iconType, {\n    className: \"\".concat(prefixCls, \"-icon\")\n  });\n};\nvar CloseIcon = function CloseIcon(props) {\n  var isClosable = props.isClosable,\n    closeText = props.closeText,\n    prefixCls = props.prefixCls,\n    closeIcon = props.closeIcon,\n    handleClose = props.handleClose;\n  return isClosable ? ( /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleClose,\n    className: \"\".concat(prefixCls, \"-close-icon\"),\n    tabIndex: 0\n  }, closeText ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-close-text\")\n  }, closeText) : closeIcon)) : null;\n};\nvar Alert = function Alert(_a) {\n  var description = _a.description,\n    customizePrefixCls = _a.prefixCls,\n    message = _a.message,\n    banner = _a.banner,\n    _a$className = _a.className,\n    className = _a$className === void 0 ? '' : _a$className,\n    style = _a.style,\n    onMouseEnter = _a.onMouseEnter,\n    onMouseLeave = _a.onMouseLeave,\n    onClick = _a.onClick,\n    afterClose = _a.afterClose,\n    showIcon = _a.showIcon,\n    closable = _a.closable,\n    closeText = _a.closeText,\n    _a$closeIcon = _a.closeIcon,\n    closeIcon = _a$closeIcon === void 0 ? /*#__PURE__*/React.createElement(CloseOutlined, null) : _a$closeIcon,\n    action = _a.action,\n    props = __rest(_a, [\"description\", \"prefixCls\", \"message\", \"banner\", \"className\", \"style\", \"onMouseEnter\", \"onMouseLeave\", \"onClick\", \"afterClose\", \"showIcon\", \"closable\", \"closeText\", \"closeIcon\", \"action\"]);\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    closed = _React$useState2[0],\n    setClosed = _React$useState2[1];\n  var ref = React.useRef();\n  var _React$useContext = React.useContext(ConfigContext),\n    getPrefixCls = _React$useContext.getPrefixCls,\n    direction = _React$useContext.direction;\n  var prefixCls = getPrefixCls('alert', customizePrefixCls);\n  var handleClose = function handleClose(e) {\n    var _a;\n    setClosed(true);\n    (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props, e);\n  };\n  var getType = function getType() {\n    var type = props.type;\n    if (type !== undefined) {\n      return type;\n    }\n    // banner 模式默认为警告\n    return banner ? 'warning' : 'info';\n  };\n  // closeable when closeText is assigned\n  var isClosable = closeText ? true : closable;\n  var type = getType();\n  // banner 模式默认有 Icon\n  var isShowIcon = banner && showIcon === undefined ? true : showIcon;\n  var alertCls = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, \"\".concat(prefixCls, \"-with-description\"), !!description), \"\".concat(prefixCls, \"-no-icon\"), !isShowIcon), \"\".concat(prefixCls, \"-banner\"), !!banner), \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), className);\n  var dataOrAriaProps = getDataOrAriaProps(props);\n  return /*#__PURE__*/React.createElement(CSSMotion, {\n    visible: !closed,\n    motionName: \"\".concat(prefixCls, \"-motion\"),\n    motionAppear: false,\n    motionEnter: false,\n    onLeaveStart: function onLeaveStart(node) {\n      return {\n        maxHeight: node.offsetHeight\n      };\n    },\n    onLeaveEnd: afterClose\n  }, function (_ref) {\n    var motionClassName = _ref.className,\n      motionStyle = _ref.style;\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      ref: ref,\n      \"data-show\": !closed,\n      className: classNames(alertCls, motionClassName),\n      style: _extends(_extends({}, style), motionStyle),\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onClick: onClick,\n      role: \"alert\"\n    }, dataOrAriaProps), isShowIcon ? ( /*#__PURE__*/React.createElement(IconNode, {\n      description: description,\n      icon: props.icon,\n      prefixCls: prefixCls,\n      type: type\n    })) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-content\")\n    }, message ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-message\")\n    }, message) : null, description ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-description\")\n    }, description) : null), action ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-action\")\n    }, action) : null, /*#__PURE__*/React.createElement(CloseIcon, {\n      isClosable: !!isClosable,\n      closeText: closeText,\n      prefixCls: prefixCls,\n      closeIcon: closeIcon,\n      handleClose: handleClose\n    }));\n  });\n};\nAlert.ErrorBoundary = ErrorBoundary;\nexport default Alert;","// This icon file is generated automatically.\nvar UploadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"upload\", \"theme\": \"outlined\" };\nexport default UploadOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UploadOutlinedSvg from \"@ant-design/icons-svg/es/asn/UploadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar UploadOutlined = function UploadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: UploadOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(UploadOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'UploadOutlined';\n}\nexport default RefIcon;","import React, { useState, useEffect } from 'react';\nimport {\n  Form,\n  Input,\n  Select,\n  Upload,\n  Button,\n  Card,\n  message,\n  Space,\n  Alert\n} from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { useNavigate } from 'react-router-dom';\nimport { suggestionService } from '../../services/suggestionService';\nimport { authService } from '../../services/authService';\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\nconst NewSuggestion = () => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [fileList, setFileList] = useState([]);\n  const [suggestionTypes, setSuggestionTypes] = useState([]);\n  const [initializing, setInitializing] = useState(true);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isRestrictedUser, setIsRestrictedUser] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);\n  const navigate = useNavigate();\n\n  // 检测窗口大小变化\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // 检查用户权限\n  useEffect(() => {\n    const checkUserPermission = async () => {\n      try {\n        const user = await authService.getCurrentUser();\n        setCurrentUser(user);\n        \n        // 检查是否是运行科或安全科管理人员\n        if (user && (user.role === '运行科管理人员' || user.role === '安全科管理人员')) {\n          console.log('当前用户没有提交建议权限:', user.role);\n          setIsRestrictedUser(true);\n          message.error('运行科和安全科管理人员暂时无法提交建议');\n          \n          // 延迟一秒后重定向，让用户有时间看到消息\n          setTimeout(() => {\n            navigate('/suggestions/list');\n          }, 1500);\n        }\n      } catch (error) {\n        console.error('检查用户权限失败:', error);\n      }\n    };\n    \n    checkUserPermission();\n  }, [navigate]);\n\n  // 获取初始数据\n  useEffect(() => {\n    const fetchInitialData = async () => {\n      try {\n        setInitializing(true);\n        const response = await suggestionService.getCreateData();\n        console.log('获取创建建议数据:', response);\n        \n        if (response && response.types) {\n          setSuggestionTypes(response.types);\n        } else {\n          // 如果API还没准备好，使用默认数据\n          setSuggestionTypes([\n            { label: '安全管理', value: 'SAFETY' },\n            { label: '生产优化', value: 'PRODUCTION' },\n            { label: '智能化升级', value: 'AUTOMATION' },\n            { label: '其它', value: 'OTHER' }\n          ]);\n        }\n      } catch (error) {\n        console.error('获取初始数据失败:', error);\n        message.error('加载表单数据失败，使用默认配置');\n        // 使用默认数据\n        setSuggestionTypes([\n          { label: '安全管理', value: 'SAFETY' },\n          { label: '生产优化', value: 'PRODUCTION' },\n          { label: '智能化升级', value: 'AUTOMATION' },\n          { label: '其它', value: 'OTHER' }\n        ]);\n      } finally {\n        setInitializing(false);\n      }\n    };\n\n    fetchInitialData();\n  }, []);\n\n  // 处理文件上传\n  const handleFileChange = ({ fileList }) => {\n    setFileList(fileList);\n  };\n\n  // 处理表单提交\n  const handleSubmit = async (values) => {\n    // 再次检查用户权限\n    if (isRestrictedUser) {\n      message.error('您没有提交建议的权限');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      console.log('提交的表单值:', values);\n      \n      // 创建FormData对象\n      const formData = new FormData();\n      \n      // 添加文件\n      fileList.forEach((file, index) => {\n        if (file.originFileObj) {\n          console.log(`添加文件 ${index}:`, file.name);\n          formData.append('files', file.originFileObj);\n        }\n      });\n\n      // 添加其他表单数据\n      Object.keys(values).forEach(key => {\n        console.log(`添加字段 ${key}:`, values[key]);\n        formData.append(key, values[key]);\n      });\n\n      // 打印FormData内容（仅用于调试）\n      for (let pair of formData.entries()) {\n        console.log(pair[0] + ': ' + (pair[1] instanceof File ? pair[1].name : pair[1]));\n      }\n\n      // 提交建议\n      const response = await suggestionService.submitSuggestion(formData);\n      \n      console.log('提交成功，响应:', response);\n      message.success('建议提交成功！');\n      navigate('/suggestions/list');\n    } catch (error) {\n      console.error('提交建议失败:', error);\n      message.error(`提交失败: ${error.response?.data?.message || error.message || '请重试'}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"responsive-container\">\n      <Card \n        title=\"提交合理化建议\" \n        loading={initializing}\n        bodyStyle={{ padding: isMobile ? '12px' : '24px' }}\n      >\n        {isRestrictedUser && (\n          <Alert\n            message=\"权限受限\"\n            description=\"运行科和安全科管理人员暂时无法提交建议。\"\n            type=\"error\"\n            showIcon\n            style={{ marginBottom: 16 }}\n          />\n        )}\n        \n        <Form\n          form={form}\n          layout=\"vertical\"\n          onFinish={handleSubmit}\n          disabled={initializing || isRestrictedUser}\n          style={{ width: '100%' }}\n        >\n          <Form.Item\n            name=\"title\"\n            label=\"建议标题\"\n            rules={[{ required: true, message: '请输入建议标题' }]}\n          >\n            <Input placeholder=\"请输入建议标题\" maxLength={100} />\n          </Form.Item>\n\n          <Form.Item\n            name=\"type\"\n            label=\"建议类型\"\n            rules={[{ required: true, message: '请选择建议类型' }]}\n          >\n            <Select placeholder=\"请选择建议类型\">\n              {suggestionTypes.map(type => (\n                <Option key={type.value} value={type.value}>\n                  {type.label}\n                </Option>\n              ))}\n            </Select>\n          </Form.Item>\n\n          <Form.Item\n            name=\"content\"\n            label=\"建议内容\"\n            rules={[{ required: true, message: '请输入建议内容' }]}\n          >\n            <TextArea\n              placeholder=\"请详细描述您的建议...\"\n              rows={isMobile ? 4 : 6}\n              maxLength={2000}\n              showCount\n            />\n          </Form.Item>\n\n          <Form.Item\n            name=\"expectedBenefit\"\n            label=\"预期效益\"\n            rules={[{ required: true, message: '请描述预期效益' }]}\n          >\n            <TextArea\n              placeholder=\"请描述实施该建议可能带来的效益...\"\n              rows={isMobile ? 3 : 4}\n              maxLength={1000}\n              showCount\n            />\n          </Form.Item>\n\n          <Form.Item\n            label=\"附件\"\n            extra=\"支持 jpg、png、pdf 格式文件，单个文件不超过10MB\"\n          >\n            <Upload\n              fileList={fileList}\n              onChange={handleFileChange}\n              beforeUpload={() => false}\n              maxCount={5}\n            >\n              <Button icon={<UploadOutlined />} disabled={isRestrictedUser}>选择文件</Button>\n            </Upload>\n          </Form.Item>\n\n          <Form.Item>\n            <Space style={{ \n              display: isMobile ? 'flex' : 'inline-flex',\n              flexDirection: isMobile ? 'column' : 'row',\n              width: isMobile ? '100%' : 'auto'\n            }}>\n              <Button \n                type=\"primary\" \n                htmlType=\"submit\" \n                loading={loading} \n                disabled={isRestrictedUser}\n                style={{ width: isMobile ? '100%' : 'auto' }}\n              >\n                提交建议\n              </Button>\n              <Button \n                onClick={() => navigate('/suggestions/list')}\n                style={{ width: isMobile ? '100%' : 'auto' }}\n              >\n                取消\n              </Button>\n            </Space>\n          </Form.Item>\n        </Form>\n      </Card>\n    </div>\n  );\n};\n\nexport default NewSuggestion; "],"names":["REVIEW_STATUS","PENDING_FIRST_REVIEW","PENDING_SECOND_REVIEW","APPROVED","REJECTED","REVIEW_STATUS_COLORS","REVIEW_STATUS_TRANSITIONS","IMPLEMENTATION_STATUS","NOT_STARTED","CONTACTING","IN_PROGRESS","DELAYED","COMPLETED","CANCELLED","IMPLEMENTATION_STATUS_TRANSITIONS","IMPLEMENTATION_STATUS_COLORS","SUGGESTION_STATUS","NOT_IMPLEMENTED","IMPLEMENTING","SUGGESTION_TYPES","SAFETY","ELECTRICAL","MECHANICAL","KEXIN_AUTOMATION","KEXIN_MONITORING","OTHER","REVIEW_LEVELS","FIRST_LEVEL","SECOND_LEVEL","REVIEW_RESULTS","PENDING","STATUS_COLORS","TYPE_COLORS","API_URL","suggestionService","getCreateData","async","api","get","error","console","submitSuggestion","log","formData","response","post","headers","undefined","_error$response","data","getSuggestions","params","arguments","length","queryString","URLSearchParams","toString","result","pagination","current","parseInt","page","pageSize","limit","total","Array","isArray","suggestions","warn","arrayProp","Object","entries","find","_ref","_","value","paginationProp","_ref2","key","paginationData","currentPage","size","totalCount","totalItems","_error$response2","message","getSuggestionById","id","validateSuggestionData","updateSuggestionStatus","status","comment","put","firstReview","approved","comments","_error$response3","secondReview","_error$response4","updateSuggestion","updateData","addComment","content","getAllSuggestions","axios","getSuggestion","createSuggestion","suggestionData","deleteSuggestion","delete","success","_error$response5","_error$response6","_error$response6$data","submitForReview","reviewSuggestion","reviewData","updateImplementation","implementationData","statusMap","updatePayload","evaluation","_error$response7","_error$response8","_error$response8$data","getImplementationStats","submitReview","scoreSuggestion","score","suggestion","implementation","_implementation$imple","responsiblePerson","implementer","name","startDate","plannedEndDate","plannedCompletionDate","actualEndDate","actualCompletionDate","notes","history","reviewStatus","implementationStatus","require","submitter","_id","map","user","createdAt","Date","toISOString","_React$Component","ErrorBoundary","_this","t","o","e","_classCallCheck","this","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","Reflect","construct","constructor","apply","state","info","componentStack","_inherits","_createClass","setState","_this$props","props","description","children","_this$state","errorMessage","errorDescription","React","Alert","type","__rest","s","p","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","propertyIsEnumerable","iconMapFilled","CheckCircleFilled","InfoCircleFilled","CloseCircleFilled","warning","ExclamationCircleFilled","iconMapOutlined","CheckCircleOutlined","InfoCircleOutlined","CloseCircleOutlined","ExclamationCircleOutlined","IconNode","icon","prefixCls","iconType","replaceElement","className","concat","classNames","_defineProperty","CloseIcon","isClosable","closeText","closeIcon","handleClose","onClick","tabIndex","_a","customizePrefixCls","banner","_a$className","style","onMouseEnter","onMouseLeave","afterClose","showIcon","closable","_a$closeIcon","CloseOutlined","action","_React$useState","_React$useState2","_slicedToArray","closed","setClosed","ref","_React$useContext","ConfigContext","getPrefixCls","direction","onClose","getType","isShowIcon","alertCls","dataOrAriaProps","getDataOrAriaProps","CSSMotion","visible","motionName","motionAppear","motionEnter","onLeaveStart","node","maxHeight","offsetHeight","onLeaveEnd","motionClassName","motionStyle","_extends","role","UploadOutlined","AntdIcon","_objectSpread","UploadOutlinedSvg","TextArea","Input","Option","Select","NewSuggestion","form","Form","useForm","loading","setLoading","useState","fileList","setFileList","suggestionTypes","setSuggestionTypes","initializing","setInitializing","currentUser","setCurrentUser","isRestrictedUser","setIsRestrictedUser","isMobile","setIsMobile","window","innerWidth","navigate","useNavigate","useEffect","handleResize","addEventListener","removeEventListener","authService","getCurrentUser","setTimeout","checkUserPermission","types","label","fetchInitialData","_jsx","_jsxs","Card","title","bodyStyle","padding","marginBottom","layout","onFinish","values","FormData","forEach","file","index","originFileObj","append","keys","pair","File","_error$response$data","disabled","width","Item","rules","required","placeholder","maxLength","rows","showCount","extra","Upload","onChange","beforeUpload","maxCount","Button","Space","display","flexDirection","htmlType"],"sourceRoot":""}